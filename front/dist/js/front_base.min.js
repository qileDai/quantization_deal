function Auth(){var e=this;e.maskWrapper=$(".mask-wrapper"),e.roleWrapper=$(".role-wrapper"),e.menuWwrapper=$(".menu-wrapper"),e.permissionWrapper=$(".permission-wrapper")}function User(){}Auth.prototype.run=function(){var e=this;e.listenUserShowHideEvent(),e.listMenuShowHideEvent(),e.listRoleShowHideEvent(),e.listCancelEvent(),e.listtenPermissionShowEvent()},Auth.prototype.showUserEvent=function(){this.maskWrapper.show()},Auth.prototype.showRoleEvent=function(){this.roleWrapper.show()},Auth.prototype.showPermissionEvent=function(){this.permissionWrapper.show()},Auth.prototype.showMenuEvent=function(){this.menuWwrapper.show(),this.roleWrapper.show()},Auth.prototype.hideEvent=function(){var e=this;e.maskWrapper.hide(),e.roleWrapper.hide(),e.menuWwrapper.hide(),e.permissionWrapper.hide()},Auth.prototype.listRoleShowHideEvent=function(){var e=this,n=$("#role-add-btn"),t=$(".close-btn");n.click(function(){e.showRoleEvent()}),t.click(function(){e.hideEvent()})},Auth.prototype.listCancelEvent=function(){var e=this;$("#cacle").click(function(){e.hideEvent()})},Auth.prototype.listMenuShowHideEvent=function(){var e=this,n=$("#menu-add-btn"),t=$(".close-btn");n.click(function(){e.showMenuEvent()}),t.click(function(){e.hideEvent()})},Auth.prototype.listenUserShowHideEvent=function(){var e=this,n=$("#user-add-btn"),t=$(".close-btn");n.click(function(){console.log("dddd"),e.showUserEvent()}),t.click(function(){e.hideEvent()})},Auth.prototype.listtenPermissionShowEvent=function(){var e=this,n=$("#permission-add-btn"),t=$(".close-btn");n.click(function(){e.showPermissionEvent()}),t.click(function(){e.hideEvent()})},$(function(){(new Auth).run()}),User.prototype.run=function(){var e=this;e.listUserSubmintEvent(),e.listRoleSubmitEvent(),e.listDelteUsersEvent(),e.listenDeleteRolesEvent(),e.listenEditUserShowEvent(),e.listenPermissionSubmitEvent()},User.prototype.listUserSubmintEvent=function(){var l=$(".singup-group");$("#user-confirm").click(function(){console.log("用户添加页面");var e=l.find("input[name='username']"),n=l.find("input[name='email']"),t=l.find("input[name='password']"),o=l.find("select[name='userrole']"),i=e.val(),r=n.val(),s=t.val(),a=o.val();console.log(i,r,s,a),xfzajax.post({url:"/rbac/add_users/",data:{username:i,password:s,email:r,role:a},success:function(e){200===e.code&&xfzalert.alertSuccess("添加用户成功",function(){window.location.reload()})}})})},User.prototype.listRoleSubmitEvent=function(){roleGroup=$(".role-modal-body "),$("#role-confirm").click(function(){rolename=roleGroup.find("input[name='rolename']").val(),permission=roleGroup.find("select[name='permission']").val(),console.log(rolename,permission),xfzajax.post({url:"/rbac/add_roles/",data:{rolename:rolename,permission:permission},success:function(e){200===e.code&&(console.log("sdf"),xfzalert.alertSuccess("添加角色成功",function(){window.location.reload()}))}})})},User.prototype.listDelteUsersEvent=function(){$(".delete-users-btn").on("click",function(){var e=$(this).parent().parent().attr("data_users_id");console.log(e),xfzalert.alertConfirm({title:"您确定要删除这个用户吗？",confirmCallback:function(){xfzajax.post({url:"/rbac/delete_users/",data:{pk:e},success:function(e){200===e.code&&window.location.reload()}})}})})},User.prototype.listenDeleteRolesEvent=function(){$(".delete-roles-btn").on("click",function(){var e=$(this).parent().parent().attr("data-role-id");console.log(e),xfzalert.alertConfirm({title:"您确定要删除这个角色吗",confirmCallback:function(){xfzajax.post({url:"/rbac/delete_roles/",data:{pk:e},success:function(e){200===e.code&&window.location.reload()}})}})})},User.prototype.listenEditUserShowEvent=function(){var r=$(".singup-group "),s=$(".mask-wrapper");$(".edit-user-btn").on("click",function(){var e=$(this).parent().parent(),n=e.attr("data-name"),t=e.attr("data-email"),o=e.attr("data-role");console.log(o);var i=e.attr("data-password");s.show(),r.find("input[name='username']").val(n),r.find("input[name='password']").val(i),r.find("input[name='email']").val(t),r.find("select[name='userrole']").val(o)})},User.prototype.listenPermissionSubmitEvent=function(){var e=$("#permission-confirm"),n=$(".permission-modal-body ");e.click(function(){title=n.find("input[name='permission']").val(),permissionUrl=n.find("input[name='url']").val(),menu=n.find("select[name='menu']").val(),console.log(title,permissionUrl,menu),xfzajax.post({url:"/rbac/add_permission/",data:{title:title,url:permissionUrl,menu:menu},success:function(e){200===e.code&&xfzalert.alertSuccess("添加权限成功",function(){window.location.reload()})}})})},$(function(){(new User).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwicm9sZVdyYXBwZXIiLCJtZW51V3dyYXBwZXIiLCJwZXJtaXNzaW9uV3JhcHBlciIsIlVzZXIiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5Vc2VyU2hvd0hpZGVFdmVudCIsImxpc3RNZW51U2hvd0hpZGVFdmVudCIsImxpc3RSb2xlU2hvd0hpZGVFdmVudCIsImxpc3RDYW5jZWxFdmVudCIsImxpc3R0ZW5QZXJtaXNzaW9uU2hvd0V2ZW50Iiwic2hvd1VzZXJFdmVudCIsInNob3ciLCJzaG93Um9sZUV2ZW50Iiwic2hvd1Blcm1pc3Npb25FdmVudCIsInNob3dNZW51RXZlbnQiLCJoaWRlRXZlbnQiLCJoaWRlIiwicm9sZUJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJtZW51QnRuIiwiYWRkQnRuIiwiY29uc29sZSIsImxvZyIsInBlcm1pc3Npb25CdG4iLCJsaXN0VXNlclN1Ym1pbnRFdmVudCIsImxpc3RSb2xlU3VibWl0RXZlbnQiLCJsaXN0RGVsdGVVc2Vyc0V2ZW50IiwibGlzdGVuRGVsZXRlUm9sZXNFdmVudCIsImxpc3RlbkVkaXRVc2VyU2hvd0V2ZW50IiwibGlzdGVuUGVybWlzc2lvblN1Ym1pdEV2ZW50Iiwic2lnaW51cEdyb3VwIiwidXNlcm5hbWVJbnB1dCIsImZpbmQiLCJlbWFpbElucHV0IiwicGFzc3dvcmRJbnB1dCIsInJvbGVJbnB1dCIsInVzZXJuYW1lIiwidmFsIiwiZW1haWwiLCJwYXNzd29yZCIsInJvbGUiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInJvbGVHcm91cCIsInJvbGVuYW1lIiwicGVybWlzc2lvbiIsIm9uIiwicGsiLCJwYXJlbnQiLCJhdHRyIiwiYWxlcnRDb25maXJtIiwidGl0bGUiLCJjb25maXJtQ2FsbGJhY2siLCJ1c2VyR3JvdXAiLCJ1c2VyV3JhcHBlciIsInRyIiwidXNlciIsImJ0biIsInBlcm1pc3Npb25Hcm91cCIsInBlcm1pc3Npb25VcmwiLCJtZW51Il0sIm1hcHBpbmdzIjoiQUFNQSxTQUFTQSxPQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxFQUFLSSxZQUFjRCxFQUFFLGlCQUNyQkgsRUFBS0ssYUFBZUYsRUFBRSxpQkFDdEJILEVBQUtNLGtCQUFvQkgsRUFBRSx1QkF1Ry9CLFNBQVNJLFFBcEdUUixLQUFLUyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlULEVBQU9DLEtBRVhELEVBQUtVLDBCQUNMVixFQUFLVyx3QkFDTFgsRUFBS1ksd0JBQ0xaLEVBQUthLGtCQUNMYixFQUFLYyw4QkFJVGYsS0FBS1MsVUFBVU8sY0FBZ0IsV0FDaEJkLEtBQ05DLFlBQVljLFFBRXJCakIsS0FBS1MsVUFBVVMsY0FBZ0IsV0FDaEJoQixLQUNORyxZQUFZWSxRQUVyQmpCLEtBQUtTLFVBQVVVLG9CQUFzQixXQUN0QmpCLEtBQ05LLGtCQUFrQlUsUUFHM0JqQixLQUFLUyxVQUFVVyxjQUFnQixXQUNoQmxCLEtBQ05JLGFBQWFXLE9BRFBmLEtBRU5HLFlBQVlZLFFBSXJCakIsS0FBS1MsVUFBVVksVUFBWSxXQUN2QixJQUFJcEIsRUFBT0MsS0FDWEQsRUFBS0UsWUFBWW1CLE9BQ2pCckIsRUFBS0ksWUFBWWlCLE9BQ2pCckIsRUFBS0ssYUFBYWdCLE9BQ2xCckIsRUFBS00sa0JBQWtCZSxRQUUzQnRCLEtBQUtTLFVBQVVJLHNCQUF3QixXQUNuQyxJQUFJWixFQUFPQyxLQUNQcUIsRUFBVW5CLEVBQUUsaUJBQ1pvQixFQUFXcEIsRUFBRSxjQUNqQm1CLEVBQVFFLE1BQU0sV0FDVnhCLEVBQUtpQixrQkFFVE0sRUFBU0MsTUFBTSxXQUNYeEIsRUFBS29CLGVBSWJyQixLQUFLUyxVQUFVSyxnQkFBa0IsV0FDN0IsSUFBSWIs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SyxDQUNUQyxJQUFPLHdCQUNQQyxLQUFPLENBQ0hnQixNQUFRQSxNQUNSakIsSUFBTXlCLGNBQ05DLEtBQU9BLE1BRVh4QixRQUFVLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsTUFDWkMsU0FBU0MsYUFBYSxTQUFTLFdBQzFCQyxPQUFPQyxTQUFTQyxpQkFRekN0RCxFQUFFLFlBQ2EsSUFBSUksTUFDVkUiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTkvMS8zLlxyXG4gKi9cclxuXHJcbi8qIOWkhOeQhueZu+W9lemXrumimCovXHJcblxyXG5mdW5jdGlvbiBBdXRoKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlciA9ICQoJy5tYXNrLXdyYXBwZXInKTtcclxuICAgIHNlbGYucm9sZVdyYXBwZXIgPSAkKCcucm9sZS13cmFwcGVyJyk7XHJcbiAgICBzZWxmLm1lbnVXd3JhcHBlciA9ICQoJy5tZW51LXdyYXBwZXInKTtcclxuICAgIHNlbGYucGVybWlzc2lvbldyYXBwZXIgPSAkKCcucGVybWlzc2lvbi13cmFwcGVyJylcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblVzZXJTaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RNZW51U2hvd0hpZGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0Um9sZVNob3dIaWRlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdENhbmNlbEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5QZXJtaXNzaW9uU2hvd0V2ZW50KCk7XHJcbn07XHJcblxyXG5cclxuQXV0aC5wcm90b3R5cGUuc2hvd1VzZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5BdXRoLnByb3RvdHlwZS5zaG93Um9sZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5yb2xlV3JhcHBlci5zaG93KCk7XHJcbn07XHJcbkF1dGgucHJvdG90eXBlLnNob3dQZXJtaXNzaW9uRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBlcm1pc3Npb25XcmFwcGVyLnNob3coKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUuc2hvd01lbnVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWVudVd3cmFwcGVyLnNob3coKTtcclxuICAgIHNlbGYucm9sZVdyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmhpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuaGlkZSgpO1xyXG4gICAgc2VsZi5yb2xlV3JhcHBlci5oaWRlKCk7XHJcbiAgICBzZWxmLm1lbnVXd3JhcHBlci5oaWRlKCk7XHJcbiAgICBzZWxmLnBlcm1pc3Npb25XcmFwcGVyLmhpZGUoKTtcclxufTtcclxuQXV0aC5wcm90b3R5cGUubGlzdFJvbGVTaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHJvbGVCdG4gPSAkKCcjcm9sZS1hZGQtYnRuJyk7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICByb2xlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dSb2xlRXZlbnQoKTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxuXHJcbn07XHJcbkF1dGgucHJvdG90eXBlLmxpc3RDYW5jZWxFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjYW5jZWxCdG4gPSAkKCcjY2FjbGUnKTtcclxuICAgIGNhbmNlbEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcclxuICAgIH0pXHJcbn1cclxuQXV0aC5wcm90b3R5cGUubGlzdE1lbnVTaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIG1lbnVCdG4gPSAkKCcjbWVudS1hZGQtYnRuJyk7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICBtZW51QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dNZW51RXZlbnQoKTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxufVxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Vc2VyU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBhZGRCdG4gPSAkKCcjdXNlci1hZGQtYnRuJyk7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcblxyXG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImRkZGRcIilcclxuICAgICAgICBzZWxmLnNob3dVc2VyRXZlbnQoKTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxufTtcclxuQXV0aC5wcm90b3R5cGUubGlzdHRlblBlcm1pc3Npb25TaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgcGVybWlzc2lvbkJ0biA9ICQoJyNwZXJtaXNzaW9uLWFkZC1idG4nKTtcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgIHBlcm1pc3Npb25CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd1Blcm1pc3Npb25FdmVudCgpXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aCA9IG5ldyBBdXRoKCk7XHJcbiAgICBhdXRoLnJ1bigpO1xyXG59KTtcclxuXHJcbi8q5aSE55CG55So5oi3Ki9cclxuZnVuY3Rpb24gVXNlcigpIHtcclxuXHJcbn07XHJcblxyXG5Vc2VyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RVc2VyU3VibWludEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RSb2xlU3VibWl0RXZlbnQoKTtcclxuICAgIHNlbGYubGlzdERlbHRlVXNlcnNFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5EZWxldGVSb2xlc0V2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkVkaXRVc2VyU2hvd0V2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblBlcm1pc3Npb25TdWJtaXRFdmVudCgpO1xyXG59O1xyXG5cclxuVXNlci5wcm90b3R5cGUubGlzdFVzZXJTdWJtaW50RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2lnaW51cEdyb3VwID0gJCgnLnNpbmd1cC1ncm91cCcpO1xyXG4gICAgdmFyIHVzZXJTdWJtaXRCdG4gPSAkKCcjdXNlci1jb25maXJtJyk7XHJcbiAgICB1c2VyU3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIueUqOaIt+a3u+WKoOmhtemdolwiKVxyXG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnaW51cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd1c2VybmFtZSddXCIpXHJcbiAgICAgICAgdmFyIGVtYWlsSW5wdXQgPSBzaWdpbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2VtYWlsJ11cIilcclxuICAgICAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ2ludXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKVxyXG4gICAgICAgIHZhciByb2xlSW5wdXQgPSBzaWdpbnVwR3JvdXAuZmluZChcInNlbGVjdFtuYW1lPSd1c2Vycm9sZSddXCIpXHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBlbWFpbCA9IGVtYWlsSW5wdXQudmFsKClcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpXHJcbiAgICAgICAgdmFyIHJvbGUgPSByb2xlSW5wdXQudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyh1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLHJvbGUpXHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL3JiYWMvYWRkX3VzZXJzLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdlbWFpbCc6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgJ3JvbGUnOnJvbGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIua3u+WKoOeUqOaIt+aIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuVXNlci5wcm90b3R5cGUubGlzdFJvbGVTdWJtaXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJvbGVHcm91cCA9ICQoJy5yb2xlLW1vZGFsLWJvZHkgJyk7XHJcbiAgICB2YXIgcm9sZUJ0biA9ICQoJyNyb2xlLWNvbmZpcm0nKTtcclxuXHJcbiAgICByb2xlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByb2xlbmFtZSA9IHJvbGVHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncm9sZW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIHBlcm1pc3Npb24gPSByb2xlR3JvdXAuZmluZChcInNlbGVjdFtuYW1lPSdwZXJtaXNzaW9uJ11cIikudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhyb2xlbmFtZSwgcGVybWlzc2lvbilcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvcmJhYy9hZGRfcm9sZXMvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncm9sZW5hbWUnOiByb2xlbmFtZSxcclxuICAgICAgICAgICAgICAgICdwZXJtaXNzaW9uJzogcGVybWlzc2lvblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZGZcIilcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDop5LoibLmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5Vc2VyLnByb3RvdHlwZS5saXN0RGVsdGVVc2Vyc0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgJCgnLmRlbGV0ZS11c2Vycy1idG4nKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhX3VzZXJzX2lkJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGspXHJcbiAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcclxuICAgICAgICAgICAgJ3RpdGxlJzogJ+aCqOehruWumuimgeWIoOmZpOi/meS4queUqOaIt+WQl++8nycsXHJcbiAgICAgICAgICAgICdjb25maXJtQ2FsbGJhY2snOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL3JiYWMvZGVsZXRlX3VzZXJzLycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblVzZXIucHJvdG90eXBlLmxpc3RlbkRlbGV0ZVJvbGVzRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcuZGVsZXRlLXJvbGVzLWJ0bicpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtcm9sZS1pZCcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBrKVxyXG4gICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICd0aXRsZSc6ICfmgqjnoa7lrpropoHliKDpmaTov5nkuKrop5LoibLlkJcnLFxyXG4gICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9yYmFjL2RlbGV0ZV9yb2xlcy8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcblVzZXIucHJvdG90eXBlLmxpc3RlbkVkaXRVc2VyU2hvd0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHVzZXJHcm91cCA9ICQoJy5zaW5ndXAtZ3JvdXAgJyk7XHJcbiAgICB2YXIgdXNlcldyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh1c2VyKVxyXG4gICAgJCgnLmVkaXQtdXNlci1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHVzZXIgPSB0ci5hdHRyKCdkYXRhLW5hbWUnKTtcclxuICAgICAgICB2YXIgZW1haWwgPSB0ci5hdHRyKCdkYXRhLWVtYWlsJyk7XHJcbiAgICAgICAgdmFyIHJvbGUgPSB0ci5hdHRyKCdkYXRhLXJvbGUnKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhyb2xlKVxyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHRyLmF0dHIoJ2RhdGEtcGFzc3dvcmQnKVxyXG4gICAgICAgIHVzZXJXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHVzZXJHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKS52YWwodXNlcilcclxuICAgICAgICB1c2VyR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIikudmFsKHBhc3N3b3JkKVxyXG4gICAgICAgIHVzZXJHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nZW1haWwnXVwiKS52YWwoZW1haWwpXHJcbiAgICAgICAgdXNlckdyb3VwLmZpbmQoXCJzZWxlY3RbbmFtZT0ndXNlcnJvbGUnXVwiKS52YWwocm9sZSlcclxuXHJcbiAgICB9KVxyXG59O1xyXG5cclxuVXNlci5wcm90b3R5cGUubGlzdGVuUGVybWlzc2lvblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBidG4gPSAkKCcjcGVybWlzc2lvbi1jb25maXJtJylcclxuICAgIHZhciBwZXJtaXNzaW9uR3JvdXAgPSAkKCcucGVybWlzc2lvbi1tb2RhbC1ib2R5ICcpXHJcbiAgICBidG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRpdGxlID0gcGVybWlzc2lvbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwZXJtaXNzaW9uJ11cIikudmFsKClcclxuICAgICAgICBwZXJtaXNzaW9uVXJsID0gcGVybWlzc2lvbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd1cmwnXVwiKS52YWwoKVxyXG4gICAgICAgIG1lbnUgPSBwZXJtaXNzaW9uR3JvdXAuZmluZChcInNlbGVjdFtuYW1lPSdtZW51J11cIikudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyh0aXRsZSxwZXJtaXNzaW9uVXJsLG1lbnUpXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvcmJhYy9hZGRfcGVybWlzc2lvbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzp0aXRsZSxcclxuICAgICAgICAgICAgICAgICd1cmwnOnBlcm1pc3Npb25VcmwsXHJcbiAgICAgICAgICAgICAgICAnbWVudSc6bWVudVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5re75Yqg5p2D6ZmQ5oiQ5YqfXCIsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB1c2VyID0gbmV3IFVzZXIoKTtcclxuICAgIHVzZXIucnVuKCk7XHJcbn0pIl19
