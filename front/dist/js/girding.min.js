function Girding(){}function Robot(){var t=this;t.robotWrapper=$(".robot-wrapper"),t.tradingOnWrapper=$(".trading-on"),t.tradingStrategyWrapper=$(".trading-strategy"),t.setStrategyWrapper=$(".set-strategy"),t.setRiskWrapper=$(".set-risk-strategy")}Girding.prototype.run=function(){},Girding.prototype.modalRun=function(){var t=this,e=new Array(t.step1,t.stept2);t.moadlDataControl("#modal",e,t.modalCallback())},Girding.prototype.controlPageToggle=function(t,e,r,o){var n=e.length;n<=1||(1==o?(r==n-2&&$(t+" .next-page").text("提交"),0==r&&1<n&&$(t+" .previous-page").removeClass("hidden"),$(t+" .page-index").text((++r).toString())):(r==n-1&&$(t+" .next-page").text("下一页"),1==r&&$(t+" .previous-page").addClass("hidden"),$(t+" .page-index").text((--r).toString())),$(t+" .modal-body").html(e[r]))},Girding.prototype.moadlDataControl=function(e,r,t){var o=this;$(e+" .modal-body").html(r[0]),r.length<=1&&$(e+" .next-page").text("提交"),$(e+" .next-page").click(function(){if(o.modalCallback(),"提交"!=$(this).text()){var t=parseInt($(e+" .page-index").text());o.controlPageToggle(e,r,t,1)}else $(e).modal("hide")}),$(e+" .previous-page").click(function(){var t=parseInt($(e+" .page-index").text());controlPageToggle(e,r,t,-1)}),$(e).on("hidden.bs.modal",function(){$(e+" .page-index").text((0).toString()),r.length<=1?$(e+" .next-page").text("提交"):$(e+" .next-page").text("下一页"),$(e+" .modal-body").html(r[0]),$(e+" .previous-page").addClass("hidden")})},Girding.prototype.modalCallback=function(){alert("提交成功")},$(function(){(new Girding).run()}),Robot.prototype.run=function(){var t=this;t.listenClickRobotEvent(),t.listenCloseRobotEvent(),t.loadstepEvent(),t.listenTradingRobotEvent(),t.listenCreatTradingEvent(),t.listenparameterEven(),t.listenSubmitRobot(),t.runRobotEvent(),t.protectRelieve(),t.getAccountInfoEvent()},Robot.prototype.initYstepEvent=function(){$(".ystep").setStep(1)},Robot.prototype.loadstepEvent=function(){$(".ystep").loadStep({size:"large",color:"green",steps:[{title:"选择交易对"},{title:"选择交易策略"},{title:"设置策略参数"},{title:"设置风险策略"}]})},Robot.prototype.listenClickRobotEaaavent=function(){var t=this,e=$("#btnPre"),r=$("#btnNext"),i=new Array(t.tradingOnWrapper,t.tradingStrategyWrapper,t.setStrategyWrapper,t.setRiskWrapper),l=(i.length,0),o=0;$("#create-robot").on("click",function(){0==o?(t.robotWrapper.show(),i[l].show(),o++):(console.log(o),t.robotWrapper.show()),$("#btnPre").unbind(),e.click(function(){console.log("num"),l<=0?l=0:(l--,$("#btnNext").text("下一步")),$(".ystep").prevStep(),console.log("val",i);for(var t=0;t<i.length;t++)l===t?i[t].show():i[t].hide()}),$("#btnNext").unbind(),r.click(function(){var t=$("#curry").find(" option:selected").text(),e=$("#market").find(" option:selected").text(),r=$(".parameters-control").find(" option:selected").text(),o=$(".strategy-parameters .trading-parameters .resistance-value").val(),n=$(".strategy-parameters .trading-parameters .support").val(),a=$(".strategy-parameters .trading-parameters .grid-number").val(),s=t+"/"+e;$(".trading-strategy .strategy-curry .curry").text(s),$(".set-strategy .strategy-curry .curry").text(s),$(".set-risk-strategy .strategy-curry .curry").text(s),$(".set-strategy-title .strategy-parameters-top .user").text(r),$(".set-risk-strategy .set-strategy-title .resistance").text(o),$(".set-risk-strategy .set-strategy-title .support-level").text(n),$(".set-risk-strategy .set-strategy-title .girding-num").text(a);$(".strategy-name .strategy-button button").unbind(),$(".strategy-name .strategy-button button").on("click",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).text();console.log(t),$(".set-strategy .strategy-title .strategy").text(t),$(".set-risk-strategy .strategy-title .curry").text(t)}),console.log("next"),2<=l?($("#btnNext").hide(),$("#btnComplete").show(),l=3):(l++,$("#btnNext").text("下一步")),$(".ystep").nextStep(),$.each(i,function(t,e){l===t?e.show():e.hide()})}),$(".warninguser label").on("click",function(){$(this).toggleClass("btn-success")})})},Robot.prototype.listenClickRobotEvent=function(){var t=this,e=$("#btnPre"),r=$("#btnNext"),i=new Array(t.tradingOnWrapper,t.tradingStrategyWrapper,t.setStrategyWrapper,t.setRiskWrapper),l=0,o=0;$("#create-robot").on("click",function(){0==o?(t.robotWrapper.show(),i[l].show(),o++):(console.log(o),t.robotWrapper.show()),$("#btnPre").unbind(),e.click(function(){console.log("num"),l<=0?l=0:(l--,$("#btnNext").show().text("下一步"),$("#btnComplete").hide()),$(".ystep").prevStep(),console.log("val",i);for(var t=0;t<i.length;t++)l===t?i[t].show():i[t].hide()}),$("#btnNext").unbind(),r.click(function(){var t=$("#curry").find(" option:selected").text(),e=$("#market").find(" option:selected").text(),r=$(".parameters-control").find(" option:selected").text(),o=$(".strategy-parameters .trading-parameters .resistance-value").val(),n=$(".strategy-parameters .trading-parameters .support").val(),a=$(".strategy-parameters .trading-parameters .grid-number").val(),s=t+"/"+e;$(".trading-strategy .strategy-curry .curry").text(s),$(".set-strategy .strategy-curry .curry").text(s),$(".set-risk-strategy .strategy-curry .curry").text(s),$(".set-strategy-title .strategy-parameters-top .user").text(r),$(".set-risk-strategy .set-strategy-title .resistance").text(o),$(".set-risk-strategy .set-strategy-title .support-level").text(n),$(".set-risk-strategy .set-strategy-title .girding-num").text(a);$(".strategy-name .strategy-button button").unbind(),$(".strategy-name .strategy-button button").on("click",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).text();console.log(t),$(".set-strategy .strategy-title .strategy").text(t),$(".set-risk-strategy .strategy-title .curry").text(t)}),2<=l?($("#btnNext").hide(),$("#btnComplete").show(),l=3):(l++,$("#btnNext").text("下一步")),$(".ystep").nextStep(),$.each(i,function(t,e){l===t?e.show():e.hide()})}),$(".warninguser label").on("click",function(){$(this).toggleClass("btn-success")})})},Robot.prototype.listenCloseRobotEvent=function(){var t=$(".close-btn"),e=$(".robot-wrapper");t.click(function(){e.hide()})},Robot.prototype.listenCreatTradingEvent=function(){$(".robot-details").on("click",function(){$(".tradingParticulars").show(),$(".tradingShade").show();var t=$(this).parent().parent().attr("data-id");xfzajax.post({url:"/deal/showtradedetail/",data:{robot_id:t},success:function(t){console.log(t)}})})},Robot.prototype.listenTradingRobotEvent=function(){var t=$(".trading-close-btn"),e=$(".tradingParticulars"),r=$(".tradingShade"),o=$(".trading-loading"),n=$(".trading-ending"),a=$(".trading-container"),s=$(".trading-ending-table");t.click(function(){e.hide(),r.hide()}),n.click(function(){a.hide(),s.show(),o.toggleClass("green"),n.toggleClass("green")}),o.click(function(){a.show(),s.hide(),n.toggleClass("green"),o.toggleClass("green")})},Robot.prototype.listenparameterEven=function(){var t=$(".parameter-configuration"),e=$(".parameter-close-btn"),r=$(".allocation"),o=$(".tradingShade");r.click(function(){t.show(),o.show()}),e.click(function(){t.hide(),o.hide()})},Robot.prototype.getAccountInfoEvent=function(){console.log("sfsfsfsdf"),$("#robot-account").change(function(){console.log("daiile");var t=$(".set-strategy").find(".strategy-curry .curry").text().split("/"),e=t[0],r=t[1];console.log(e,r);var o=$("#robot-account").find("option:selected").val();console.log(o),xfzajax.post({url:"/deal/getaccountinfo/",data:{"curry-title":e,"market-title":r,account_id:o},success:function(t){if(200===t.code){var e=t.data;console.log(e);var r=e.resistance,o=e.support_level;console.log(r,o),$(".resistance-value").text(r),$(".support-value").text(o),$("#stratery-girding-num").on("blur",function(){if(""==!$("#stratery-girding-num").val()){var t=$("#stratery-girding-num ").val();console.log(t)}}),$("#one-girding-free").on("blur",function(){if(""==!$("#one-girding-free").val()){var t=$("#one-girding-free").val();console.log(t)}})}}})})},Robot.prototype.listenClickStragerty=function(){$(".deal-strategy").each(function(t,e){var r=$(e);r.click(function(){r.addClass("active").siblings().removeClass("active")})})},Robot.prototype.listenSubmitRobot=function(){$("#btnComplete ").click(function(){console.log("dafasdf");var t=$(".set-risk-strategy"),e=t.find(".strategy-curry .curry").text().split("/"),r=e[0],o=e[1];console.log(r),console.log(o);var n=t.find('.strategy-parameters-top .user"').text(),a=t.find(".strategy-value").text();console.log(a);var s=t.find(".resistance-value").text(),i=t.find(".support-value").text(),l=t.find(".girding-value").text(),c=t.find(".deal-account-free").text(),g=t.find(".girding-profit-value").text();console.log("diaqle"),console.log(a,n,s,i,l,c,g)})},Robot.prototype.runRobotEvent=function(){$("#run-robot").click(function(){var t=$(this).parent().parent().attr("data-id"),e=[];e.push(t),console.log(e),xfzajax.post({url:"/deal/startrobot/",data:{robot_id:e},traditional:!0,success:function(t){200===t.code&&console.log(t)}})})},Robot.prototype.protectRelieve=function(){$(".protect-relieve").on("click",function(){var t=$(this).text();console.log(t);var e=$(this).siblings(),r=$(e[0]).text();if("运行"===r||"运行(保护)"===r)var o="运行";if("停止"===r||"停止(保护)"===r)o="停止";if("保护"===t){var n=r+"("+t+")";console.log(n),$(e[0]).text(n),$(this).text("解除")}else $(e[0]).text(o),$(this).text("保护")})},$(function(){(new Robot).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdpcmRpbmcuanMiXSwibmFtZXMiOlsiR2lyZGluZyIsIlJvYm90Iiwic2VsZiIsInRoaXMiLCJyb2JvdFdyYXBwZXIiLCIkIiwidHJhZGluZ09uV3JhcHBlciIsInRyYWRpbmdTdHJhdGVneVdyYXBwZXIiLCJzZXRTdHJhdGVneVdyYXBwZXIiLCJzZXRSaXNrV3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsIm1vZGFsUnVuIiwibW9kYWxEYXRhQXJyYXkiLCJBcnJheSIsInN0ZXAxIiwic3RlcHQyIiwibW9hZGxEYXRhQ29udHJvbCIsIm1vZGFsQ2FsbGJhY2siLCJjb250cm9sUGFnZVRvZ2dsZSIsIm1vZGFsU2VsZWN0IiwiY3VycmVudFBhZ2VJbmRleCIsImRpcmVjdGlvbiIsImFycmF5TGVuZ3RoIiwibGVuZ3RoIiwidGV4dCIsInJlbW92ZUNsYXNzIiwidG9TdHJpbmciLCJhZGRDbGFzcyIsImh0bWwiLCJjbGljayIsInBhcnNlSW50IiwibW9kYWwiLCJvbiIsImFsZXJ0IiwibGlzdGVuQ2xpY2tSb2JvdEV2ZW50IiwibGlzdGVuQ2xvc2VSb2JvdEV2ZW50IiwibG9hZHN0ZXBFdmVudCIsImxpc3RlblRyYWRpbmdSb2JvdEV2ZW50IiwibGlzdGVuQ3JlYXRUcmFkaW5nRXZlbnQiLCJsaXN0ZW5wYXJhbWV0ZXJFdmVuIiwibGlzdGVuU3VibWl0Um9ib3QiLCJydW5Sb2JvdEV2ZW50IiwicHJvdGVjdFJlbGlldmUiLCJnZXRBY2NvdW50SW5mb0V2ZW50IiwiaW5pdFlzdGVwRXZlbnQiLCJzZXRTdGVwIiwibG9hZFN0ZXAiLCJzaXplIiwiY29sb3IiLCJzdGVwcyIsInRpdGxlIiwibGlzdGVuQ2xpY2tSb2JvdEVhYWF2ZW50IiwiYnRuUHJlIiwiYnRuTmV4dCIsInJvYm90RGF0YUFycmF5IiwibnVtIiwiY3JlYXRyb2JvdGNsaWNrIiwic2hvdyIsImNvbnNvbGUiLCJsb2ciLCJ1bmJpbmQiLCJwcmV2U3RlcCIsImkiLCJoaWRlIiwidHJhbnNhY3Rpb25DdXJyZW5jeSIsImZpbmQiLCJtYXJrZXR0aXRsZSIsInBhcmFtZXRlcnNjb250cm9sIiwicmVzaXN0YW5jZXZhbHVlIiwidmFsIiwic3VwcG9ydCIsImdyaWRudW1iZXIiLCJzaWJsaW5ncyIsInN0cmF0ZWd5dGl0bGUiLCJuZXh0U3RlcCIsImVhY2giLCJrZXkiLCJ2YWx1ZSIsInRvZ2dsZUNsYXNzIiwiY2xvc2VCdG4iLCJyb2JvdF9pZCIsInBhcmVudCIsImF0dHIiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwidHJhZGluZ2Nsb3NlYnRuIiwidHJhZGluZ1BhcnRpY3VsYXJzIiwidHJhZGluZ1NoYWRlIiwidHJhZGluZ2xvYWRpbmciLCJ0cmFkaW5nZW5kaW5nIiwidHJhZGluZ2NvbnRhaW5lciIsInRyYWRpbmdlbmRpbmd0YWJsZSIsInBhcmFtZXRlcmNvbmZpZ3VyYXRpb24iLCJwYXJhbWV0ZXJjbG9zZWJ0biIsImRlbGV0ZXByb3BlcnR5IiwiY2hhbmdlIiwic3RyciIsInNwbGl0IiwiY3VycnkiLCJtYXJrZXQiLCJpZCIsImN1cnJ5LXRpdGxlIiwibWFya2V0LXRpdGxlIiwiYWNjb3VudF9pZCIsInJlc2lzdGFuY2UiLCJzdXBwb3J0X2xldmVsIiwiZnJlZSIsImxpc3RlbkNsaWNrU3RyYWdlcnR5IiwiaW5kZXgiLCJlbGVtZW50IiwiYnRuIiwicm9ib3RHcm91cCIsImN1cnJlbnkiLCJhY2NvdW50Iiwic3RyYXRlZ3kiLCJnaXJkaW5nX251bSIsImdpcmRpbmdfcHJvZml0Iiwicm9ib3QiLCJwdXNoIiwidHJhZGl0aW9uYWwiLCJmbGFnIiwicnVuZmxnIiwiZmxnX3RleHQiLCJuZXdfdmFsdWUiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBb0hULFNBQVNDLFFBQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsYUFBZUMsRUFBRSxrQkFDdEJILEVBQUtJLGlCQUFtQkQsRUFBRSxlQUMxQkgsRUFBS0ssdUJBQXlCRixFQUFFLHFCQUNoQ0gsRUFB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QnBCLEVBQUUsWUFDYyxJQUFJSixPQUNWVSIsImZpbGUiOiJnaXJkaW5nLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEdpcmRpbmcoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG59O1xyXG5cclxuR2lyZGluZy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gc2VsZi5tb2RhbFJ1bigpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5TdGVwc0V2ZW50KClcclxufTtcclxuXHJcbkdpcmRpbmcucHJvdG90eXBlLm1vZGFsUnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIG1vZGFsRGF0YUFycmF5ID0gbmV3IEFycmF5KHNlbGYuc3RlcDEsIHNlbGYuc3RlcHQyKTtcclxuICAgIHNlbGYubW9hZGxEYXRhQ29udHJvbChcIiNtb2RhbFwiLCBtb2RhbERhdGFBcnJheSwgc2VsZi5tb2RhbENhbGxiYWNrKCkpXHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBtb2RhbFNlbGVjdCBtb2RhbOmAieaLqeespu+8jOacrOS+i+S4uuKAnCNteU1vZGFs4oCdXHJcbiAqIEBwYXJhbSBtb2RhbERhdGFBcnJheSBodG1s5Luj56CB5a2X56ym5Liy5pWw57uEXHJcbiAqIEBwYXJhbSBjdXJyZW50UGFnZUluZGV4IOW9k+WJjemhteeggVxyXG4gKiBAcGFyYW0gZGlyZWN0aW9uIDHooajnpLrkuIvkuIDpobXmlrnlkJHvvIwtMeihqOekuuS4iuS4gOmhteaWueWQkVxyXG4gKi9cclxuR2lyZGluZy5wcm90b3R5cGUuY29udHJvbFBhZ2VUb2dnbGUgPSBmdW5jdGlvbiAobW9kYWxTZWxlY3QsIG1vZGFsRGF0YUFycmF5LCBjdXJyZW50UGFnZUluZGV4LCBkaXJlY3Rpb24pIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBhcnJheUxlbmd0aCA9IG1vZGFsRGF0YUFycmF5Lmxlbmd0aDtcclxuICAgIGlmIChhcnJheUxlbmd0aCA8PSAxKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmIChkaXJlY3Rpb24gPT0gMSkge1xyXG4gICAgICAgIC8v5aaC5p6c5b2T5YmN6aG15piv5YCS5pWw56ys5LqM6aG177yM5YiZ5bCG5LiL5LiA6aG16K6+572u5Li65bC+6aG1XHJcbiAgICAgICAgaWYgKGN1cnJlbnRQYWdlSW5kZXggPT0gYXJyYXlMZW5ndGggLSAyKSB7XHJcbiAgICAgICAgICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLm5leHQtcGFnZVwiKS50ZXh0KFwi5o+Q5LqkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/lpoLmnpzlvZPliY3pobXmmK/pppbpobXvvIzmt7vliqDkuIrkuIDpobVcclxuICAgICAgICBpZiAoY3VycmVudFBhZ2VJbmRleCA9PSAwICYmIGFycmF5TGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAkKG1vZGFsU2VsZWN0ICsgXCIgXCIgKyBcIi5wcmV2aW91cy1wYWdlXCIpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+abtOaNom1vZGFsLWJvZHnlkozpobXnoIFcclxuICAgICAgICAkKG1vZGFsU2VsZWN0ICsgXCIgXCIgKyBcIi5wYWdlLWluZGV4XCIpLnRleHQoKCsrY3VycmVudFBhZ2VJbmRleCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgJChtb2RhbFNlbGVjdCArIFwiIFwiICsgXCIubW9kYWwtYm9keVwiKS5odG1sKG1vZGFsRGF0YUFycmF5W2N1cnJlbnRQYWdlSW5kZXhdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy/lpoLmnpzlvZPliY3pobXmmK/lsL7pobVcclxuICAgICAgICBpZiAoY3VycmVudFBhZ2VJbmRleCA9PSBhcnJheUxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgJChtb2RhbFNlbGVjdCArIFwiIFwiICsgXCIubmV4dC1wYWdlXCIpLnRleHQoXCLkuIvkuIDpobVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+WmguaenOW9k+WJjemhteaYr+ato+aVsOesrOS6jOmhtSzliJnlsIbkuIrkuIDpobXorr7nva7kuLrpppbpobVcclxuICAgICAgICBpZiAoY3VycmVudFBhZ2VJbmRleCA9PSAxKSB7XHJcbiAgICAgICAgICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLnByZXZpb3VzLXBhZ2VcIikuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5pu05o2ibW9kYWwtYm9keeWSjOmhteeggVxyXG4gICAgICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLnBhZ2UtaW5kZXhcIikudGV4dCgoLS1jdXJyZW50UGFnZUluZGV4KS50b1N0cmluZygpKTtcclxuICAgICAgICAkKG1vZGFsU2VsZWN0ICsgXCIgXCIgKyBcIi5tb2RhbC1ib2R5XCIpLmh0bWwobW9kYWxEYXRhQXJyYXlbY3VycmVudFBhZ2VJbmRleF0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBtb2RhbFNlbGVjdCBtb2RhbOmAieaLqeesplxyXG4gKiBAcGFyYW0gbW9kYWxEYXRhQXJyYXkgaHRtbOS7o+eggeWtl+espuS4suaVsOe7hFxyXG4gKiBAcGFyYW0gbW9kYWxDYWxsYmFjayBtb2RhbOWbnuiwg+WHveaVsFxyXG4gKi9cclxuR2lyZGluZy5wcm90b3R5cGUubW9hZGxEYXRhQ29udHJvbCA9IGZ1bmN0aW9uIChtb2RhbFNlbGVjdCwgbW9kYWxEYXRhQXJyYXksIG1vZGFsQ2FsbGJhY2spIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIC8v5Yid5aeL5YyW5qih5oCB5qGG6aaW6aG15pWw5o2uXHJcbiAgICAkKG1vZGFsU2VsZWN0ICsgXCIgXCIgKyBcIi5tb2RhbC1ib2R5XCIpLmh0bWwobW9kYWxEYXRhQXJyYXlbMF0pO1xyXG4gICAgaWYgKG1vZGFsRGF0YUFycmF5Lmxlbmd0aCA8PSAxKSB7XHJcbiAgICAgICAgJChtb2RhbFNlbGVjdCArIFwiIFwiICsgXCIubmV4dC1wYWdlXCIpLnRleHQoXCLmj5DkuqRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy/ngrnlh7vkuIvkuIDpobVcclxuICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLm5leHQtcGFnZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/osIPnlKjlm57osIPlh73mlbBcclxuICAgICAgICBzZWxmLm1vZGFsQ2FsbGJhY2soKVxyXG4gICAgICAgIGlmICgkKHRoaXMpLnRleHQoKSA9PSBcIuaPkOS6pFwiKSB7XHJcbiAgICAgICAgICAgICQobW9kYWxTZWxlY3QpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/ojrflj5blvZPliY3pobXnoIFcclxuICAgICAgICB2YXIgY3VycmVudFBhZ2VJbmRleCA9IHBhcnNlSW50KCQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLnBhZ2UtaW5kZXhcIikudGV4dCgpKTtcclxuICAgICAgICBzZWxmLmNvbnRyb2xQYWdlVG9nZ2xlKG1vZGFsU2VsZWN0LCBtb2RhbERhdGFBcnJheSwgY3VycmVudFBhZ2VJbmRleCwgMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL+eCueWHu+S4iuS4gOmhtVxyXG4gICAgJChtb2RhbFNlbGVjdCArIFwiIFwiICsgXCIucHJldmlvdXMtcGFnZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/ojrflj5blvZPliY3pobXnoIFcclxuICAgICAgICB2YXIgY3VycmVudFBhZ2VJbmRleCA9IHBhcnNlSW50KCQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLnBhZ2UtaW5kZXhcIikudGV4dCgpKTtcclxuICAgICAgICBjb250cm9sUGFnZVRvZ2dsZShtb2RhbFNlbGVjdCwgbW9kYWxEYXRhQXJyYXksIGN1cnJlbnRQYWdlSW5kZXgsIC0xKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v5YWz6Zet5qih5oCB5qGG5pe277yM6YeN572u5Li66aaW6aG1XHJcbiAgICAkKG1vZGFsU2VsZWN0KS5vbignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLnBhZ2UtaW5kZXhcIikudGV4dCgoMCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgaWYgKG1vZGFsRGF0YUFycmF5Lmxlbmd0aCA8PSAxKSB7XHJcbiAgICAgICAgICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLm5leHQtcGFnZVwiKS50ZXh0KFwi5o+Q5LqkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLm5leHQtcGFnZVwiKS50ZXh0KFwi5LiL5LiA6aG1XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKG1vZGFsU2VsZWN0ICsgXCIgXCIgKyBcIi5tb2RhbC1ib2R5XCIpLmh0bWwobW9kYWxEYXRhQXJyYXlbMF0pO1xyXG4gICAgICAgICQobW9kYWxTZWxlY3QgKyBcIiBcIiArIFwiLnByZXZpb3VzLXBhZ2VcIikuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XHJcbiAgICB9KVxyXG59XHJcblxyXG5HaXJkaW5nLnByb3RvdHlwZS5tb2RhbENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWxlcnQoXCLmj5DkuqTmiJDlip9cIik7XHJcbn1cclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBnaXJkID0gbmV3IEdpcmRpbmcoKTtcclxuICAgIGdpcmQucnVuKCk7XHJcbn0pXHJcblxyXG5cclxuZnVuY3Rpb24gUm9ib3QoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnJvYm90V3JhcHBlciA9ICQoJy5yb2JvdC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnRyYWRpbmdPbldyYXBwZXIgPSAkKCcudHJhZGluZy1vbicpO1xyXG4gICAgc2VsZi50cmFkaW5nU3RyYXRlZ3lXcmFwcGVyID0gJCgnLnRyYWRpbmctc3RyYXRlZ3knKTtcclxuICAgIHNlbGYuc2V0U3RyYXRlZ3lXcmFwcGVyID0gJCgnLnNldC1zdHJhdGVneScpO1xyXG4gICAgc2VsZi5zZXRSaXNrV3JhcHBlciA9ICQoJy5zZXQtcmlzay1zdHJhdGVneScpO1xyXG5cclxufTtcclxuXHJcblJvYm90LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyBzZWxmLmluaXRZc3RlcEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkNsaWNrUm9ib3RFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DbG9zZVJvYm90RXZlbnQoKTtcclxuICAgIHNlbGYubG9hZHN0ZXBFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5UcmFkaW5nUm9ib3RFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DcmVhdFRyYWRpbmdFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5wYXJhbWV0ZXJFdmVuKCk7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdFJvYm90KCk7XHJcbiAgICBzZWxmLnJ1blJvYm90RXZlbnQoKTtcclxuICAgIHNlbGYucHJvdGVjdFJlbGlldmUoKTtcclxuICAgIHNlbGYuZ2V0QWNjb3VudEluZm9FdmVudCgpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5DbGlja1N0cmFnZXJ0eSgpO1xyXG4gICAgLy8gc2VsZi5nZXRBY2NvdW50SW5mb0V2ZW50KCk7XHJcblxyXG59O1xyXG5cclxuUm9ib3QucHJvdG90eXBlLmluaXRZc3RlcEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy/moLnmja5qUXVlcnnpgInmi6nlmajmib7liLDpnIDopoHliqDovb15c3RlcOeahOWuueWZqFxyXG4vL2xvYWRTdGVwIOaWueazleWPr+S7peWIneWni+WMlnlzdGVwXHJcblxyXG4gICAgJChcIi55c3RlcFwiKS5zZXRTdGVwKDEpO1xyXG5cclxufTtcclxuUm9ib3QucHJvdG90eXBlLmxvYWRzdGVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiLnlzdGVwXCIpLmxvYWRTdGVwKHtcclxuICAgICAgICBzaXplOiBcImxhcmdlXCIsXHJcbiAgICAgICAgY29sb3I6IFwiZ3JlZW5cIixcclxuICAgICAgICBzdGVwczogW3tcclxuICAgICAgICAgICAgdGl0bGU6IFwi6YCJ5oup5Lqk5piT5a+5XCIsXHJcblxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgdGl0bGU6IFwi6YCJ5oup5Lqk5piT562W55WlXCIsXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICB0aXRsZTogXCLorr7nva7nrZbnlaXlj4LmlbBcIixcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIuiuvue9rumjjumZqeetlueVpVwiLFxyXG4gICAgICAgIH0sXVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblJvYm90LnByb3RvdHlwZS5saXN0ZW5DbGlja1JvYm90RWFhYXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciBidG5QcmUgPSAkKFwiI2J0blByZVwiKVxyXG4gICAgdmFyIGJ0bk5leHQgPSAkKFwiI2J0bk5leHRcIilcclxuICAgIHZhciByb2JvdERhdGFBcnJheSA9IG5ldyBBcnJheShzZWxmLnRyYWRpbmdPbldyYXBwZXIsIHNlbGYudHJhZGluZ1N0cmF0ZWd5V3JhcHBlciwgc2VsZi5zZXRTdHJhdGVneVdyYXBwZXIsIHNlbGYuc2V0Umlza1dyYXBwZXIpXHJcbiAgICB2YXIgYXJyYXlMZW5ndGggPSByb2JvdERhdGFBcnJheS5sZW5ndGhcclxuICAgIHZhciBudW0gPSAwO1xyXG4gICAgdmFyIGNyZWF0cm9ib3RjbGljayA9IDBcclxuICAgIC8vIGNvbnNvbGUubG9nKGFycmF5TGVuZ3RoKVxyXG4gICAgLy8gaWYgKGFycmF5TGVuZ3RoIDw9IDEpXHJcbiAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgJCgnI2NyZWF0ZS1yb2JvdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoY3JlYXRyb2JvdGNsaWNrID09IDApIHtcclxuICAgICAgICAgICAgc2VsZi5yb2JvdFdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgICAgICByb2JvdERhdGFBcnJheVtudW1dLnNob3coKVxyXG4gICAgICAgICAgICBjcmVhdHJvYm90Y2xpY2srK1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNyZWF0cm9ib3RjbGljaylcclxuICAgICAgICAgICAgc2VsZi5yb2JvdFdyYXBwZXIuc2hvdygpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiI2J0blByZVwiKS51bmJpbmQoKTtcclxuICAgICAgICBidG5QcmUuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbnVtJylcclxuICAgICAgICAgICAgaWYgKG51bSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgLy8gbGlbbnVtXS5zaG93KCkuc2libGluZygpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG51bS0tO1xyXG4gICAgICAgICAgICAgICAgJCgnI2J0bk5leHQnKS50ZXh0KCfkuIvkuIDmraUnKVxyXG4gICAgICAgICAgICAgICAgLy8gbGlbbnVtXS5zaG93KCkuc2libGluZygpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/ot7PovazliLDkuIrkuIDkuKrmraXpqqRcclxuICAgICAgICAgICAgJChcIi55c3RlcFwiKS5wcmV2U3RlcCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbCcsIHJvYm90RGF0YUFycmF5KVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvYm90RGF0YUFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG51bSA9PT0gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvYm90RGF0YUFycmF5W2ldLnNob3coKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByb2JvdERhdGFBcnJheVtpXS5oaWRlKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIjYnRuTmV4dFwiKS51bmJpbmQoKTtcclxuICAgICAgICBidG5OZXh0LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb25DdXJyZW5jeSA9ICQoJyNjdXJyeScpLmZpbmQoXCIgb3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKTsvL+S6pOaYk+W4geenjVxyXG4gICAgICAgICAgICB2YXIgbWFya2V0dGl0bGUgPSAkKCcjbWFya2V0JykuZmluZChcIiBvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpOy8v5Lqk5piT5biC5Zy6XHJcbiAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzY29udHJvbCA9ICQoJy5wYXJhbWV0ZXJzLWNvbnRyb2wnKS5maW5kKFwiIG9wdGlvbjpzZWxlY3RlZFwiKS50ZXh0KCkvL+S6pOaYk+i0puaIt1xyXG4gICAgICAgICAgICB2YXIgcmVzaXN0YW5jZXZhbHVlID0gJCgnLnN0cmF0ZWd5LXBhcmFtZXRlcnMgLnRyYWRpbmctcGFyYW1ldGVycyAucmVzaXN0YW5jZS12YWx1ZScpLnZhbCgpLy/pmLvlipvlgLxcclxuICAgICAgICAgICAgdmFyIHN1cHBvcnQgPSAkKCcuc3RyYXRlZ3ktcGFyYW1ldGVycyAudHJhZGluZy1wYXJhbWV0ZXJzIC5zdXBwb3J0JykudmFsKCkvL+aUr+aSkeS9jVxyXG4gICAgICAgICAgICB2YXIgZ3JpZG51bWJlciA9ICQoJy5zdHJhdGVneS1wYXJhbWV0ZXJzIC50cmFkaW5nLXBhcmFtZXRlcnMgLmdyaWQtbnVtYmVyJykudmFsKCkvL+e9keagvOaVsOmHj1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCfor7fpgInmi6nkuqTmmJPluIHnp40v5Lqk5piT5biC5Zy6JylcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IHRyYW5zYWN0aW9uQ3VycmVuY3kgKyAnLycgKyBtYXJrZXR0aXRsZVxyXG4gICAgICAgICAgICAkKCcudHJhZGluZy1zdHJhdGVneSAuc3RyYXRlZ3ktY3VycnkgLmN1cnJ5JykudGV4dCh0ZXh0KTtcclxuICAgICAgICAgICAgJCgnLnNldC1zdHJhdGVneSAuc3RyYXRlZ3ktY3VycnkgLmN1cnJ5JykudGV4dCh0ZXh0KTtcclxuICAgICAgICAgICAgJCgnLnNldC1yaXNrLXN0cmF0ZWd5IC5zdHJhdGVneS1jdXJyeSAuY3VycnknKS50ZXh0KHRleHQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICQoJy5zZXQtc3RyYXRlZ3ktdGl0bGUgLnN0cmF0ZWd5LXBhcmFtZXRlcnMtdG9wIC51c2VyJykudGV4dChwYXJhbWV0ZXJzY29udHJvbClcclxuXHJcbiAgICAgICAgICAgICQoJy5zZXQtcmlzay1zdHJhdGVneSAuc2V0LXN0cmF0ZWd5LXRpdGxlIC5yZXNpc3RhbmNlJykudGV4dChyZXNpc3RhbmNldmFsdWUpXHJcbiAgICAgICAgICAgICQoJy5zZXQtcmlzay1zdHJhdGVneSAuc2V0LXN0cmF0ZWd5LXRpdGxlIC5zdXBwb3J0LWxldmVsJykudGV4dChzdXBwb3J0KVxyXG4gICAgICAgICAgICAkKCcuc2V0LXJpc2stc3RyYXRlZ3kgLnNldC1zdHJhdGVneS10aXRsZSAuZ2lyZGluZy1udW0nKS50ZXh0KGdyaWRudW1iZXIpXHJcblxyXG4gICAgICAgICAgICAvLyAkKCcudHJhZGluZy1zdHJhdGVneSAuc3RyYXRlZ3ktY3VycnkgLmN1cnJ5MScpLnRleHQobWFya2V0dGl0bGUpXHJcblxyXG4gICAgICAgICAgICB2YXIgc3RyYXRlZ3l0aXRsZSA9ICfnvZHmoLzkuqTmmJN2MS4wJ1xyXG4gICAgICAgICAgICAkKCcuc3RyYXRlZ3ktbmFtZSAuc3RyYXRlZ3ktYnV0dG9uIGJ1dHRvbicpLnVuYmluZCgpO1xyXG4gICAgICAgICAgICAkKCcuc3RyYXRlZ3ktbmFtZSAuc3RyYXRlZ3ktYnV0dG9uIGJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cmF0ZWd5dGl0bGUgPSAkKHRoaXMpLnRleHQoKTsvL+S6pOaYk+etlueVpVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RyYXRlZ3l0aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2V0LXN0cmF0ZWd5IC5zdHJhdGVneS10aXRsZSAuc3RyYXRlZ3knKS50ZXh0KHN0cmF0ZWd5dGl0bGUpXHJcbiAgICAgICAgICAgICAgICAkKCcuc2V0LXJpc2stc3RyYXRlZ3kgLnN0cmF0ZWd5LXRpdGxlIC5jdXJyeScpLnRleHQoc3RyYXRlZ3l0aXRsZSlcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vICQoJy5zZXQtc3RyYXRlZ3kgLnN0cmF0ZWd5LWN1cnJ5IC5jdXJyeScpLnRleHQodHJhbnNhY3Rpb25DdXJyZW5jeSlcclxuICAgICAgICAgICAgLy8gJCgnLnNldC1zdHJhdGVneSAuc3RyYXRlZ3ktY3VycnkgLmN1cnJ5MScpLnRleHQobWFya2V0dGl0bGUpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCduZXh0JylcclxuICAgICAgICAgICAgaWYgKG51bSA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjYnRuTmV4dCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJyNidG5Db21wbGV0ZScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIG51bSA9IDM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBudW0rKztcclxuICAgICAgICAgICAgICAgICQoJyNidG5OZXh0JykudGV4dCgn5LiL5LiA5q2lJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+i3s+i9rOWIsOS4i+S4gOS4quatpemqpFxyXG5cclxuICAgICAgICAgICAgLy8gdmFyIHN0ZXBOdW0gPSAkKFwiLnlzdGVwXCIpLmdldFN0ZXAoKTtcclxuICAgICAgICAgICAgLy8gcm9ib3REYXRhQXJyYXlbc3RlcE51bSsxXS5zaG93KClcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RlcE51bSlcclxuXHJcbiAgICAgICAgICAgIC8vICBpZiAodHJhbnNhY3Rpb25DdXJyZW5jeT09Jy0tLeivt+mAieaLqS0tLScgKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyh0cmFuc2FjdGlvbkN1cnJlbmN5KVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGFsZXJ0KCfor7fpgInmi6nkuqTmmJPluIHnp40v5Lqk5piT5biC5Zy6JylcclxuICAgICAgICAgICAgLy8gICAgICAgICAgbnVtPTA7XHJcbiAgICAgICAgICAgIC8vIH1lbHNle1xyXG4gICAgICAgICAgICAkKFwiLnlzdGVwXCIpLm5leHRTdGVwKCk7XHJcbiAgICAgICAgICAgIC8vICB9XHJcblxyXG5cclxuICAgICAgICAgICAgJC5lYWNoKHJvYm90RGF0YUFycmF5LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuc2hvdygpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcud2FybmluZ3VzZXIgbGFiZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2J0bi1zdWNjZXNzJylcclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pXHJcblxyXG5cclxufVxyXG5cclxuXHJcblJvYm90LnByb3RvdHlwZS5saXN0ZW5DbGlja1JvYm90RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciBidG5QcmUgPSAkKFwiI2J0blByZVwiKVxyXG4gICAgdmFyIGJ0bk5leHQgPSAkKFwiI2J0bk5leHRcIilcclxuICAgIHZhciByb2JvdERhdGFBcnJheSA9IG5ldyBBcnJheShzZWxmLnRyYWRpbmdPbldyYXBwZXIsIHNlbGYudHJhZGluZ1N0cmF0ZWd5V3JhcHBlciwgc2VsZi5zZXRTdHJhdGVneVdyYXBwZXIsIHNlbGYuc2V0Umlza1dyYXBwZXIpXHJcbiAgICB2YXIgbnVtID0gMDtcclxuICAgIHZhciBjcmVhdHJvYm90Y2xpY2sgPSAwXHJcbiAgICAkKCcjY3JlYXRlLXJvYm90Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChjcmVhdHJvYm90Y2xpY2sgPT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLnJvYm90V3JhcHBlci5zaG93KCk7XHJcbiAgICAgICAgICAgIHJvYm90RGF0YUFycmF5W251bV0uc2hvdygpXHJcbiAgICAgICAgICAgIGNyZWF0cm9ib3RjbGljaysrXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY3JlYXRyb2JvdGNsaWNrKVxyXG4gICAgICAgICAgICBzZWxmLnJvYm90V3JhcHBlci5zaG93KClcclxuICAgICAgICB9XHJcbiAgICAgICAgJChcIiNidG5QcmVcIikudW5iaW5kKCk7XHJcbiAgICAgICAgYnRuUHJlLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ251bScpXHJcbiAgICAgICAgICAgIGlmIChudW0gPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgbnVtID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG51bS0tO1xyXG4gICAgICAgICAgICAgICAgJCgnI2J0bk5leHQnKS5zaG93KCkudGV4dCgn5LiL5LiA5q2lJylcclxuICAgICAgICAgICAgICAgICQoJyNidG5Db21wbGV0ZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+i3s+i9rOWIsOS4iuS4gOS4quatpemqpFxyXG4gICAgICAgICAgICAkKFwiLnlzdGVwXCIpLnByZXZTdGVwKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2YWwnLCByb2JvdERhdGFBcnJheSlcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb2JvdERhdGFBcnJheS5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChudW0gPT09IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICByb2JvdERhdGFBcnJheVtpXS5zaG93KClcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9ib3REYXRhQXJyYXlbaV0uaGlkZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIiNidG5OZXh0XCIpLnVuYmluZCgpO1xyXG4gICAgICAgIGJ0bk5leHQuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbkN1cnJlbmN5ID0gJCgnI2N1cnJ5JykuZmluZChcIiBvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpOy8v5Lqk5piT5biB56eNXHJcbiAgICAgICAgICAgIHZhciBtYXJrZXR0aXRsZSA9ICQoJyNtYXJrZXQnKS5maW5kKFwiIG9wdGlvbjpzZWxlY3RlZFwiKS50ZXh0KCk7Ly/kuqTmmJPluILlnLpcclxuICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnNjb250cm9sID0gJCgnLnBhcmFtZXRlcnMtY29udHJvbCcpLmZpbmQoXCIgb3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKS8v5Lqk5piT6LSm5oi3XHJcbiAgICAgICAgICAgIHZhciByZXNpc3RhbmNldmFsdWUgPSAkKCcuc3RyYXRlZ3ktcGFyYW1ldGVycyAudHJhZGluZy1wYXJhbWV0ZXJzIC5yZXNpc3RhbmNlLXZhbHVlJykudmFsKCkvL+mYu+WKm+WAvFxyXG4gICAgICAgICAgICB2YXIgc3VwcG9ydCA9ICQoJy5zdHJhdGVneS1wYXJhbWV0ZXJzIC50cmFkaW5nLXBhcmFtZXRlcnMgLnN1cHBvcnQnKS52YWwoKS8v5pSv5pKR5L2NXHJcbiAgICAgICAgICAgIHZhciBncmlkbnVtYmVyID0gJCgnLnN0cmF0ZWd5LXBhcmFtZXRlcnMgLnRyYWRpbmctcGFyYW1ldGVycyAuZ3JpZC1udW1iZXInKS52YWwoKS8v572R5qC85pWw6YePXHJcblxyXG4gICAgICAgICAgICAvLyBhbGVydCgn6K+36YCJ5oup5Lqk5piT5biB56eNL+S6pOaYk+W4guWcuicpXHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gdHJhbnNhY3Rpb25DdXJyZW5jeSArICcvJyArIG1hcmtldHRpdGxlXHJcbiAgICAgICAgICAgICQoJy50cmFkaW5nLXN0cmF0ZWd5IC5zdHJhdGVneS1jdXJyeSAuY3VycnknKS50ZXh0KHRleHQpO1xyXG4gICAgICAgICAgICAkKCcuc2V0LXN0cmF0ZWd5IC5zdHJhdGVneS1jdXJyeSAuY3VycnknKS50ZXh0KHRleHQpO1xyXG4gICAgICAgICAgICAkKCcuc2V0LXJpc2stc3RyYXRlZ3kgLnN0cmF0ZWd5LWN1cnJ5IC5jdXJyeScpLnRleHQodGV4dCk7XHJcblxyXG4gICAgICAgICAgICAkKCcuc2V0LXN0cmF0ZWd5LXRpdGxlIC5zdHJhdGVneS1wYXJhbWV0ZXJzLXRvcCAudXNlcicpLnRleHQocGFyYW1ldGVyc2NvbnRyb2wpXHJcblxyXG4gICAgICAgICAgICAkKCcuc2V0LXJpc2stc3RyYXRlZ3kgLnNldC1zdHJhdGVneS10aXRsZSAucmVzaXN0YW5jZScpLnRleHQocmVzaXN0YW5jZXZhbHVlKVxyXG4gICAgICAgICAgICAkKCcuc2V0LXJpc2stc3RyYXRlZ3kgLnNldC1zdHJhdGVneS10aXRsZSAuc3VwcG9ydC1sZXZlbCcpLnRleHQoc3VwcG9ydClcclxuICAgICAgICAgICAgJCgnLnNldC1yaXNrLXN0cmF0ZWd5IC5zZXQtc3RyYXRlZ3ktdGl0bGUgLmdpcmRpbmctbnVtJykudGV4dChncmlkbnVtYmVyKVxyXG5cclxuICAgICAgICAgICAgLy8gJCgnLnRyYWRpbmctc3RyYXRlZ3kgLnN0cmF0ZWd5LWN1cnJ5IC5jdXJyeTEnKS50ZXh0KG1hcmtldHRpdGxlKVxyXG5cclxuICAgICAgICAgICAgdmFyIHN0cmF0ZWd5dGl0bGUgPSAn572R5qC85Lqk5piTdjEuMCdcclxuICAgICAgICAgICAgJCgnLnN0cmF0ZWd5LW5hbWUgLnN0cmF0ZWd5LWJ1dHRvbiBidXR0b24nKS51bmJpbmQoKTtcclxuICAgICAgICAgICAgJCgnLnN0cmF0ZWd5LW5hbWUgLnN0cmF0ZWd5LWJ1dHRvbiBidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHJhdGVneXRpdGxlID0gJCh0aGlzKS50ZXh0KCk7Ly/kuqTmmJPnrZbnlaVcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cmF0ZWd5dGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNldC1zdHJhdGVneSAuc3RyYXRlZ3ktdGl0bGUgLnN0cmF0ZWd5JykudGV4dChzdHJhdGVneXRpdGxlKVxyXG4gICAgICAgICAgICAgICAgJCgnLnNldC1yaXNrLXN0cmF0ZWd5IC5zdHJhdGVneS10aXRsZSAuY3VycnknKS50ZXh0KHN0cmF0ZWd5dGl0bGUpXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBpZiAobnVtID49IDIpIHtcclxuICAgICAgICAgICAgICAgICQoJyNidG5OZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2J0bkNvbXBsZXRlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgbnVtID0gMztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG51bSsrO1xyXG4gICAgICAgICAgICAgICAgJCgnI2J0bk5leHQnKS50ZXh0KCfkuIvkuIDmraUnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v6Lez6L2s5Yiw5LiL5LiA5Liq5q2l6aqkXHJcblxyXG4gICAgICAgICAgICAkKFwiLnlzdGVwXCIpLm5leHRTdGVwKCk7XHJcbiAgICAgICAgICAgICQuZWFjaChyb2JvdERhdGFBcnJheSwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudW0gPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnNob3coKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5oaWRlKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLndhcm5pbmd1c2VyIGxhYmVsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdidG4tc3VjY2VzcycpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5Sb2JvdC5wcm90b3R5cGUubGlzdGVuQ2xvc2VSb2JvdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgdmFyIHJvYm90V3JhcHBlciA9ICQoJy5yb2JvdC13cmFwcGVyJyk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcm9ib3RXcmFwcGVyLmhpZGUoKTtcclxuXHJcblxyXG4gICAgfSlcclxufTtcclxuUm9ib3QucHJvdG90eXBlLmxpc3RlbkNyZWF0VHJhZGluZ0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnJvYm90LWRldGFpbHMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnRyYWRpbmdQYXJ0aWN1bGFycycpLnNob3coKTtcclxuICAgICAgICAkKCcudHJhZGluZ1NoYWRlJykuc2hvdygpO1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciByb2JvdF9pZCA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3Nob3d0cmFkZWRldGFpbC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdyb2JvdF9pZCc6IHJvYm90X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5Sb2JvdC5wcm90b3R5cGUubGlzdGVuVHJhZGluZ1JvYm90RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdHJhZGluZ2Nsb3NlYnRuID0gJCgnLnRyYWRpbmctY2xvc2UtYnRuJyk7XHJcbiAgICB2YXIgdHJhZGluZ1BhcnRpY3VsYXJzID0gJCgnLnRyYWRpbmdQYXJ0aWN1bGFycycpO1xyXG4gICAgdmFyIHRyYWRpbmdTaGFkZSA9ICQoJy50cmFkaW5nU2hhZGUnKVxyXG4gICAgdmFyIHRyYWRpbmdsb2FkaW5nID0gJCgnLnRyYWRpbmctbG9hZGluZycpXHJcbiAgICB2YXIgdHJhZGluZ2VuZGluZyA9ICQoJy50cmFkaW5nLWVuZGluZycpXHJcbiAgICB2YXIgdHJhZGluZ2NvbnRhaW5lciA9ICQoJy50cmFkaW5nLWNvbnRhaW5lcicpXHJcbiAgICB2YXIgdHJhZGluZ2VuZGluZ3RhYmxlID0gJCgnLnRyYWRpbmctZW5kaW5nLXRhYmxlJylcclxuICAgIHRyYWRpbmdjbG9zZWJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJhZGluZ1BhcnRpY3VsYXJzLmhpZGUoKTtcclxuICAgICAgICB0cmFkaW5nU2hhZGUuaGlkZSgpO1xyXG4gICAgfSlcclxuICAgIHRyYWRpbmdlbmRpbmcuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB0cmFkaW5nY29udGFpbmVyLmhpZGUoKTtcclxuICAgICAgICB0cmFkaW5nZW5kaW5ndGFibGUuc2hvdygpO1xyXG4gICAgICAgIHRyYWRpbmdsb2FkaW5nLnRvZ2dsZUNsYXNzKCdncmVlbicpXHJcbiAgICAgICAgdHJhZGluZ2VuZGluZy50b2dnbGVDbGFzcygnZ3JlZW4nKVxyXG5cclxuICAgIH0pXHJcbiAgICB0cmFkaW5nbG9hZGluZy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJhZGluZ2NvbnRhaW5lci5zaG93KCk7XHJcbiAgICAgICAgdHJhZGluZ2VuZGluZ3RhYmxlLmhpZGUoKTtcclxuICAgICAgICB0cmFkaW5nZW5kaW5nLnRvZ2dsZUNsYXNzKCdncmVlbicpXHJcbiAgICAgICAgdHJhZGluZ2xvYWRpbmcudG9nZ2xlQ2xhc3MoJ2dyZWVuJylcclxuICAgIH0pXHJcblxyXG59XHJcblJvYm90LnByb3RvdHlwZS5saXN0ZW5wYXJhbWV0ZXJFdmVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHBhcmFtZXRlcmNvbmZpZ3VyYXRpb24gPSAkKCcucGFyYW1ldGVyLWNvbmZpZ3VyYXRpb24nKTtcclxuICAgIHZhciBwYXJhbWV0ZXJjbG9zZWJ0biA9ICQoJy5wYXJhbWV0ZXItY2xvc2UtYnRuJyk7XHJcbiAgICB2YXIgZGVsZXRlcHJvcGVydHkgPSAkKCcuYWxsb2NhdGlvbicpO1xyXG4gICAgdmFyIHRyYWRpbmdTaGFkZSA9ICQoJy50cmFkaW5nU2hhZGUnKVxyXG4gICAgZGVsZXRlcHJvcGVydHkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBhcmFtZXRlcmNvbmZpZ3VyYXRpb24uc2hvdygpO1xyXG4gICAgICAgIHRyYWRpbmdTaGFkZS5zaG93KCk7XHJcblxyXG4gICAgfSlcclxuICAgIHBhcmFtZXRlcmNsb3NlYnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBwYXJhbWV0ZXJjb25maWd1cmF0aW9uLmhpZGUoKTtcclxuICAgICAgICB0cmFkaW5nU2hhZGUuaGlkZSgpO1xyXG4gICAgfSlcclxufVxyXG5cclxuLy/ojrflj5botKbmiLfkv6Hmga9cclxuUm9ib3QucHJvdG90eXBlLmdldEFjY291bnRJbmZvRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyB2YXIgcGFyYW50ZXJzR3JvdXAgPSAkKCcuc3RyYXRlZ3ktcGFyYW1ldGVycycpXHJcbiAgICAvLyBpZCA9IHBhcmFudGVyc0dyb3VwLmZpbmQoXCJzZWxlY3RbJ25hbWU9J2FjY291bnQnXVwiKS52YWwoKVxyXG4gICAgY29uc29sZS5sb2coXCJzZnNmc2ZzZGZcIilcclxuICAgIC8vIGNvbnNvbGUubG9nKGlkKVxyXG4gICAgJCgnI3JvYm90LWFjY291bnQnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZGFpaWxlXCIpXHJcbiAgICAgICAgdmFyIHBhcmFudGVyc0dyb3VwID0gJCgnLnNldC1zdHJhdGVneScpXHJcbiAgICAgICAgdmFyIGN1cnJlbmN5ID0gcGFyYW50ZXJzR3JvdXAuZmluZCgnLnN0cmF0ZWd5LWN1cnJ5IC5jdXJyeScpLnRleHQoKVxyXG4gICAgICAgIHZhciBzdHJyID0gY3VycmVuY3kuc3BsaXQoJy8nKVxyXG4gICAgICAgIHZhciBjdXJyeSA9IHN0cnJbMF1cclxuICAgICAgICB2YXIgbWFya2V0ID0gc3RyclsxXVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJ5LCBtYXJrZXQpXHJcbiAgICAgICAgdmFyIGlkID0gJCgnI3JvYm90LWFjY291bnQnKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coaWQpXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9nZXRhY2NvdW50aW5mby8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ2N1cnJ5LXRpdGxlJzpjdXJyeSxcclxuICAgICAgICAgICAgICAgICdtYXJrZXQtdGl0bGUnOm1hcmtldCxcclxuICAgICAgICAgICAgICAgICdhY2NvdW50X2lkJzppZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNpc3RhbmNlID0gZGF0YVsncmVzaXN0YW5jZSddXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1cHBvcnRfbGV2ZWwgPSBkYXRhWydzdXBwb3J0X2xldmVsJ11cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNpc3RhbmNlLHN1cHBvcnRfbGV2ZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlc2lzdGFuY2UtdmFsdWUnKS50ZXh0KHJlc2lzdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnN1cHBvcnQtdmFsdWUnKS50ZXh0KHN1cHBvcnRfbGV2ZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3N0cmF0ZXJ5LWdpcmRpbmctbnVtJykub24oJ2JsdXInLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoISQoJyNzdHJhdGVyeS1naXJkaW5nLW51bScpLnZhbCgpID09ICcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW0gPSAkKCcjc3RyYXRlcnktZ2lyZGluZy1udW0gJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnaXJkaW5nID0gKHJlc2lzdGFuY2Utc3VwcG9ydF9sZXZlbCkvbnVtICAgICAvL+WNlee9keagvD3vvIjpmLvlipvkvY3ku7fmoLwt5pSv5pKR5L2N5Lu35qC877yJL+e9keagvOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobnVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI29uZS1naXJkaW5nLWZyZWUnKS5vbignYmx1cicsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighJCgnI29uZS1naXJkaW5nLWZyZWUnKS52YWwoKSA9PSAnJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJlZSA9ICQoJyNvbmUtZ2lyZGluZy1mcmVlJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZyZWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KVxyXG5cclxuXHJcbn1cclxuXHJcblxyXG5Sb2JvdC5wcm90b3R5cGUubGlzdGVuQ2xpY2tTdHJhZ2VydHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYnRuTGlzdCA9ICQoJy5kZWFsLXN0cmF0ZWd5JylcclxuICAgIGJ0bkxpc3QuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgYnRuID0gJChlbGVtZW50KVxyXG4gICAgICAgIGJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJ0bi5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuUm9ib3QucHJvdG90eXBlLmxpc3RlblN1Ym1pdFJvYm90ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJ0bkNvbXBsZXRlID0gJCgnI2J0bkNvbXBsZXRlICcpXHJcbiAgICAvL+iOt+WPluS6pOaYk+WvueaVsOaNrlxyXG4gICAgYnRuQ29tcGxldGUuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZGFmYXNkZlwiKVxyXG4gICAgICAgIHZhciByb2JvdEdyb3VwID0gJCgnLnNldC1yaXNrLXN0cmF0ZWd5JylcclxuICAgICAgICB2YXIgY3VycnkgPSByb2JvdEdyb3VwLmZpbmQoJy5zdHJhdGVneS1jdXJyeSAuY3VycnknKS50ZXh0KCkgICAgICAgIC8v5Lqk5piT5a+5XHJcbiAgICAgICAgdmFyIHN0cnIgPSBjdXJyeS5zcGxpdCgnLycpXHJcbiAgICAgICAgdmFyIGN1cnJlbnkgPSBzdHJyWzBdXHJcbiAgICAgICAgdmFyIG1hcmtldCA9IHN0cnJbMV1cclxuICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW55KVxyXG4gICAgICAgIGNvbnNvbGUubG9nKG1hcmtldClcclxuICAgICAgICB2YXIgYWNjb3VudCA9IHJvYm90R3JvdXAuZmluZCgnLnN0cmF0ZWd5LXBhcmFtZXRlcnMtdG9wIC51c2VyXCInKS50ZXh0KCkgLy/kuqTmmJPotKbmiLdcclxuICAgICAgICB2YXIgc3RyYXRlZ3kgPSByb2JvdEdyb3VwLmZpbmQoJy5zdHJhdGVneS12YWx1ZScpLnRleHQoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHN0cmF0ZWd5KS8v5Lqk5piT562W55WlXHJcbiAgICAgICAgdmFyIHJlc2lzdGFuY2UgPSByb2JvdEdyb3VwLmZpbmQoJy5yZXNpc3RhbmNlLXZhbHVlJykudGV4dCgpIC8v6Zi75Yqb5L2NXHJcbiAgICAgICAgdmFyIHN1cHBvcnQgPSByb2JvdEdyb3VwLmZpbmQoJy5zdXBwb3J0LXZhbHVlJykudGV4dCgpXHJcbiAgICAgICAgdmFyIGdpcmRpbmdfbnVtID0gcm9ib3RHcm91cC5maW5kKCcuZ2lyZGluZy12YWx1ZScpLnRleHQoKVxyXG4gICAgICAgIHZhciBmcmVlID0gcm9ib3RHcm91cC5maW5kKCcuZGVhbC1hY2NvdW50LWZyZWUnKS50ZXh0KClcclxuICAgICAgICB2YXIgZ2lyZGluZ19wcm9maXQgPSByb2JvdEdyb3VwLmZpbmQoJy5naXJkaW5nLXByb2ZpdC12YWx1ZScpLnRleHQoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZGlhcWxlXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2coc3RyYXRlZ3ksIGFjY291bnQsIHJlc2lzdGFuY2UsIHN1cHBvcnQsIGdpcmRpbmdfbnVtLCBmcmVlLCBnaXJkaW5nX3Byb2ZpdClcclxuXHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuUm9ib3QucHJvdG90eXBlLnJ1blJvYm90RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcm9ib3RCbnQgPSAkKCcjcnVuLXJvYm90JylcclxuICAgIHJvYm90Qm50LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcm9ib3QgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgdmFyIHJvYm90X2lkID0gW11cclxuICAgICAgICByb2JvdF9pZC5wdXNoKHJvYm90KVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHJvYm90X2lkKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvc3RhcnRyb2JvdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdyb2JvdF9pZCc6IHJvYm90X2lkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0cmFkaXRpb25hbDogdHJ1ZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcblJvYm90LnByb3RvdHlwZS5wcm90ZWN0UmVsaWV2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5wcm90ZWN0LXJlbGlldmUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsYWcgPSAkKHRoaXMpLnRleHQoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGZsYWcpXHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSAkKHRoaXMpLnNpYmxpbmdzKClcclxuICAgICAgICB2YXIgcnVuZmxnID0gJChlbGVtZW50WzBdKS50ZXh0KClcclxuICAgICAgICBpZiAocnVuZmxnID09PSAn6L+Q6KGMJyB8fCBydW5mbGcgPT09ICfov5DooYwo5L+d5oqkKScpIHtcclxuICAgICAgICAgICAgdmFyIGZsZ190ZXh0ID0gJ+i/kOihjCdcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJ1bmZsZyA9PT0gJ+WBnOatoicgfHwgcnVuZmxnID09PSAn5YGc5q2iKOS/neaKpCknKSB7XHJcbiAgICAgICAgICAgIHZhciBmbGdfdGV4dCA9ICflgZzmraInXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmbGFnID09PSAn5L+d5oqkJykge1xyXG4gICAgICAgICAgICB2YXIgbmV3X3ZhbHVlID0gcnVuZmxnICsgJygnICsgZmxhZyArICcpJ1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdfdmFsdWUpXHJcbiAgICAgICAgICAgICQoZWxlbWVudFswXSkudGV4dChuZXdfdmFsdWUpXHJcbiAgICAgICAgICAgICQodGhpcykudGV4dCgn6Kej6ZmkJylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnRbMF0pLnRleHQoZmxnX3RleHQpXHJcbiAgICAgICAgICAgICQodGhpcykudGV4dCgn5L+d5oqkJylcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcm9ib3QgPSBuZXcgUm9ib3QoKTtcclxuICAgIHJvYm90LnJ1bigpO1xyXG5cclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
