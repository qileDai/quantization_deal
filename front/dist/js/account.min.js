function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper"),t.carryWrapper=$(".account-carry-curry-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount(),t.listendenominationEvent(),t.listtencuyyencyShow(),t.showCollectAsset(),t.showDetailProperty(),t.refershAccountEvent(),t.accountCuurrencyEvent(),t.addAccountCurrencyEvent()},Account.prototype.showDetailProperty=function(){var c=this;$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");$("#add-account-pk").attr("account-pk",t),console.log(t),c.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){account=t.data,console.log(account);var c=$(".account-body");platform=account.platform.Platform_name,id=account.platform.id,console.log(platform),title=account.title,accesskey=account.accesskey,secretkey=account.secretkey,$("#platform option[value="+id+"]").prop("selected",!0),c.find("input[name='account-name']").val(title),c.find("input[name='access']").val(accesskey),c.find("input[name='scrent']").val(secretkey)}}})})},Account.prototype.listenShowHideAddAccount=function(){var t=this,c=$(".close-btn");$("#add-account-btn").click(function(){t.accountWrapper.show()}),c.click(function(){console.log("sssfsdf"),t.accountWrapper.hide(),window.location.reload()}),$(".cancel").click(function(){t.accountWrapper.hide(),window.location.reload()})},Account.prototype.listendenominationEvent=function(){var o=this.accountCuurrencyEvent();console.log(o),$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show();var c=[];$(".currency-checkbox").click(function(){var t=$(this).parent().text();console.log(t),c.push(t),$("#currency-add-btn").click(function(){xfzajax.post({url:"/deal/configcurrency/",data:{currency:c,account_list:o},success:function(t){200===t.code&&xfzalert.alertSuccess("新增币种成功",function(){window.location.reload()})}})})})}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()}),$(".cancel").click(function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,c=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),c.click(function(){t.totalProperty.hide()}),$(".cancel").click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var c=this,t=$(".close-btn");$(".add-property").click(function(){c.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.chargeAccountEvent(t)}),t.click(function(){c.curryWrapper.hide()}),$(".cancel").click(function(){c.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide(),window.location.reload()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var c=this,t=$(".close-btn");$(".check-property").on("click",function(){c.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");$(".refersh").attr("property-id",t),xfzajax.post({url:"/deal/showassert/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){datas=t.data;var c=t.data;console.log(c);var o=datas.Platform_name;$(".property-account-value").text(o);var n=template("property-details",{properties:c});$("#property-details-ids").append(n)}}})}),t.click(function(){c.detailsProperty.hide()}),$(".cancel").click(function(){c.detailsProperty.hide()})},Account.prototype.showCollectAsset=function(){var t=this.accountCuurrencyEvent();console.log(t),$("#property-total").click(function(){xfzajax.post({url:"/deal/showcollectasset/",data:{account_list:t},success:function(t){console.log(t)}})})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(c){$(".confirm").on("click",function(){var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val(),xfzajax.post({url:"/deal/editaccount/",data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(t){$(".confirm").click(function(){var c=$(this).attr("account-pk");console.log(c);var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val();var o="";o=c?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:o,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&(c?xfzalert.alertSuccess("编辑账户成功！",function(){window.location.reload()}):xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()}))}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},Account.prototype.listtencuyyencyShow=function(){var c=this,t=$(".close-btn");$(".mention-money").click(function(){c.carryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.listenWithDraw(t)}),t.click(function(){c.carryWrapper.hide()}),$(".cancel").click(function(){c.carryWrapper.hide()})},Account.prototype.listenWithDraw=function(t){var c=$(".carry-confirm");console.log(t),c.click(function(){num=$("#carry-currency-number").val(),currency=$("#carry-currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/withdraw/",data:{num:num,currency:currency,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("提币成功",function(){window.location.reload()})}})})},Account.prototype.refershAccountEvent=function(){var t=this;$("#details-refersh").click(function(){console.log("ssdfas"),t.detailsProperty.hide(),setTimeout(function(){t.detailsProperty.show()},100),pk=$(this).attr("property-id")})},Account.prototype.accountCuurrencyEvent=function(){return $(".account-chcekbox").click(function(){$(this).prop("checked",!0)}),[]},Account.prototype.addAccountCurrencyEvent=function(){console.log("asldfaljf"),$("#add-currency-btn").click(function(){var t=$("#add-new-currency").val();console.log("scudf"),$(".currency-check-content").append(' <div class="checkbox">\n                        <label><input type="checkbox" class="currency-checkbox" value="">'+t+"</label>\n                    </div>")})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsImNhcnJ5V3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImxpc3R0ZW5jdXl5ZW5jeVNob3ciLCJzaG93Q29sbGVjdEFzc2V0Iiwic2hvd0RldGFpbFByb3BlcnR5IiwicmVmZXJzaEFjY291bnRFdmVudCIsImFjY291bnRDdXVycmVuY3lFdmVudCIsImFkZEFjY291bnRDdXJyZW5jeUV2ZW50Iiwib24iLCJwayIsInBhcmVudCIsImF0dHIiLCJjb25zb2xlIiwibG9nIiwic2hvdyIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhY2NvdW50IiwiYWNjb3VudEdyb3VwIiwicGxhdGZvcm0iLCJpZCIsInRpdGxlIiwiYWNjZXNza2V5Iiwic2VjcmV0a2V5IiwicHJvcCIsImZpbmQiLCJ2YWwiLCJjbG9zZUJ0biIsImNsaWNrIiwiaGlkZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiYWNjb3VudF9saXN0IiwiY3VycmVuY3lfbGlzdCIsImN1cnJlbmN5IiwidGV4dCIsInB1c2giLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImNoYXJnZUFjY291bnRFdmVudCIsImRhdGFzIiwicHJvcGVydGllcyIsInRwbCIsInRlbXBsYXRlIiwiYXBwZW5kIiwiYWxlcnRDb25maXJtIiwiY29uZmlybUNhbGxiYWNrIiwibGlzdGVuRWRpdEFjY291bnQiLCJudW0iLCJsaXN0ZW5XaXRoRHJhdyIsImJ0biIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFVBQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsZUFBaUJDLEVBQUUsd0JBQ3hCSCxFQUFLSSxhQUFlRCxFQUFFLDBCQUN0QkgsRUFBS0ssY0FBZ0JGLEVBQUUsMkJBQ3ZCSCxFQUFLTSxnQkFBa0JILEVBQUUsNkJBQ3pCSCxFQUFLTyxhQUFlSixFQUFFLGdDQUsxQkosUUFBUVMsVUFBVUMsSUFBTSxXQUNwQixJQUFJVCxFQUFPQyxLQUNYRCxFQUFLVSwyQkFDTFYsRUFBS1csNkJBQ0xYLEVBQUtZLGlDQUNMWixFQUFLYSxpQ0FDTGIsRUFBS2MsK0JBQ0xkLEVBQUtlLG1DQUNMZixFQUFLZ0IsZ0JBQ0xoQixFQUFLaUIsc0JBQ0xqQixFQUFLa0IsMEJBQ0xsQixFQUFLbUIsc0JBQ0xuQixFQUFLb0IsbUJBQ0xwQixFQUFLcUIscUJBQ0xyQixFQUFLc0Isc0JBQ0x0QixFQUFLdUIsd0JBQ0x2QixFQUFLd0IsMkJBUVR6QixRQUFRUyxVQUFVYSxtQkFBcUIsV0FDbkMsSUFBSXJCLEVBQU9DLEtBQ1hFLEVBQUUsb0JBQW9Cc0IsR0FBRyxRQUFTLFdBQzlCLElBRUlDLEVBRmF2QixFQUFFRixNQUNDMEIsU0FBU0EsU0FDakJDLEtBQUssV0FDakJ6QixFQUFFLG1CQUFtQnlCLEtBQUssYUFBY0YsR0FDeENHLFFBQVFDLElBQUlKLEdBQ1oxQixFQUFLRSxlQUFlNkIsT0FDcEJDLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyxxQkFDUEMsS0FBUSxDQUNKVCxHQUFNQSxHQUVWVSxRQUFXLFNBQVVDLEdBRWpCLEdBREFSLFFBQVFDLElBQUlPLEdBQ1csTUFBbkJBLEVBQWEsS0FBVyxDQUN4QkMsUUFBVUQs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QUNOcUIsSUFBTW5FLEVBQUUsMEJBQTBCNEMsTUFDbENTLFNBQVdyRCxFQUFFLG1CQUFtQjRDLE1BQ2hDbEIsUUFBUUMsSUFBSSxLQUNaRCxRQUFRQyxJQUFJd0MsSUFBS2QsU0FBVTlCLEdBQzNCTSxRQUFRQyxLQUFLLENBQ1RDLElBQU8sa0JBQ1BDLEtBQVEsQ0FDSm1DLElBQU9BLElBQ1BkLFNBQVlBLFNBQ1o5QixHQUFNQSxHQUVWVSxRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsTUFDYnNCLFNBQVNDLGFBQWEsT0FBUSxXQUMxQlQsT0FBT0MsU0FBU0MsaUJBUXhDdEQsUUFBUVMsVUFBVWMsb0JBQXNCLFdBQ3BDLElBQUl0QixFQUFPQyxLQUNYRSxFQUFFLG9CQUFvQjhDLE1BQU0sV0FDeEJwQixRQUFRQyxJQUFJLFVBQ1o5QixFQUFLTSxnQkFBZ0I0QyxPQUNyQnVCLFdBQVcsV0FDUHpFLEVBQUtNLGdCQUFnQnlCLFFBRXRCLEtBR0hMLEdBQUt2QixFQUFFRixNQUFNMkIsS0FBSyxrQkFtQjFCN0IsUUFBUVMsVUFBVWUsc0JBQXdCLFdBU3RDLE9BUEFwQixFQUFFLHFCQUFxQjhDLE1BQU0sV0FFekI5QyxFQUFFRixNQUFNNEMsS0FBSyxXQUFXLEtBSGQsSUFXbEI5QyxRQUFRUyxVQUFVZ0Isd0JBQTBCLFdBQ3hDSyxRQUFRQyxJQUFJLGFBR1ozQixFQUFFLHFCQUFxQjhDLE1BQU0sV0FDekIsSUFBSU8sRUFBV3JELEVBQUUscUJBQXFCNEMsTUFDdENsQixRQUFRQyxJQUFJLFNBQ1ozQixFQUFFLDJCQUEyQitELE9BQU8scUhBQ29FVixFQUFXLDJDQVEzSHJELEVBQUUsWUFDZ0IsSUFBSUosU0FDVlUiLCJmaWxlIjoiYWNjb3VudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBBY2NvdW50KCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5hY2NvdW50V3JhcHBlciA9ICQoJy5hZGQtYWNjb3VudC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmN1cnJ5V3JhcHBlciA9ICQoJy5hY2NvdW50LWN1cnJ5LXdyYXBwZXInKTtcclxuICAgIHNlbGYudG90YWxQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKTtcclxuICAgIHNlbGYuY2FycnlXcmFwcGVyID0gJCgnLmFjY291bnQtY2FycnktY3Vycnktd3JhcHBlcicpO1xyXG5cclxufTtcclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlQWRkQWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUN1cnJ5V3JhcHBlcigpO1xyXG4gICAgc2VsZi5saXN0UHJvcGVydHlUb3RhbFNob3dIaWRlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5Ub2FsQWNjb3VudENsb3NlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlblByb3BlcnR5RGV0YWlsc0Nsb3NlRXZlbnQoKTtcclxuICAgIHNlbGYuZGVsZXRlQWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TdWJtaXRBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbmRlbm9taW5hdGlvbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5jdXl5ZW5jeVNob3coKTtcclxuICAgIHNlbGYuc2hvd0NvbGxlY3RBc3NldCgpO1xyXG4gICAgc2VsZi5zaG93RGV0YWlsUHJvcGVydHkoKTtcclxuICAgIHNlbGYucmVmZXJzaEFjY291bnRFdmVudCgpO1xyXG4gICAgc2VsZi5hY2NvdW50Q3V1cnJlbmN5RXZlbnQoKVxyXG4gICAgc2VsZi5hZGRBY2NvdW50Q3VycmVuY3lFdmVudCgpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5FZGl0QWNjb3VudCgpO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIOi0puaIt1xyXG4gKi9cclxuQWNjb3VudC5wcm90b3R5cGUuc2hvd0RldGFpbFByb3BlcnR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgJCgnLnVwZGF0ZS1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgJCgnI2FkZC1hY2NvdW50LXBrJykuYXR0cignYWNjb3VudC1waycsIHBrKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHBrKVxyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuc2hvdygpXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9hY2NvdW50aW5mby8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWNjb3VudClcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWNjb3VudEdyb3VwID0gJCgnLmFjY291bnQtYm9keScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtID0gYWNjb3VudFsncGxhdGZvcm0nXVsnUGxhdGZvcm1fbmFtZSddXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBhY2NvdW50WydwbGF0Zm9ybSddWydpZCddXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGxhdGZvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBhY2NvdW50Wyd0aXRsZSddXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudFsnYWNjZXNza2V5J11cclxuICAgICAgICAgICAgICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50WydzZWNyZXRrZXknXVxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjcGxhdGZvcm0gb3B0aW9uW3ZhbHVlPVwiICsgaWQgKyBcIl1cIikucHJvcChcInNlbGVjdGVkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBvcHRpb24gPSAkKFwiPG9wdGlvbj5cIikudmFsKGlkKS50ZXh0KHBsYXRmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgJChcIiNwbGF0Zm9ybVwiKS5hcHBlbmQob3B0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjb3VudC1uYW1lJ11cIikudmFsKHRpdGxlKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKGFjY2Vzc2tleSlcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50R3JvdXAuZmluZChcImlucHV0W25hbWU9J3NjcmVudCddXCIpLnZhbChzZWNyZXRrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHBsID0gdGVtcGxhdGUoJ2FkZC1hY2NvdW50SW5mbycse1wiYWNjb3VudFwiOmFjY291bnR9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGFjY291bnRHcm91cCA9ICQoJy5hY2NvdW50LW1vZGFsLWhlYWRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3VudEdyb3VwLmFwcGVuZCh0cGwpXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuLyoqXHJcbiAqIOi0puaIt+W8ueWHuuahhuaYvuekuumakOiXj1xyXG4gKi9cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnI2FkZC1hY2NvdW50LWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3NzZnNkZlwiKVxyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuaGlkZSgpXHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5oaWRlKCk7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5kZW5vbWluYXRpb25FdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBhY2NvdW50X2xpc3QgPSBzZWxmLmFjY291bnRDdXVycmVuY3lFdmVudCgpXHJcbiAgICBjb25zb2xlLmxvZyhhY2NvdW50X2xpc3QpXHJcbiAgICAkKCcjYWNjb3VudC1jdXJyeS1jb25maWd1cmF0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tbWFzay1hY2NvdW50LXdyYXBwZXInKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1hY2NvdW50LXdyYXBwZXInKS5zaG93KCk7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW5jeV9saXN0ID0gW11cclxuICAgICAgICAkKCcuY3VycmVuY3ktY2hlY2tib3gnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW5jeSA9ICQodGhpcykucGFyZW50KCkudGV4dCgpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbmN5KVxyXG4gICAgICAgICAgICBjdXJyZW5jeV9saXN0LnB1c2goY3VycmVuY3kpXHJcblxyXG4gICAgICAgICAgICAkKCcjY3VycmVuY3ktYWRkLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9jb25maWdjdXJyZW5jeS8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeV9saXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnYWNjb3VudF9saXN0JzogYWNjb3VudF9saXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoJ+aWsOWinuW4geenjeaIkOWKnycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pXHJcblxyXG4gICAgJCgnLmRlbm9taW5hdGlvbi1jbG9zZS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1tYXNrLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1tYXNrLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0UHJvcGVydHlUb3RhbFNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcjcHJvcGVydHktdG90YWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LnNob3coKVxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LmhpZGUoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudG90YWxQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLmFkZC1wcm9wZXJ0eScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5zaG93KClcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgc2VsZi5jaGFyZ2VBY2NvdW50RXZlbnQocGspXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuVG9hbEFjY291bnRDbG9zZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnByb3BlcnR5LWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucHJvcGVydHktdG90YWwtd3JhcHBlcicpLmhpZGUoKVxyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgfSlcclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnByb3BlcnR5LWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucHJvcGVydHktZGV0YWlscy13cmFwcGVyJykuaGlkZSgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLmNoZWNrLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LnNob3coKVxyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAkKCcucmVmZXJzaCcpLmF0dHIoJ3Byb3BlcnR5LWlkJywgcGspXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAndXJsJzogJy9kZWFsL3Nob3dhc3NlcnQvJyxcclxuICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICdwayc6IHBrXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxhdGZvcm0gPSBkYXRhc1snUGxhdGZvcm1fbmFtZSddICAvL+W5s+WPsOWQjeensFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgYXNzZXRfY2hhbmdlID0gZGF0YXNbJ2Fzc2V0X2NoYW5nZSddICAvL+S7iuaXpei1hOS6p+WPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgb3JpZ2luYWxfYXNzZXRzID0gZGF0YXNbJ29yaWdpbmFsX2Fzc2V0cyddIC8v5Yid5aeL6LWE5LqnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBoaXN0b3J5X3Byb2ZpdCA9IGRhdGFzWydoaXN0b3J5X3Byb2ZpdCddIC8v5Y6G5Y+y55uI5LqPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciB3aXRoZHJhd19yZWNvcmQgPSBkYXRhc1snd2l0aGRyYXdfcmVjb3JkJ10gLy/mgLvmj5DluIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGFzc2V0c19kaWN0ID0gZGF0YXNbJ2Fzc2V0c19kaWN0J10gICAvL+i1hOS6p+ihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgcHJvZml0X2xvc3NfZGljdCA9IGRhdGFzWydwcm9maXRfbG9zc19kaWN0J10gLy/mjZ/nm4rooahcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb3BlcnR5LWFjY291bnQtdmFsdWUnKS50ZXh0KHBsYXRmb3JtKSAgLy/mj5LlhaXlubPlj7DliLBodG1s5LitXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBkZXRhaWxzR3JvdXAgPSAkKCcucHJvcGVydHktZGV0YWlscy13cmFwcGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5hc3NldHMtY2hhbmdlIC5udW1iZXInKS50ZXh0KGFzc2V0X2NoYW5nZVsnbnVtYmVyJ10pIC8v6LWE5Lqn5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5maW5kKCcuYXNzZXRzLWNoYW5nZSAucGVyY2VudGFnZScpLnRleHQoYXNzZXRfY2hhbmdlWydwZXJjZW50J10pIC8v6LWE5Lqn5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5maW5kKCcuaW5pdGlhbC1hc3NldCAubnVtYmVyJykudGV4dChvcmlnaW5hbF9hc3NldHMpIC8v5Yid5aeL5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5maW5kKCcuY3VycnktYWNjb3VudC10b3RhbCAudG90YWwtbnVtYmVyJykudGV4dCh3aXRoZHJhd19yZWNvcmQpIC8v5oC76K6h5o+Q5biBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5maW5kKCcuaGlzdG9yeS1wcm9maXQgIC5udW1iZXInKS50ZXh0KGhpc3RvcnlfcHJvZml0WydudW1iZXInXSkgLy/mgLvorqHmj5DluIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5oaXN0b3J5LXByb2ZpdCAucGVyY2VudGFnZScpLnRleHQoaGlzdG9yeV9wcm9maXRbJ3BlcmNlbnQnXSkgLy/mgLvorqHmj5DluIFcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciB0cGwxID0gdGVtcGxhdGUoXCJcIix7XCJhc3NldHNfZGljdFwiOmFzc2V0c19kaWN0fSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRwbDIgPSB0ZW1wbGF0ZShcIlwiLHtcInByb2ZpdF9sb3NzX2RpY3RcIjpwcm9maXRfbG9zc19kaWN0fSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRwbCA9IHRlbXBsYXRlKFwiZGV0YWlscy1pdGVtXCIse1wiZGF0YXNcIjpkYXRhc30pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBkZXRhaWxzR3JvdXAgPSAkKFwiLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmFwcGVuZCh0cGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgncHJvcGVydHktZGV0YWlscycsIHsncHJvcGVydGllcyc6IHByb3BlcnRpZXN9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWNjb3VudFByb3BlcnR5ID0gJCgnI3Byb3BlcnR5LWRldGFpbHMtaWRzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudFByb3BlcnR5LmFwcGVuZCh0cGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBkZXRhaWxzVGFiID0gJCgnI3Byb3BlcnR5LWRldGFpbHMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAvLyB2YXIgdGQgPSBkZXRhaWxzVGFiLmZpbmQoXCJ0Ym9keSB0ciB0ZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkLmVhY2goYXNzZXRzX2RpY3QsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAkLmVhY2godmFsdWUsIGZ1bmN0aW9uIChqLCBrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5zaG93Q29sbGVjdEFzc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGFjY291bnRfbGlzdCA9IHNlbGYuYWNjb3VudEN1dXJyZW5jeUV2ZW50KClcclxuICAgIGNvbnNvbGUubG9nKGFjY291bnRfbGlzdClcclxuICAgICQoJyNwcm9wZXJ0eS10b3RhbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3Nob3djb2xsZWN0YXNzZXQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnYWNjb3VudF9saXN0JzogYWNjb3VudF9saXN0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmRlbGV0ZUFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcuZGVsZXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAndGl0bGUnOiAn5oKo56Gu5a6a5Yig6Zmk6L+Z5Liq6LSm5oi35ZCX77yfJyxcclxuICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9kZWxldGVhY2NvdW50LycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuRWRpdEFjY291bnQgPSBmdW5jdGlvbiAocGspIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjb25maXJtQnRuID0gJCgnLmNvbmZpcm0nKTtcclxuICAgIGNvbmZpcm1CdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhY2NvdW50ID0gJCgnLmFjY291bnQtYm9keScpO1xyXG4gICAgICAgIHBsYXRmb3JtID0gJCgnI3BsYXRmb3JtJykuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKVxyXG4gICAgICAgIHRpdGxlID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjb3VudC1uYW1lJ11cIikudmFsKClcclxuICAgICAgICBhY2Nlc3NrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2Nlc3MnXVwiKS52YWwoKVxyXG4gICAgICAgIHNlY3JldGtleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J3NjcmVudCddXCIpLnZhbCgpXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9lZGl0YWNjb3VudC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwbGF0Zm9ybSc6IHBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnYWNjZXNza2V5JzogYWNjZXNza2V5LFxyXG4gICAgICAgICAgICAgICAgJ3NlY3JldGtleSc6IHNlY3JldGtleSxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5re75Yqg6LSm5oi35oiQ5Yqf77yBXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSlcclxuXHJcbn1cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU3VibWl0QWNjb3VudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY29uZmlybScpO1xyXG5cclxuICAgIGNvbmZpcm1CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwayA9ICQodGhpcykuYXR0cignYWNjb3VudC1waycpXHJcbiAgICAgICAgY29uc29sZS5sb2cocGspXHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB2YXIgdXJsID0gJydcclxuICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgdXJsID0gJy9kZWFsL2VkaXRhY2NvdW50LydcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvYWRkYWNjb3VudC8nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi57yW6L6R6LSm5oi35oiQ5Yqf77yBXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmNoYXJnZUFjY291bnRFdmVudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY3VycnktY29uZmlybScpXHJcbiAgICBjb25maXJtQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBudW0gPSAkKCcjY3VycmVuY3ktbnVtYmVyJykudmFsKClcclxuICAgICAgICBjdXJyZW5jeSA9ICQoJyNjdXJyZW5jeScpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCIqXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2cobnVtLCBjdXJyZW5jeSwgcGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9jaGFyZ2VhY2NvdW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAnbnVtJzogbnVtLFxyXG4gICAgICAgICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3ksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLlop7otYTmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuY3V5eWVuY3lTaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLm1lbnRpb24tbW9uZXknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmxpc3RlbldpdGhEcmF3KHBrKVxyXG5cclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbldpdGhEcmF3ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYnRuID0gJCgnLmNhcnJ5LWNvbmZpcm0nKVxyXG4gICAgY29uc29sZS5sb2cocGspXHJcbiAgICBidG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG51bSA9ICQoJyNjYXJyeS1jdXJyZW5jeS1udW1iZXInKS52YWwoKVxyXG4gICAgICAgIGN1cnJlbmN5ID0gJCgnI2NhcnJ5LWN1cnJlbmN5JykudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhudW0sIGN1cnJlbmN5LCBwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3dpdGhkcmF3LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ251bSc6IG51bSxcclxuICAgICAgICAgICAgICAgICdjdXJyZW5jeSc6IGN1cnJlbmN5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmj5DluIHmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLnJlZmVyc2hBY2NvdW50RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcjZGV0YWlscy1yZWZlcnNoJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3NkZmFzXCIpXHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5zaG93KClcclxuXHJcbiAgICAgICAgfSwgMTAwKTtcclxuXHJcblxyXG4gICAgICAgIHBrID0gJCh0aGlzKS5hdHRyKCdwcm9wZXJ0eS1pZCcpXHJcbiAgICAgICAgLy8geGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAvLyAgICAgJ3VybCc6ICcvZGVhbC9zaG93YXNzZXJ0LycsXHJcbiAgICAgICAgLy8gICAgICdkYXRhJzoge1xyXG4gICAgICAgIC8vICAgICAgICAgJ3BrJzogcGtcclxuICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAvLyAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDAgKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2cocHJvcGVydGllcylcclxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ3Byb3BlcnR5LWRldGFpbHMnLHsncHJvcGVydGllcyc6cHJvcGVydGllc30pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGFjY291bnRQcm9wZXJ0eSA9ICQoJyNwcm9wZXJ0eS1kZXRhaWxzLWlkcycpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYWNjb3VudFByb3BlcnR5LnJlcGxhY2UodHBsKVxyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmFjY291bnRDdXVycmVuY3lFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY2NvdW50ID0gW11cclxuICAgICQoJy5hY2NvdW50LWNoY2VrYm94JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKVxyXG4gICAgICAgIC8vIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgLy8gdmFyIGFjY291bnRfaWQgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgLy8gYWNjb3VudC5wdXNoKGFjY291bnRfaWQpXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGFjY291bnRcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuYWRkQWNjb3VudEN1cnJlbmN5RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImFzbGRmYWxqZlwiKVxyXG5cclxuXHJcbiAgICAkKCcjYWRkLWN1cnJlbmN5LWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVuY3kgPSAkKCcjYWRkLW5ldy1jdXJyZW5jeScpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzY3VkZlwiKVxyXG4gICAgICAgICQoJy5jdXJyZW5jeS1jaGVjay1jb250ZW50JykuYXBwZW5kKFwiIDxkaXYgY2xhc3M9XFxcImNoZWNrYm94XFxcIj5cXG5cIiArXHJcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgY2xhc3M9XFxcImN1cnJlbmN5LWNoZWNrYm94XFxcIiB2YWx1ZT1cXFwiXFxcIj5cIiArIGN1cnJlbmN5ICsgXCI8L2xhYmVsPlxcblwiICtcclxuICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgIDwvZGl2PlwiKVxyXG5cclxuICAgIH0pXHJcblxyXG5cclxufVxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYWNjb3VudCA9IG5ldyBBY2NvdW50KCk7XHJcbiAgICBhY2NvdW50LnJ1bigpO1xyXG59KSJdfQ==
