function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper"),t.carryWrapper=$(".account-carry-curry-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount(),t.listendenominationEvent(),t.listtencuyyencyShow(),t.showCollectAsset(),t.showDetailProperty(),t.refershAccountEvent(),t.addAccountCurrencyEvent()},Account.prototype.showDetailProperty=function(){var c=this;$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");$("#add-account-pk").attr("account-pk",t),console.log(t),c.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){account=t.data,console.log(account);var c=$(".account-body");platform=account.platform.Platform_name,id=account.platform.id,console.log(platform),title=account.title,accesskey=account.accesskey,secretkey=account.secretkey,$("#platform option[value="+id+"]").prop("selected",!0),c.find("input[name='account-name']").val(title),c.find("input[name='access']").val(accesskey),c.find("input[name='scrent']").val(secretkey)}}})})},Account.prototype.listenShowHideAddAccount=function(){var t=this,c=$(".close-btn");$("#add-account-btn").click(function(){t.accountWrapper.show()}),c.click(function(){console.log("sssfsdf"),t.accountWrapper.hide(),window.location.reload()}),$(".cancel").click(function(){t.accountWrapper.hide(),window.location.reload()})},Account.prototype.listendenominationEvent=function(){$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show();var t=[];$("#currency-add-btn").click(function(){$("input[class='currency-checkbox']:checkbox").each(function(){1==$(this).prop("checked")&&(console.log($(this).val()),t.push($(this).val()))}),console.log(t),xfzajax.post({url:"/deal/configcurrency/",data:{currency:t},success:function(t){200===t.code&&xfzalert.alertSuccess("新增币种成功",function(){window.location.reload()})}})})}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()}),$(".cancel").click(function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,c=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),c.click(function(){t.totalProperty.hide()}),$(".cancel").click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var c=this,t=$(".close-btn");$(".add-property").click(function(){c.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.chargeAccountEvent(t)}),t.click(function(){c.curryWrapper.hide()}),$(".cancel").click(function(){c.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide(),window.location.reload()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var c=this,t=$(".close-btn");$(".check-property").on("click",function(){c.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");$(".refersh").attr("property-id",t),xfzajax.post({url:"/deal/showassert/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){datas=t.data;var c=t.data;console.log(c);var o=datas.Platform_name;$(".property-account-value").text(o);var e=template("property-details",{properties:c});$("#property-details-ids").append(e)}}})}),t.click(function(){c.detailsProperty.hide()}),$(".cancel").click(function(){c.detailsProperty.hide()})},Account.prototype.showCollectAsset=function(){$("#property-total").click(function(){var n=[];$("input[class='account-chcekbox']:checkbox").each(function(){if(1==$(this).prop("checked")){var t=$(this).parent().parent().attr("data-id");n.push(t)}}),xfzajax.post({url:"/deal/showcollectasset/",data:{account_list:n},success:function(t){if(console.log(t),200===t.code){var c=n.length;console.log(c),$("#total-account").text("所有"+c+"个账户");var o=t.data,e=template("total-properties",{properties:o});$("#property-total-details").append(e)}}})})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(c){$(".confirm").on("click",function(){var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val(),xfzajax.post({url:"/deal/editaccount/",data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(t){$(".confirm").click(function(){var c=$(this).attr("account-pk");console.log(c);var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val();var o="";o=c?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:o,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&(c?xfzalert.alertSuccess("编辑账户成功！",function(){window.location.reload()}):xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()}))}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},Account.prototype.listtencuyyencyShow=function(){var c=this,t=$(".close-btn");$(".mention-money").click(function(){c.carryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.listenWithDraw(t)}),t.click(function(){c.carryWrapper.hide()}),$(".cancel").click(function(){c.carryWrapper.hide()})},Account.prototype.listenWithDraw=function(t){var c=$(".carry-confirm");console.log(t),c.click(function(){num=$("#carry-currency-number").val(),currency=$("#carry-currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/withdraw/",data:{num:num,currency:currency,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("提币成功",function(){window.location.reload()})}})})},Account.prototype.refershAccountEvent=function(){var t=this;$("#details-refersh").click(function(){console.log("ssdfas"),t.detailsProperty.hide(),setTimeout(function(){t.detailsProperty.show()},100),pk=$(this).attr("property-id")})},Account.prototype.accountCuurrencyEvent=function(){var c=[];return $("input[class='account-chcekbox']:checkbox").each(function(){if(1==$(this).prop("checked")){var t=$(this).parent().parent().attr("data-id");c.push(t)}}),c},Account.prototype.addAccountCurrencyEvent=function(){$("#add-currency-btn").click(function(){var t=$("#add-new-currency").val();$(".currency-check-content").append(' <div class="checkbox">\n                        <label class=\'sdfasd\'><input type="checkbox" class="currency-checkbox" value='+t+">"+t+"</label>\n                    </div>")})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsImNhcnJ5V3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImxpc3R0ZW5jdXl5ZW5jeVNob3ciLCJzaG93Q29sbGVjdEFzc2V0Iiwic2hvd0RldGFpbFByb3BlcnR5IiwicmVmZXJzaEFjY291bnRFdmVudCIsImFkZEFjY291bnRDdXJyZW5jeUV2ZW50Iiwib24iLCJwayIsInBhcmVudCIsImF0dHIiLCJjb25zb2xlIiwibG9nIiwic2hvdyIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhY2NvdW50IiwiYWNjb3VudEdyb3VwIiwicGxhdGZvcm0iLCJpZCIsInRpdGxlIiwiYWNjZXNza2V5Iiwic2VjcmV0a2V5IiwicHJvcCIsImZpbmQiLCJ2YWwiLCJjbG9zZUJ0biIsImNsaWNrIiwiaGlkZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiY3VycmVuY3lfbGlzdCIsImVhY2giLCJwdXNoIiwiY3VycmVuY3kiLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImNoYXJnZUFjY291bnRFdmVudCIsImRhdGFzIiwicHJvcGVydGllcyIsInRleHQiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImFwcGVuZCIsImFjY291bnRfaWQiLCJhY2NvdW50X2xpc3QiLCJhY2NvdW50X251bSIsImxlbmd0aCIsImFsZXJ0Q29uZmlybSIsImNvbmZpcm1DYWxsYmFjayIsImxpc3RlbkVkaXRBY2NvdW50IiwibnVtIiwibGlzdGVuV2l0aERyYXciLCJidG4iLCJzZXRUaW1lb3V0IiwiYWNjb3VudEN1dXJyZW5jeUV2ZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxVQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLGVBQWlCQyxFQUFFLHdCQUN4QkgsRUFBS0ksYUFBZUQsRUFBRSwwQkFDdEJILEVBQUtLLGNBQWdCRixFQUFFLDJCQUN2QkgsRUFBS00sZ0JBQWtCSCxFQUFFLDZCQUN6QkgsRUFBS08sYUFBZUosRUFBRSxnQ0FLMUJKLFFBQVFTLFVBQVVDLElBQU0sV0FDcEIsSUFBSVQsRUFBT0MsS0FDWEQsRUFBS1UsMkJBQ0xWLEVBQUtXLDZCQUNMWCxFQUFLWSxpQ0FDTFosRUFBS2EsaUNBQ0xiLEVBQUtjLCtCQUNMZCxFQUFLZSxtQ0FDTGYsRUFBS2dCLGdCQUNMaEIsRUFBS2lCLHNCQUNMakIsRUFBS2tCLDBCQUNMbEIsRUFBS21CLHNCQUNMbkIsRUFBS29CLG1CQUNMcEIsRUFBS3FCLHFCQUNMckIsRUFBS3NCLHNCQUNMdEIsRUFBS3VCLDJCQVFUeEIsUUFBUVMsVUFBVWEsbUJBQXFCLFdBQ25DLElBQUlyQixFQUFPQyxLQUNYRSxFQUFFLG9CQUFvQnFCLEdBQUcsUUFBUyxXQUM5QixJQUVJQyxFQUZhdEIsRUFBRUYsTUFDQ3lCLFNBQVNBLFNBQ2pCQyxLQUFLLFdBQ2pCeEIsRUFBRSxtQkFBbUJ3QixLQUFLLGFBQWNGLEdBQ3hDRyxRQUFRQyxJQUFJSixHQUNaekIsRUFBS0UsZUFBZTRCLE9BQ3BCQyxRQUFRQyxLQUFLLENBQ1RDLElBQU8scUJBQ1BDLEtBQVEsQ0FDSlQsR0FBTUEsR0FFVlUsUUFBVyxTQUFVQyxHQUVqQixHQURBUixRQUFRQyxJQUFJTyxHQUNXLE1B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SXNCLEVBRmEvRCxFQUFFRixNQUNDeUIsU0FBU0EsU0FDVEMsS0FBSyxXQUN6QlUsRUFBUWtCLEtBQUtXLE1BS2Q3QixHQUlYdEMsUUFBUVMsVUFBVWUsd0JBQTBCLFdBQ3hDcEIsRUFBRSxxQkFBcUI2QyxNQUFNLFdBQ3pCLElBQUlRLEVBQVdyRCxFQUFFLHFCQUFxQjJDLE1BQ3RDM0MsRUFBRSwyQkFBMkI4RCxPQUFPLG1JQUM4RVQsRUFBVyxJQUFNQSxFQUFXLDJDQVF0SnJELEVBQUUsWUFDZ0IsSUFBSUosU0FDVlUiLCJmaWxlIjoiYWNjb3VudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBBY2NvdW50KCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5hY2NvdW50V3JhcHBlciA9ICQoJy5hZGQtYWNjb3VudC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmN1cnJ5V3JhcHBlciA9ICQoJy5hY2NvdW50LWN1cnJ5LXdyYXBwZXInKTtcclxuICAgIHNlbGYudG90YWxQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKTtcclxuICAgIHNlbGYuY2FycnlXcmFwcGVyID0gJCgnLmFjY291bnQtY2FycnktY3Vycnktd3JhcHBlcicpO1xyXG5cclxufTtcclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlQWRkQWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUN1cnJ5V3JhcHBlcigpO1xyXG4gICAgc2VsZi5saXN0UHJvcGVydHlUb3RhbFNob3dIaWRlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5Ub2FsQWNjb3VudENsb3NlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlblByb3BlcnR5RGV0YWlsc0Nsb3NlRXZlbnQoKTtcclxuICAgIHNlbGYuZGVsZXRlQWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TdWJtaXRBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbmRlbm9taW5hdGlvbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5jdXl5ZW5jeVNob3coKTtcclxuICAgIHNlbGYuc2hvd0NvbGxlY3RBc3NldCgpO1xyXG4gICAgc2VsZi5zaG93RGV0YWlsUHJvcGVydHkoKTtcclxuICAgIHNlbGYucmVmZXJzaEFjY291bnRFdmVudCgpO1xyXG4gICAgc2VsZi5hZGRBY2NvdW50Q3VycmVuY3lFdmVudCgpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5FZGl0QWNjb3VudCgpO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIOi0puaIt1xyXG4gKi9cclxuQWNjb3VudC5wcm90b3R5cGUuc2hvd0RldGFpbFByb3BlcnR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgJCgnLnVwZGF0ZS1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgJCgnI2FkZC1hY2NvdW50LXBrJykuYXR0cignYWNjb3VudC1waycsIHBrKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHBrKVxyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuc2hvdygpXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9hY2NvdW50aW5mby8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWNjb3VudClcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWNjb3VudEdyb3VwID0gJCgnLmFjY291bnQtYm9keScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtID0gYWNjb3VudFsncGxhdGZvcm0nXVsnUGxhdGZvcm1fbmFtZSddXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBhY2NvdW50WydwbGF0Zm9ybSddWydpZCddXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGxhdGZvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBhY2NvdW50Wyd0aXRsZSddXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudFsnYWNjZXNza2V5J11cclxuICAgICAgICAgICAgICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50WydzZWNyZXRrZXknXVxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjcGxhdGZvcm0gb3B0aW9uW3ZhbHVlPVwiICsgaWQgKyBcIl1cIikucHJvcChcInNlbGVjdGVkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBvcHRpb24gPSAkKFwiPG9wdGlvbj5cIikudmFsKGlkKS50ZXh0KHBsYXRmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgJChcIiNwbGF0Zm9ybVwiKS5hcHBlbmQob3B0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjb3VudC1uYW1lJ11cIikudmFsKHRpdGxlKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKGFjY2Vzc2tleSlcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50R3JvdXAuZmluZChcImlucHV0W25hbWU9J3NjcmVudCddXCIpLnZhbChzZWNyZXRrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHBsID0gdGVtcGxhdGUoJ2FkZC1hY2NvdW50SW5mbycse1wiYWNjb3VudFwiOmFjY291bnR9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGFjY291bnRHcm91cCA9ICQoJy5hY2NvdW50LW1vZGFsLWhlYWRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3VudEdyb3VwLmFwcGVuZCh0cGwpXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuLyoqXHJcbiAqIOi0puaIt+W8ueWHuuahhuaYvuekuumakOiXj1xyXG4gKi9cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnI2FkZC1hY2NvdW50LWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3NzZnNkZlwiKVxyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuaGlkZSgpXHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5oaWRlKCk7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5kZW5vbWluYXRpb25FdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIC8vIHZhciBhY2NvdW50X2xpc3QgPSBzZWxmLmFjY291bnRDdXVycmVuY3lFdmVudCgpXHJcbiAgICAvLyBjb25zb2xlLmxvZyhhY2NvdW50X2xpc3QpXHJcbiAgICAkKCcjYWNjb3VudC1jdXJyeS1jb25maWd1cmF0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tbWFzay1hY2NvdW50LXdyYXBwZXInKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1hY2NvdW50LXdyYXBwZXInKS5zaG93KCk7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW5jeV9saXN0ID0gW11cclxuICAgICAgICAkKCcjY3VycmVuY3ktYWRkLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICQoXCJpbnB1dFtjbGFzcz0nY3VycmVuY3ktY2hlY2tib3gnXTpjaGVja2JveFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeV9saXN0LnB1c2goJCh0aGlzKS52YWwoKSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbmN5X2xpc3QpXHJcbiAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAndXJsJzogJy9kZWFsL2NvbmZpZ2N1cnJlbmN5LycsXHJcbiAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeV9saXN0LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2Vzcygn5paw5aKe5biB56eN5oiQ5YqfJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KVxyXG5cclxuICAgICQoJy5kZW5vbWluYXRpb24tY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tbWFzay1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcblxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tbWFzay1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnI3Byb3BlcnR5LXRvdGFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudG90YWxQcm9wZXJ0eS5zaG93KClcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudG90YWxQcm9wZXJ0eS5oaWRlKClcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUN1cnJ5V3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJy5hZGQtcHJvcGVydHknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuc2hvdygpXHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNlbGYuY2hhcmdlQWNjb3VudEV2ZW50KHBrKVxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5wcm9wZXJ0eS1jbG9zZS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnByb3BlcnR5LXRvdGFsLXdyYXBwZXInKS5oaWRlKClcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgIH0pXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuUHJvcGVydHlEZXRhaWxzQ2xvc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5wcm9wZXJ0eS1jbG9zZS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlcicpLmhpZGUoKVxyXG4gICAgfSlcclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblByb3BlcnR5RGV0YWlsc1Nob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJy5jaGVjay1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5zaG93KClcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgJCgnLnJlZmVyc2gnKS5hdHRyKCdwcm9wZXJ0eS1pZCcsIHBrKVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBrKVxyXG4gICAgICAgIHhmemFqYXgucG9zdChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9zaG93YXNzZXJ0LycsXHJcbiAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvcGVydGllcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXRmb3JtID0gZGF0YXNbJ1BsYXRmb3JtX25hbWUnXSAgLy/lubPlj7DlkI3np7BcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGFzc2V0X2NoYW5nZSA9IGRhdGFzWydhc3NldF9jaGFuZ2UnXSAgLy/ku4rml6XotYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG9yaWdpbmFsX2Fzc2V0cyA9IGRhdGFzWydvcmlnaW5hbF9hc3NldHMnXSAvL+WIneWni+i1hOS6p1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgaGlzdG9yeV9wcm9maXQgPSBkYXRhc1snaGlzdG9yeV9wcm9maXQnXSAvL+WOhuWPsuebiOS6j1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgd2l0aGRyYXdfcmVjb3JkID0gZGF0YXNbJ3dpdGhkcmF3X3JlY29yZCddIC8v5oC75o+Q5biBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBhc3NldHNfZGljdCA9IGRhdGFzWydhc3NldHNfZGljdCddICAgLy/otYTkuqfooahcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHByb2ZpdF9sb3NzX2RpY3QgPSBkYXRhc1sncHJvZml0X2xvc3NfZGljdCddIC8v5o2f55uK6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9wZXJ0eS1hY2NvdW50LXZhbHVlJykudGV4dChwbGF0Zm9ybSkgIC8v5o+S5YWl5bmz5Y+w5YiwaHRtbOS4rVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgZGV0YWlsc0dyb3VwID0gJCgnLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5maW5kKCcuYXNzZXRzLWNoYW5nZSAubnVtYmVyJykudGV4dChhc3NldF9jaGFuZ2VbJ251bWJlciddKSAvL+i1hOS6p+WPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmFzc2V0cy1jaGFuZ2UgLnBlcmNlbnRhZ2UnKS50ZXh0KGFzc2V0X2NoYW5nZVsncGVyY2VudCddKSAvL+i1hOS6p+WPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmluaXRpYWwtYXNzZXQgLm51bWJlcicpLnRleHQob3JpZ2luYWxfYXNzZXRzKSAvL+WIneWni+WPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmN1cnJ5LWFjY291bnQtdG90YWwgLnRvdGFsLW51bWJlcicpLnRleHQod2l0aGRyYXdfcmVjb3JkKSAvL+aAu+iuoeaPkOW4gVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmhpc3RvcnktcHJvZml0ICAubnVtYmVyJykudGV4dChoaXN0b3J5X3Byb2ZpdFsnbnVtYmVyJ10pIC8v5oC76K6h5o+Q5biBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5maW5kKCcuaGlzdG9yeS1wcm9maXQgLnBlcmNlbnRhZ2UnKS50ZXh0KGhpc3RvcnlfcHJvZml0WydwZXJjZW50J10pIC8v5oC76K6h5o+Q5biBXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsMSA9IHRlbXBsYXRlKFwiXCIse1wiYXNzZXRzX2RpY3RcIjphc3NldHNfZGljdH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciB0cGwyID0gdGVtcGxhdGUoXCJcIix7XCJwcm9maXRfbG9zc19kaWN0XCI6cHJvZml0X2xvc3NfZGljdH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciB0cGwgPSB0ZW1wbGF0ZShcImRldGFpbHMtaXRlbVwiLHtcImRhdGFzXCI6ZGF0YXN9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgZGV0YWlsc0dyb3VwID0gJChcIi5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5hcHBlbmQodHBsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ3Byb3BlcnR5LWRldGFpbHMnLCB7J3Byb3BlcnRpZXMnOiBwcm9wZXJ0aWVzfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRQcm9wZXJ0eSA9ICQoJyNwcm9wZXJ0eS1kZXRhaWxzLWlkcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRQcm9wZXJ0eS5hcHBlbmQodHBsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgZGV0YWlsc1RhYiA9ICQoJyNwcm9wZXJ0eS1kZXRhaWxzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLy8gdmFyIHRkID0gZGV0YWlsc1RhYi5maW5kKFwidGJvZHkgdHIgdGRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJC5lYWNoKGFzc2V0c19kaWN0LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coa2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgJC5lYWNoKHZhbHVlLCBmdW5jdGlvbiAoaiwgaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuc2hvd0NvbGxlY3RBc3NldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIHZhciBzZWxmID0gdGhpcztcclxuICAgIC8vIHZhciBhY2NvdW50X2xpc3QgPSBzZWxmLmFjY291bnRDdXVycmVuY3lFdmVudCgpXHJcbiAgICAvLyBjb25zb2xlLmxvZyhhY2NvdW50X2xpc3QpXHJcbiAgICAkKCcjcHJvcGVydHktdG90YWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFjY291bnQgPSBbXVxyXG4gICAgICAgICQoXCJpbnB1dFtjbGFzcz0nYWNjb3VudC1jaGNla2JveCddOmNoZWNrYm94XCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBhY2NvdW50X2lkID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudC5wdXNoKGFjY291bnRfaWQpXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3Nob3djb2xsZWN0YXNzZXQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnYWNjb3VudF9saXN0JzogYWNjb3VudFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRfbnVtID0gYWNjb3VudC5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY2NvdW50X251bSlcclxuICAgICAgICAgICAgICAgICAgICAkKCcjdG90YWwtYWNjb3VudCcpLnRleHQoXCLmiYDmnIlcIiArIGFjY291bnRfbnVtICsgXCLkuKrotKbmiLdcIilcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCd0b3RhbC1wcm9wZXJ0aWVzJywgeydwcm9wZXJ0aWVzJzogcHJvcGVydGllc30pXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRQcm9wZXJ0eSA9ICQoJyNwcm9wZXJ0eS10b3RhbC1kZXRhaWxzJylcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50UHJvcGVydHkuYXBwZW5kKHRwbClcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuZGVsZXRlQWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy5kZWxldGUtcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICd0aXRsZSc6ICfmgqjnoa7lrprliKDpmaTov5nkuKrotKbmiLflkJfvvJ8nLFxyXG4gICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9kZWFsL2RlbGV0ZWFjY291bnQvJyxcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5FZGl0QWNjb3VudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY29uZmlybScpO1xyXG4gICAgY29uZmlybUJ0bi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2VkaXRhY2NvdW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KVxyXG5cclxufVxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TdWJtaXRBY2NvdW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jb25maXJtJyk7XHJcblxyXG4gICAgY29uZmlybUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBrID0gJCh0aGlzKS5hdHRyKCdhY2NvdW50LXBrJylcclxuICAgICAgICBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICB2YXIgYWNjb3VudCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICBwbGF0Zm9ybSA9ICQoJyNwbGF0Zm9ybScpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKClcclxuICAgICAgICB0aXRsZSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCgpXHJcbiAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKClcclxuICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciB1cmwgPSAnJ1xyXG4gICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvZWRpdGFjY291bnQvJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvZGVhbC9hZGRhY2NvdW50LydcclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGxhdGZvcm0nOiBwbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc2tleSc6IGFjY2Vzc2tleSxcclxuICAgICAgICAgICAgICAgICdzZWNyZXRrZXknOiBzZWNyZXRrZXksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLnvJbovpHotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIua3u+WKoOi0puaIt+aIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuY2hhcmdlQWNjb3VudEV2ZW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jdXJyeS1jb25maXJtJylcclxuICAgIGNvbmZpcm1CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG51bSA9ICQoJyNjdXJyZW5jeS1udW1iZXInKS52YWwoKVxyXG4gICAgICAgIGN1cnJlbmN5ID0gJCgnI2N1cnJlbmN5JykudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhudW0sIGN1cnJlbmN5LCBwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2NoYXJnZWFjY291bnQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgICAgICdudW0nOiBudW0sXHJcbiAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuWinui1hOaIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5jdXl5ZW5jeVNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcubWVudGlvbi1tb25leScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmNhcnJ5V3JhcHBlci5zaG93KCk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNlbGYubGlzdGVuV2l0aERyYXcocGspXHJcblxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuaGlkZSgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuV2l0aERyYXcgPSBmdW5jdGlvbiAocGspIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBidG4gPSAkKCcuY2FycnktY29uZmlybScpXHJcbiAgICBjb25zb2xlLmxvZyhwaylcclxuICAgIGJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbnVtID0gJCgnI2NhcnJ5LWN1cnJlbmN5LW51bWJlcicpLnZhbCgpXHJcbiAgICAgICAgY3VycmVuY3kgPSAkKCcjY2FycnktY3VycmVuY3knKS52YWwoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiKlwiKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKG51bSwgY3VycmVuY3ksIHBrKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvd2l0aGRyYXcvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnbnVtJzogbnVtLFxyXG4gICAgICAgICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3ksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuaPkOW4geaIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUucmVmZXJzaEFjY291bnRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJyNkZXRhaWxzLXJlZmVyc2gnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzc2RmYXNcIilcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LnNob3coKVxyXG5cclxuICAgICAgICB9LCAxMDApO1xyXG5cclxuXHJcbiAgICAgICAgcGsgPSAkKHRoaXMpLmF0dHIoJ3Byb3BlcnR5LWlkJylcclxuICAgICAgICAvLyB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgIC8vICAgICAndXJsJzogJy9kZWFsL3Nob3dhc3NlcnQvJyxcclxuICAgICAgICAvLyAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgLy8gICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCApe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9wZXJ0aWVzKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgncHJvcGVydHktZGV0YWlscycseydwcm9wZXJ0aWVzJzpwcm9wZXJ0aWVzfSlcclxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgYWNjb3VudFByb3BlcnR5ID0gJCgnI3Byb3BlcnR5LWRldGFpbHMtaWRzJylcclxuICAgICAgICAvLyAgICAgICAgICAgICBhY2NvdW50UHJvcGVydHkucmVwbGFjZSh0cGwpXHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuYWNjb3VudEN1dXJyZW5jeUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFjY291bnQgPSBbXVxyXG4gICAgJChcImlucHV0W2NsYXNzPSdhY2NvdW50LWNoY2VrYm94J106Y2hlY2tib3hcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykucHJvcCgnY2hlY2tlZCcpID09IHRydWUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgICAgICB2YXIgYWNjb3VudF9pZCA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgYWNjb3VudC5wdXNoKGFjY291bnRfaWQpXHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIGFjY291bnRcclxuXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmFkZEFjY291bnRDdXJyZW5jeUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnI2FkZC1jdXJyZW5jeS1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbmN5ID0gJCgnI2FkZC1uZXctY3VycmVuY3knKS52YWwoKVxyXG4gICAgICAgICQoJy5jdXJyZW5jeS1jaGVjay1jb250ZW50JykuYXBwZW5kKFwiIDxkaXYgY2xhc3M9XFxcImNoZWNrYm94XFxcIj5cXG5cIiArXHJcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSdzZGZhc2QnPjxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgY2xhc3M9XFxcImN1cnJlbmN5LWNoZWNrYm94XFxcIiB2YWx1ZT1cIiArIGN1cnJlbmN5ICsgXCI+XCIgKyBjdXJyZW5jeSArIFwiPC9sYWJlbD5cXG5cIiArXHJcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cIilcclxuXHJcbiAgICB9KVxyXG5cclxuXHJcbn1cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFjY291bnQgPSBuZXcgQWNjb3VudCgpO1xyXG4gICAgYWNjb3VudC5ydW4oKTtcclxufSkiXX0=
