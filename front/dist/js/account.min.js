function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper"),t.carryWrapper=$(".account-carry-curry-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount(),t.listendenominationEvent(),t.listtencuyyencyShow()},Account.prototype.listenShowHideAddAccount=function(){var c=this,t=$(".close-btn");$("#add-account-btn").click(function(){c.accountWrapper.show()}),$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");c.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:t},success:function(t){200===t.code&&(account=t.data,console.log(account),tpl=template("add-accountInfo",{account:account}),console.log(tpl),$(".account-body").append(tpl))}})}),t.click(function(){c.accountWrapper.hide()}),$(".cancel").click(function(){c.accountWrapper.hide()})},Account.prototype.listendenominationEvent=function(){$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show()}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()}),$(".cancel").click(function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,c=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),c.click(function(){t.totalProperty.hide()}),$(".cancel").click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var c=this,t=$(".close-btn");$(".add-property").click(function(){c.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.chargeAccountEvent(t)}),t.click(function(){c.curryWrapper.hide()}),$(".cancel").click(function(){c.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var c=this,t=$(".close-btn");$(".check-property").on("click",function(){c.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");$(".refersh").attr("property-id",t),xfzajax.post({url:"/deal/showassert/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){datas=t.data;var c=datas.Platform_name,n=datas.asset_change,e=datas.original_assets,o=datas.history_profit,a=datas.withdraw_record,r=datas.assets_dict;datas.profit_loss_dict;$(".property-account-value").text(c);var i=$(".property-details-wrapper");i.find(".assets-change .number").text(n.number),i.find(".assets-change .percentage").text(n.percent),i.find(".initial-asset .number").text(e),i.find(".curry-account-total .total-number").text(a),i.find(".history-profit  .number").text(o.number),i.find(".history-profit .percentage").text(o.percent);$("#property-details");$.each(r,function(t,c){console.log(t),$.each(c,function(t,c){console.log(c)})})}}})}),t.click(function(){c.detailsProperty.hide()}),$(".cancel").click(function(){c.detailsProperty.hide()})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(){$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id"),c=$(".account-body");platform=$("#platform").find("option:selected").val(),title=c.find("input[name='account-name']").val(),accesskey=c.find("input[name='access']").val(),secretkey=c.find("input[name='scrent']").val();var n="";n=t?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:n,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(){$(".confirm").click(function(){var t=$(this).parent().parent().attr("data-id"),c=$(".account-body");platform=$("#platform").find("option:selected").val(),title=c.find("input[name='account-name']").val(),accesskey=c.find("input[name='access']").val(),secretkey=c.find("input[name='scrent']").val();var n="";n=t?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:n,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},Account.prototype.listtencuyyencyShow=function(){var c=this,t=$(".close-btn");$(".mention-money").click(function(){c.carryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.listenWithDraw(t)}),t.click(function(){c.carryWrapper.hide()}),$(".cancel").click(function(){c.carryWrapper.hide()})},Account.prototype.listenWithDraw=function(t){$(".carry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/withdraw/",data:{num:num,currency:currency,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("提币成功",function(){window.location.reload()})}})})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsImNhcnJ5V3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImxpc3R0ZW5jdXl5ZW5jeVNob3ciLCJjbG9zZUJ0biIsImNsaWNrIiwic2hvdyIsIm9uIiwicGsiLCJwYXJlbnQiLCJhdHRyIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImFjY291bnQiLCJjb25zb2xlIiwibG9nIiwidHBsIiwidGVtcGxhdGUiLCJhcHBlbmQiLCJoaWRlIiwiY2hhcmdlQWNjb3VudEV2ZW50IiwiZGF0YXMiLCJwbGF0Zm9ybSIsImFzc2V0X2NoYW5nZSIsIm9yaWdpbmFsX2Fzc2V0cyIsImhpc3RvcnlfcHJvZml0Iiwid2l0aGRyYXdfcmVjb3JkIiwiYXNzZXRzX2RpY3QiLCJ0ZXh0IiwiZGV0YWlsc0dyb3VwIiwiZmluZCIsImVhY2giLCJrZXkiLCJ2YWx1ZSIsImoiLCJrIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0aXRsZSIsImNvbmZpcm1DYWxsYmFjayIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibGlzdGVuRWRpdEFjY291bnQiLCJ2YWwiLCJhY2Nlc3NrZXkiLCJzZWNyZXRrZXkiLCJhbGVydFN1Y2Nlc3MiLCJudW0iLCJjdXJyZW5jeSIsImxpc3RlbldpdGhEcmF3Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxVQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLGVBQWlCQyxFQUFFLHdCQUN4QkgsRUFBS0ksYUFBZUQsRUFBRSwwQkFDdEJILEVBQUtLLGNBQWdCRixFQUFFLDJCQUN2QkgsRUFBS00sZ0JBQWtCSCxFQUFFLDZCQUN6QkgsRUFBS08sYUFBZUosRUFBRSxnQ0FLMUJKLFFBQVFTLFVBQVVDLElBQU0sV0FDcEIsSUFBSVQsRUFBT0MsS0FDWEQsRUFBS1UsMkJBQ0xWLEVBQUtXLDZCQUNMWCxFQUFLWSxpQ0FDTFosRUFBS2EsaUNBQ0xiLEVBQUtjLCtCQUNMZCxFQUFLZSxtQ0FDTGYsRUFBS2dCLGdCQUNMaEIsRUFBS2lCLHNCQUNMakIsRUFBS2tCLDBCQUNMbEIsRUFBS21CLHVCQU1UcEIsUUFBUVMsVUFBVUUseUJBQTJCLFdBQ3pDLElBQUlWLEVBQU9DLEtBQ1BtQixFQUFXakIsRUFBRSxjQUNqQkEsRUFBRSxvQkFBb0JrQixNQUFNLFdBQ3hCckIsRUFBS0UsZUFBZW9CLFNBRXhCbkIsRUFBRSxvQkFBb0JvQixHQUFHLFFBQVMsV0FDOUIsSUFFSUMsRUFGYXJCLEVBQUVGLE1BQ0N3QixTQUFTQSxTQUNqQkMsS0FBSyxXQUNqQjFCLEVBQUtFLGVBQWVvQixPQUNwQkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLHFCQUNQQyxLQUFRLENBQ0pOLEdBQU1BLEdBRVZPLFFBQVUsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxPQUNaQyxRQUFVRCxFQUFhLEtBQ3ZCRSxRQUFRQyxJQUFJRixTQUNaRyxJQUFNQyxTQUFTLGtCQUFrQixDQUFDSixRQUFVQSxVQUM1Q0MsUUFBUUMsSUFBSUMsS0FDT2pDLEVBQUUsaUJBQ1JtQyxPQUFPRixXQUtwQ2hCLEVBQVNDLE1BQU0sV0FDWHJCLEVBQUtFLGVBQWVxQyxTQUV4QnBDLEVBQUUsV0FBV2tCLE1BQU0sV0FD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QUd4QkosRUFBU0MsTUFBTSxXQUNYckIsRUFBS08sYUFBYWdDLFNBRXRCcEMsRUFBRSxXQUFXa0IsTUFBTSxXQUNmckIsRUFBS08sYUFBYWdDLFVBTTFCeEMsUUFBUVMsVUFBVThELGVBQWlCLFNBQVU5QyxHQUUvQnJCLEVBQUUsa0JBQ1JrQixNQUFNLFdBQ04rQyxJQUFNakUsRUFBRSxvQkFBb0I2RCxNQUM1QkssU0FBV2xFLEVBQUUsYUFBYTZELE1BQzFCOUIsUUFBUUMsSUFBSSxLQUNaRCxRQUFRQyxJQUFJaUMsSUFBS0MsU0FBVTdDLEdBQzNCRyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sa0JBQ1BDLEtBQVEsQ0FDSnNDLElBQU9BLElBQ1BDLFNBQVlBLFNBQ1o3QyxHQUFNQSxHQUVWTyxRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsTUFDYndCLFNBQVNXLGFBQWEsT0FBUSxXQUMxQlAsT0FBT0MsU0FBU0MsaUJBUXhDM0QsRUFBRSxZQUNnQixJQUFJSixTQUNWVSIsImZpbGUiOiJhY2NvdW50Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEFjY291bnQoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmFjY291bnRXcmFwcGVyID0gJCgnLmFkZC1hY2NvdW50LXdyYXBwZXInKTtcclxuICAgIHNlbGYuY3VycnlXcmFwcGVyID0gJCgnLmFjY291bnQtY3Vycnktd3JhcHBlcicpO1xyXG4gICAgc2VsZi50b3RhbFByb3BlcnR5ID0gJCgnLnByb3BlcnR5LXRvdGFsLXdyYXBwZXInKTtcclxuICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5ID0gJCgnLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlcicpO1xyXG4gICAgc2VsZi5jYXJyeVdyYXBwZXIgPSAkKCcuYWNjb3VudC1jYXJyeS1jdXJyeS13cmFwcGVyJyk7XHJcblxyXG59O1xyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyKCk7XHJcbiAgICBzZWxmLmxpc3RQcm9wZXJ0eVRvdGFsU2hvd0hpZGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Qcm9wZXJ0eURldGFpbHNTaG93RXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0dGVuUHJvcGVydHlEZXRhaWxzQ2xvc2VFdmVudCgpO1xyXG4gICAgc2VsZi5kZWxldGVBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuZGVub21pbmF0aW9uRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlbmN1eXllbmN5U2hvdygpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5FZGl0QWNjb3VudCgpO1xyXG5cclxufVxyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblNob3dIaWRlQWRkQWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJyNhZGQtYWNjb3VudC1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5zaG93KClcclxuICAgIH0pO1xyXG4gICAgJCgnLnVwZGF0ZS1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5zaG93KClcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2FjY291bnRpbmZvLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHRwbCA9IHRlbXBsYXRlKCdhZGQtYWNjb3VudEluZm8nLHtcImFjY291bnRcIjphY2NvdW50fSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cGwpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRHcm91cCA9ICQoJy5hY2NvdW50LWJvZHknKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRHcm91cC5hcHBlbmQodHBsKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5oaWRlKClcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbmRlbm9taW5hdGlvbkV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICQoJyNhY2NvdW50LWN1cnJ5LWNvbmZpZ3VyYXRpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1tYXNrLWFjY291bnQtd3JhcHBlcicpLnNob3coKTtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLWFjY291bnQtd3JhcHBlcicpLnNob3coKTtcclxuICAgIH0pXHJcblxyXG4gICAgJCgnLmRlbm9taW5hdGlvbi1jbG9zZS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1tYXNrLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1tYXNrLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLWFjY291bnQtd3JhcHBlcicpLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0UHJvcGVydHlUb3RhbFNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcjcHJvcGVydHktdG90YWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LnNob3coKVxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LmhpZGUoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudG90YWxQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLmFkZC1wcm9wZXJ0eScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5zaG93KClcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgc2VsZi5jaGFyZ2VBY2NvdW50RXZlbnQocGspXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuVG9hbEFjY291bnRDbG9zZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnByb3BlcnR5LWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucHJvcGVydHktdG90YWwtd3JhcHBlcicpLmhpZGUoKVxyXG4gICAgfSlcclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnByb3BlcnR5LWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucHJvcGVydHktZGV0YWlscy13cmFwcGVyJykuaGlkZSgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLmNoZWNrLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LnNob3coKVxyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAkKCcucmVmZXJzaCcpLmF0dHIoJ3Byb3BlcnR5LWlkJywgcGspXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9zaG93YXNzZXJ0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFzID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGxhdGZvcm0gPSBkYXRhc1snUGxhdGZvcm1fbmFtZSddICAvL+W5s+WPsOWQjeensFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NldF9jaGFuZ2UgPSBkYXRhc1snYXNzZXRfY2hhbmdlJ10gIC8v5LuK5pel6LWE5Lqn5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsX2Fzc2V0cyA9IGRhdGFzWydvcmlnaW5hbF9hc3NldHMnXSAvL+WIneWni+i1hOS6p1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoaXN0b3J5X3Byb2ZpdCA9IGRhdGFzWydoaXN0b3J5X3Byb2ZpdCddIC8v5Y6G5Y+y55uI5LqPXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpdGhkcmF3X3JlY29yZCA9IGRhdGFzWyd3aXRoZHJhd19yZWNvcmQnXSAvL+aAu+aPkOW4gVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NldHNfZGljdCA9IGRhdGFzWydhc3NldHNfZGljdCddICAgLy/otYTkuqfooahcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZml0X2xvc3NfZGljdCA9IGRhdGFzWydwcm9maXRfbG9zc19kaWN0J10gLy/mjZ/nm4rooahcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb3BlcnR5LWFjY291bnQtdmFsdWUnKS50ZXh0KHBsYXRmb3JtKSAgLy/mj5LlhaXlubPlj7DliLBodG1s5LitXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbHNHcm91cCA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNHcm91cC5maW5kKCcuYXNzZXRzLWNoYW5nZSAubnVtYmVyJykudGV4dChhc3NldF9jaGFuZ2VbJ251bWJlciddKSAvL+i1hOS6p+WPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNHcm91cC5maW5kKCcuYXNzZXRzLWNoYW5nZSAucGVyY2VudGFnZScpLnRleHQoYXNzZXRfY2hhbmdlWydwZXJjZW50J10pIC8v6LWE5Lqn5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0dyb3VwLmZpbmQoJy5pbml0aWFsLWFzc2V0IC5udW1iZXInKS50ZXh0KG9yaWdpbmFsX2Fzc2V0cykgLy/liJ3lp4vlj5jljJZcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0dyb3VwLmZpbmQoJy5jdXJyeS1hY2NvdW50LXRvdGFsIC50b3RhbC1udW1iZXInKS50ZXh0KHdpdGhkcmF3X3JlY29yZCkgLy/mgLvorqHmj5DluIFcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0dyb3VwLmZpbmQoJy5oaXN0b3J5LXByb2ZpdCAgLm51bWJlcicpLnRleHQoaGlzdG9yeV9wcm9maXRbJ251bWJlciddKSAvL+aAu+iuoeaPkOW4gVxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNHcm91cC5maW5kKCcuaGlzdG9yeS1wcm9maXQgLnBlcmNlbnRhZ2UnKS50ZXh0KGhpc3RvcnlfcHJvZml0WydwZXJjZW50J10pIC8v5oC76K6h5o+Q5biBXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciB0cGwxID0gdGVtcGxhdGUoXCJcIix7XCJhc3NldHNfZGljdFwiOmFzc2V0c19kaWN0fSlcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsMiA9IHRlbXBsYXRlKFwiXCIse1wicHJvZml0X2xvc3NfZGljdFwiOnByb2ZpdF9sb3NzX2RpY3R9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciB0cGwgPSB0ZW1wbGF0ZShcImRldGFpbHMtaXRlbVwiLHtcImRhdGFzXCI6ZGF0YXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBkZXRhaWxzR3JvdXAgPSAkKFwiLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuYXBwZW5kKHRwbClcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlsc1RhYiA9ICQoJyNwcm9wZXJ0eS1kZXRhaWxzJylcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdGQgPSBkZXRhaWxzVGFiLmZpbmQoXCJ0Ym9keSB0ciB0ZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChhc3NldHNfZGljdCwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coa2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2godmFsdWUsIGZ1bmN0aW9uIChqLCBrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmRlbGV0ZUFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcuZGVsZXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAndGl0bGUnOiAn5oKo56Gu5a6a5Yig6Zmk6L+Z5Liq6LSm5oi35ZCX77yfJyxcclxuICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9kZWxldGVhY2NvdW50LycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuRWRpdEFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcudXBkYXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICB2YXIgYWNjb3VudCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICBwbGF0Zm9ybSA9ICQoJyNwbGF0Zm9ybScpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKClcclxuICAgICAgICB0aXRsZSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCgpXHJcbiAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKClcclxuICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciB1cmwgPSAnJ1xyXG4gICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvZWRpdGFjY291bnQvJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvZGVhbC9hZGRhY2NvdW50LydcclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGxhdGZvcm0nOiBwbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc2tleSc6IGFjY2Vzc2tleSxcclxuICAgICAgICAgICAgICAgICdzZWNyZXRrZXknOiBzZWNyZXRrZXksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIua3u+WKoOi0puaIt+aIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSlcclxuXHJcbn1cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU3VibWl0QWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBjb25maXJtQnRuID0gJCgnLmNvbmZpcm0nKTtcclxuXHJcbiAgICBjb25maXJtQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB2YXIgdXJsID0gJydcclxuICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgdXJsID0gJy9kZWFsL2VkaXRhY2NvdW50LydcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvYWRkYWNjb3VudC8nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmNoYXJnZUFjY291bnRFdmVudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY3VycnktY29uZmlybScpXHJcbiAgICBjb25maXJtQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBudW0gPSAkKCcjY3VycmVuY3ktbnVtYmVyJykudmFsKClcclxuICAgICAgICBjdXJyZW5jeSA9ICQoJyNjdXJyZW5jeScpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCIqXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2cobnVtLCBjdXJyZW5jeSwgcGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9jaGFyZ2VhY2NvdW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAnbnVtJzogbnVtLFxyXG4gICAgICAgICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3ksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLlop7otYTmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuY3V5eWVuY3lTaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLm1lbnRpb24tbW9uZXknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmxpc3RlbldpdGhEcmF3KHBrKVxyXG5cclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbldpdGhEcmF3ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYnRuID0gJCgnLmNhcnJ5LWNvbmZpcm0nKVxyXG4gICAgYnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBudW0gPSAkKCcjY3VycmVuY3ktbnVtYmVyJykudmFsKClcclxuICAgICAgICBjdXJyZW5jeSA9ICQoJyNjdXJyZW5jeScpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCIqXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2cobnVtLCBjdXJyZW5jeSwgcGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC93aXRoZHJhdy8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdudW0nOiBudW0sXHJcbiAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeSxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5o+Q5biB5oiQ5YqfXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY2NvdW50ID0gbmV3IEFjY291bnQoKTtcclxuICAgIGFjY291bnQucnVuKCk7XHJcbn0pIl19
