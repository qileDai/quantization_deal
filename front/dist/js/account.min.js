function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount()},Account.prototype.listenShowHideAddAccount=function(){var e=this,t=$(".close-btn");$("#add-account-btn").click(function(){e.accountWrapper.show()}),$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");e.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:t}})}),t.click(function(){e.accountWrapper.hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,e=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),e.click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var e=this,t=$(".close-btn");$(".add-property").click(function(){e.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");e.chargeAccountEvent(t)}),t.click(function(){e.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var e=this,t=$(".close-btn");$(".check-property").on("click",function(){e.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");xfzajax.post({url:"/deal/showassert/",data:{pk:t}})}),t.click(function(){e.detailsProperty.hide()})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(){$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id"),e=$(".account-body");platform=$("#platform").find("option:selected").val(),title=e.find("input[name='account-name']").val(),accesskey=e.find("input[name='access']").val(),secretkey=e.find("input[name='scrent']").val();var c="";c=t?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:c,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(){$(".confirm").click(function(){var t=$(this).parent().parent().attr("data-id"),e=$(".account-body");platform=$("#platform").find("option:selected").val(),title=e.find("input[name='account-name']").val(),accesskey=e.find("input[name='access']").val(),secretkey=e.find("input[name='scrent']").val();var c="";c=t?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:c,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJjbG9zZUJ0biIsImNsaWNrIiwic2hvdyIsIm9uIiwicGsiLCJwYXJlbnQiLCJhdHRyIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwiaGlkZSIsImNoYXJnZUFjY291bnRFdmVudCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGl0bGUiLCJjb25maXJtQ2FsbGJhY2siLCJzdWNjZXNzIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibGlzdGVuRWRpdEFjY291bnQiLCJhY2NvdW50IiwicGxhdGZvcm0iLCJmaW5kIiwidmFsIiwiYWNjZXNza2V5Iiwic2VjcmV0a2V5IiwiYWxlcnRTdWNjZXNzIiwibnVtIiwiY3VycmVuY3kiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFVBQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsZUFBaUJDLEVBQUUsd0JBQ3hCSCxFQUFLSSxhQUFlRCxFQUFFLDBCQUN0QkgsRUFBS0ssY0FBZ0JGLEVBQUUsMkJBQ3ZCSCxFQUFLTSxnQkFBa0JILEVBQUUsNkJBSzdCSixRQUFRUSxVQUFVQyxJQUFNLFdBQ3BCLElBQUlS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QW5CQSxFQUFhLE1BQ2JMLFNBQVNrQixhQUFhLE9BQVEsV0FDMUJWLE9BQU9DLFNBQVNDLGlCQVN4Q3JDLEVBQUUsWUFDZ0IsSUFBSUosU0FDVlMiLCJmaWxlIjoiYWNjb3VudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBBY2NvdW50KCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5hY2NvdW50V3JhcHBlciA9ICQoJy5hZGQtYWNjb3VudC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmN1cnJ5V3JhcHBlciA9ICQoJy5hY2NvdW50LWN1cnJ5LXdyYXBwZXInKTtcclxuICAgIHNlbGYudG90YWxQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKTtcclxuXHJcbn07XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUFkZEFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVDdXJyeVdyYXBwZXIoKTtcclxuICAgIHNlbGYubGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblByb3BlcnR5RGV0YWlsc1Nob3dFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0dGVuVG9hbEFjY291bnRDbG9zZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50KCk7XHJcbiAgICBzZWxmLmRlbGV0ZUFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0QWNjb3VudCgpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5FZGl0QWNjb3VudCgpO1xyXG5cclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnI2FkZC1hY2NvdW50LWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgfSk7XHJcbiAgICAkKCcudXBkYXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvYWNjb3VudGluZm8vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuaGlkZSgpXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0UHJvcGVydHlUb3RhbFNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcjcHJvcGVydHktdG90YWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LnNob3coKVxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LmhpZGUoKVxyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUN1cnJ5V3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJy5hZGQtcHJvcGVydHknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuc2hvdygpXHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNlbGYuY2hhcmdlQWNjb3VudEV2ZW50KHBrKVxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuVG9hbEFjY291bnRDbG9zZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnByb3BlcnR5LWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucHJvcGVydHktdG90YWwtd3JhcHBlcicpLmhpZGUoKVxyXG4gICAgfSlcclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnByb3BlcnR5LWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucHJvcGVydHktZGV0YWlscy13cmFwcGVyJykuaGlkZSgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLmNoZWNrLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LnNob3coKVxyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3Nob3dhc3NlcnQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwic3VjZWVzZWVcIilcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgLy8gICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgZGF0YXMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGRhdGFzWydQbGF0Zm9ybV9uYW1lJ10pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZGF0YXNbJ2Fzc2V0X2NoYW5nZSddKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGRhdGFzWydhc3NldHNfZGljdCddKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGRhdGFzWydoaXN0b3J5X3Byb2ZpdCddKVxyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuZGVsZXRlQWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy5kZWxldGUtcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICd0aXRsZSc6ICfmgqjnoa7lrprliKDpmaTov5nkuKrotKbmiLflkJfvvJ8nLFxyXG4gICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9kZWFsL2RlbGV0ZWFjY291bnQvJyxcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5FZGl0QWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy51cGRhdGUtcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHZhciBhY2NvdW50ID0gJCgnLmFjY291bnQtYm9keScpO1xyXG4gICAgICAgIHBsYXRmb3JtID0gJCgnI3BsYXRmb3JtJykuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKVxyXG4gICAgICAgIHRpdGxlID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjb3VudC1uYW1lJ11cIikudmFsKClcclxuICAgICAgICBhY2Nlc3NrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2Nlc3MnXVwiKS52YWwoKVxyXG4gICAgICAgIHNlY3JldGtleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J3NjcmVudCddXCIpLnZhbCgpXHJcbiAgICAgICAgdmFyIHVybCA9ICcnXHJcbiAgICAgICAgaWYgKHBrKSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvZGVhbC9lZGl0YWNjb3VudC8nXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXJsID0gJy9kZWFsL2FkZGFjY291bnQvJ1xyXG4gICAgICAgIH1cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwbGF0Zm9ybSc6IHBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnYWNjZXNza2V5JzogYWNjZXNza2V5LFxyXG4gICAgICAgICAgICAgICAgJ3NlY3JldGtleSc6IHNlY3JldGtleSxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5re75Yqg6LSm5oi35oiQ5Yqf77yBXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KVxyXG5cclxufVxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TdWJtaXRBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY29uZmlybScpO1xyXG5cclxuICAgIGNvbmZpcm1CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICB2YXIgYWNjb3VudCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICBwbGF0Zm9ybSA9ICQoJyNwbGF0Zm9ybScpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKClcclxuICAgICAgICB0aXRsZSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCgpXHJcbiAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKClcclxuICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciB1cmwgPSAnJ1xyXG4gICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvZWRpdGFjY291bnQvJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvZGVhbC9hZGRhY2NvdW50LydcclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGxhdGZvcm0nOiBwbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc2tleSc6IGFjY2Vzc2tleSxcclxuICAgICAgICAgICAgICAgICdzZWNyZXRrZXknOiBzZWNyZXRrZXksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIua3u+WKoOi0puaIt+aIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuY2hhcmdlQWNjb3VudEV2ZW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jdXJyeS1jb25maXJtJylcclxuICAgIGNvbmZpcm1CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG51bSA9ICQoJyNjdXJyZW5jeS1udW1iZXInKS52YWwoKVxyXG4gICAgICAgIGN1cnJlbmN5ID0gJCgnI2N1cnJlbmN5JykudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhudW0sIGN1cnJlbmN5LCBwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2NoYXJnZWFjY291bnQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgICAgICdudW0nOiBudW0sXHJcbiAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuWinui1hOaIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY2NvdW50ID0gbmV3IEFjY291bnQoKTtcclxuICAgIGFjY291bnQucnVuKCk7XHJcbn0pIl19
