function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount(),t.listendenominationEvent()},Account.prototype.listenShowHideAddAccount=function(){var n=this,t=$(".close-btn");$("#add-account-btn").click(function(){n.accountWrapper.show()}),$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");n.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:t}})}),t.click(function(){n.accountWrapper.hide()})},Account.prototype.listendenominationEvent=function(){$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show()}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,n=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),n.click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var n=this,t=$(".close-btn");$(".add-property").click(function(){n.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");n.chargeAccountEvent(t)}),t.click(function(){n.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var n=this,t=$(".close-btn");$(".check-property").on("click",function(){n.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");xfzajax.post({url:"/deal/showassert/",data:{pk:t}})}),t.click(function(){n.detailsProperty.hide()})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(){$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id"),n=$(".account-body");platform=$("#platform").find("option:selected").val(),title=n.find("input[name='account-name']").val(),accesskey=n.find("input[name='access']").val(),secretkey=n.find("input[name='scrent']").val();var c="";c=t?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:c,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(){$(".confirm").click(function(){var t=$(this).parent().parent().attr("data-id"),n=$(".account-body");platform=$("#platform").find("option:selected").val(),title=n.find("input[name='account-name']").val(),accesskey=n.find("input[name='access']").val(),secretkey=n.find("input[name='scrent']").val();var c="";c=t?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:c,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImNsb3NlQnRuIiwiY2xpY2siLCJzaG93Iiwib24iLCJwayIsInBhcmVudCIsImF0dHIiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJoaWRlIiwiY2hhcmdlQWNjb3VudEV2ZW50IiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0aXRsZSIsImNvbmZpcm1DYWxsYmFjayIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJsaXN0ZW5FZGl0QWNjb3VudCIsImFjY291bnQiLCJwbGF0Zm9ybSIsImZpbmQiLCJ2YWwiLCJhY2Nlc3NrZXkiLCJzZWNyZXRrZXkiLCJhbGVydFN1Y2Nlc3MiLCJudW0iLCJjdXJyZW5jeSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsVUFDTCxJQUFJQyxFQUFPQyxLQUNYRCxFQUFLRSxlQUFpQkMsRUFBRSx3QkFDeEJILEVBQUtJLGFBQWVELEVBQUUsMEJBQ3RCSCxFQUFLSyxjQUFnQkYsRUFBRSwyQkFDdkJILEVBQUtNLGdCQUFrQkgsRUFBRSw2QkFLN0JKLFFB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RUFBRSxrQkFDUmdCLE1BQU0sV0FDYitCLElBQU0vQyxFQUFFLG9CQUFvQjJDLE1BQzVCSyxTQUFXaEQsRUFBRSxhQUFhMkMsTUFDMUJULFFBQVFDLElBQUksS0FDWkQsUUFBUUMsSUFBSVksSUFBS0MsU0FBVTdCLEdBQzNCRyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sdUJBQ1BDLEtBQVEsQ0FDSk4sR0FBTUEsRUFDTjRCLElBQU9BLElBQ1BDLFNBQVlBLFVBRWhCaEIsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE1BQ2JMLFNBQVNrQixhQUFhLE9BQVEsV0FDMUJWLE9BQU9DLFNBQVNDLGlCQVN4Q3RDLEVBQUUsWUFDZ0IsSUFBSUosU0FDVlMiLCJmaWxlIjoiYWNjb3VudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBBY2NvdW50KCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5hY2NvdW50V3JhcHBlciA9ICQoJy5hZGQtYWNjb3VudC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmN1cnJ5V3JhcHBlciA9ICQoJy5hY2NvdW50LWN1cnJ5LXdyYXBwZXInKTtcclxuICAgIHNlbGYudG90YWxQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKTtcclxuXHJcbn07XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUFkZEFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVDdXJyeVdyYXBwZXIoKTtcclxuICAgIHNlbGYubGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblByb3BlcnR5RGV0YWlsc1Nob3dFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0dGVuVG9hbEFjY291bnRDbG9zZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50KCk7XHJcbiAgICBzZWxmLmRlbGV0ZUFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0QWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5kZW5vbWluYXRpb25FdmVudCgpO1xyXG4gICAgLy8gc2VsZi5saXN0ZW5FZGl0QWNjb3VudCgpO1xyXG5cclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnI2FkZC1hY2NvdW50LWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgfSk7XHJcbiAgICAkKCcudXBkYXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvYWNjb3VudGluZm8vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuaGlkZSgpXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuZGVub21pbmF0aW9uRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJCgnI2FjY291bnQtY3VycnktY29uZmlndXJhdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuc2hvdygpO1xyXG4gICAgfSlcclxuXHJcbiAgICAkKCcuZGVub21pbmF0aW9uLWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG5cclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RQcm9wZXJ0eVRvdGFsU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJyNwcm9wZXJ0eS10b3RhbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuc2hvdygpXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuaGlkZSgpXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLmFkZC1wcm9wZXJ0eScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5zaG93KClcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgc2VsZi5jaGFyZ2VBY2NvdW50RXZlbnQocGspXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5Ub2FsQWNjb3VudENsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJykuaGlkZSgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdHRlblByb3BlcnR5RGV0YWlsc0Nsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKS5oaWRlKClcclxuICAgIH0pXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5Qcm9wZXJ0eURldGFpbHNTaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcuY2hlY2stcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuc2hvdygpXHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBrKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvc2hvd2Fzc2VydC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwayc6IHBrXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coXCJzdWNlZXNlZVwiKVxyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAvLyAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBkYXRhcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZGF0YXNbJ1BsYXRmb3JtX25hbWUnXSlcclxuICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhkYXRhc1snYXNzZXRfY2hhbmdlJ10pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZGF0YXNbJ2Fzc2V0c19kaWN0J10pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZGF0YXNbJ2hpc3RvcnlfcHJvZml0J10pXHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5kZWxldGVBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgJCgnLmRlbGV0ZS1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcclxuICAgICAgICAgICAgJ3RpdGxlJzogJ+aCqOehruWumuWIoOmZpOi/meS4qui0puaIt+WQl++8nycsXHJcbiAgICAgICAgICAgICdjb25maXJtQ2FsbGJhY2snOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvZGVsZXRlYWNjb3VudC8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbkVkaXRBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgJCgnLnVwZGF0ZS1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB2YXIgdXJsID0gJydcclxuICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgdXJsID0gJy9kZWFsL2VkaXRhY2NvdW50LydcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvYWRkYWNjb3VudC8nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pXHJcblxyXG59XHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblN1Ym1pdEFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jb25maXJtJyk7XHJcblxyXG4gICAgY29uZmlybUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHZhciBhY2NvdW50ID0gJCgnLmFjY291bnQtYm9keScpO1xyXG4gICAgICAgIHBsYXRmb3JtID0gJCgnI3BsYXRmb3JtJykuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKVxyXG4gICAgICAgIHRpdGxlID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjb3VudC1uYW1lJ11cIikudmFsKClcclxuICAgICAgICBhY2Nlc3NrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2Nlc3MnXVwiKS52YWwoKVxyXG4gICAgICAgIHNlY3JldGtleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J3NjcmVudCddXCIpLnZhbCgpXHJcbiAgICAgICAgdmFyIHVybCA9ICcnXHJcbiAgICAgICAgaWYgKHBrKSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvZGVhbC9lZGl0YWNjb3VudC8nXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXJsID0gJy9kZWFsL2FkZGFjY291bnQvJ1xyXG4gICAgICAgIH1cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwbGF0Zm9ybSc6IHBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnYWNjZXNza2V5JzogYWNjZXNza2V5LFxyXG4gICAgICAgICAgICAgICAgJ3NlY3JldGtleSc6IHNlY3JldGtleSxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5re75Yqg6LSm5oi35oiQ5Yqf77yBXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5jaGFyZ2VBY2NvdW50RXZlbnQgPSBmdW5jdGlvbiAocGspIHtcclxuICAgIHZhciBjb25maXJtQnRuID0gJCgnLmN1cnJ5LWNvbmZpcm0nKVxyXG4gICAgY29uZmlybUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbnVtID0gJCgnI2N1cnJlbmN5LW51bWJlcicpLnZhbCgpXHJcbiAgICAgICAgY3VycmVuY3kgPSAkKCcjY3VycmVuY3knKS52YWwoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiKlwiKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKG51bSwgY3VycmVuY3ksIHBrKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvY2hhcmdlYWNjb3VudC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICAgICAgJ251bSc6IG51bSxcclxuICAgICAgICAgICAgICAgICdjdXJyZW5jeSc6IGN1cnJlbmN5LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5aKe6LWE5oiQ5YqfXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFjY291bnQgPSBuZXcgQWNjb3VudCgpO1xyXG4gICAgYWNjb3VudC5ydW4oKTtcclxufSkiXX0=
