function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper"),t.carryWrapper=$(".account-carry-curry-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount(),t.listendenominationEvent(),t.listtencuyyencyShow(),t.showCollectAsset(),t.showDetailProperty(),t.refershAccountEvent(),t.accountCuurrencyEvent()},Account.prototype.showDetailProperty=function(){var c=this;$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");$("#add-account-pk").attr("account-pk",t),console.log(t),c.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){account=t.data,console.log(account);var c=$(".account-body");platform=account.platform.Platform_name,id=account.platform.id,console.log(platform),title=account.title,accesskey=account.accesskey,secretkey=account.secretkey,$("#platform option[value="+id+"]").prop("selected",!0),c.find("input[name='account-name']").val(title),c.find("input[name='access']").val(accesskey),c.find("input[name='scrent']").val(secretkey)}}})})},Account.prototype.listenShowHideAddAccount=function(){var t=this,c=$(".close-btn");$("#add-account-btn").click(function(){t.accountWrapper.show()}),c.click(function(){console.log("sssfsdf"),t.accountWrapper.hide(),window.location.reload()}),$(".cancel").click(function(){t.accountWrapper.hide(),window.location.reload()})},Account.prototype.listendenominationEvent=function(){var o=this.accountCuurrencyEvent();console.log(o),$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show();var c=[];$(".currency-checkbox").click(function(){var t=$(this).parent().text();console.log(t),c.push(t),$("#currency-add-btn").click(function(){xfzajax.post({url:"/deal/configcurrency/",data:{currency:c,account_list:o},success:function(t){console.log(t)}})})})}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()}),$(".cancel").click(function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,c=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),c.click(function(){t.totalProperty.hide()}),$(".cancel").click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var c=this,t=$(".close-btn");$(".add-property").click(function(){c.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.chargeAccountEvent(t)}),t.click(function(){c.curryWrapper.hide()}),$(".cancel").click(function(){c.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide(),window.location.reload()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var c=this,t=$(".close-btn");$(".check-property").on("click",function(){c.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");$(".refersh").attr("property-id",t),xfzajax.post({url:"/deal/showassert/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){datas=t.data;var c=t.data;console.log(c);var o=datas.Platform_name;$(".property-account-value").text(o);var n=template("property-details",{properties:c});$("#property-details-ids").append(n)}}})}),t.click(function(){c.detailsProperty.hide()}),$(".cancel").click(function(){c.detailsProperty.hide()})},Account.prototype.showCollectAsset=function(){var t=this.accountCuurrencyEvent();console.log(t),$("#property-total").click(function(){xfzajax.post({url:"/deal/showcollectasset/",data:{account_list:t},success:function(t){console.log(t)}})})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(c){$(".confirm").on("click",function(){var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val(),xfzajax.post({url:"/deal/editaccount/",data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(t){$(".confirm").click(function(){var c=$(this).attr("account-pk");console.log(c);var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val();var o="";o=c?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:o,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&(c?xfzalert.alertSuccess("编辑账户成功！",function(){window.location.reload()}):xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()}))}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},Account.prototype.listtencuyyencyShow=function(){var c=this,t=$(".close-btn");$(".mention-money").click(function(){c.carryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.listenWithDraw(t)}),t.click(function(){c.carryWrapper.hide()}),$(".cancel").click(function(){c.carryWrapper.hide()})},Account.prototype.listenWithDraw=function(t){var c=$(".carry-confirm");console.log(t),c.click(function(){num=$("#carry-currency-number").val(),currency=$("#carry-currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/withdraw/",data:{num:num,currency:currency,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("提币成功",function(){window.location.reload()})}})})},Account.prototype.refershAccountEvent=function(){var t=this;$("#details-refersh").click(function(){console.log("ssdfas"),t.detailsProperty.hide(),setTimeout(function(){t.detailsProperty.show()},100),pk=$(this).attr("property-id")})},Account.prototype.accountCuurrencyEvent=function(){var c=[];return $(".account-chcekbox").click(function(){var t=$(this).parent().parent().attr("data-id");c.push(t)}),c},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsImNhcnJ5V3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImxpc3R0ZW5jdXl5ZW5jeVNob3ciLCJzaG93Q29sbGVjdEFzc2V0Iiwic2hvd0RldGFpbFByb3BlcnR5IiwicmVmZXJzaEFjY291bnRFdmVudCIsImFjY291bnRDdXVycmVuY3lFdmVudCIsIm9uIiwicGsiLCJwYXJlbnQiLCJhdHRyIiwiY29uc29sZSIsImxvZyIsInNob3ciLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwiYWNjb3VudCIsImFjY291bnRHcm91cCIsInBsYXRmb3JtIiwiaWQiLCJ0aXRsZSIsImFjY2Vzc2tleSIsInNlY3JldGtleSIsInByb3AiLCJmaW5kIiwidmFsIiwiY2xvc2VCdG4iLCJjbGljayIsImhpZGUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImFjY291bnRfbGlzdCIsImN1cnJlbmN5X2xpc3QiLCJjdXJyZW5jeSIsInRleHQiLCJwdXNoIiwiY2hhcmdlQWNjb3VudEV2ZW50IiwiZGF0YXMiLCJwcm9wZXJ0aWVzIiwidHBsIiwidGVtcGxhdGUiLCJhcHBlbmQiLCJ4ZnphbGVydCIsImFsZXJ0Q29uZmlybSIsImNvbmZpcm1DYWxsYmFjayIsImxpc3RlbkVkaXRBY2NvdW50IiwiYWxlcnRTdWNjZXNzIiwibnVtIiwibGlzdGVuV2l0aERyYXciLCJidG4iLCJzZXRUaW1lb3V0IiwiYWNjb3VudF9pZCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsVUFDTCxJQUFJQyxFQUFPQyxLQUNYRCxFQUFLRSxlQUFpQkMsRUFBRSx3QkFDeEJILEVBQUtJLGFBQWVELEVBQUUsMEJBQ3RCSCxFQUFLSyxjQUFnQkYsRUFBRSwyQkFDdkJILEVBQUtNLGdCQUFrQkgsRUFBRSw2QkFDekJILEVBQUtPLGFBQWVKLEVBQUUsZ0NBSzFCSixRQUFRUyxVQUFVQyxJQUFNLFdBQ3BCLElBQUlULEVBQU9DLEtBQ1hELEVBQUtVLDJCQUNMVixFQUFLVyw2QkFDTFgsRUFBS1ksaUNBQ0xaLEVBQUthLGlDQUNMYixFQUFLYywrQkFDTGQsRUFBS2UsbUNBQ0xmLEVBQUtnQixnQkFDTGhCLEVBQUtpQixzQkFDTGpCLEVBQUtrQiwwQkFDTGxCLEVBQUttQixzQkFDTG5CLEVBQUtvQixtQkFDTHBCLEVBQUtxQixxQkFDTHJCLEVBQUtzQixzQkFDTHRCLEVBQUt1Qix5QkFRVHhCLFFBQVFTLFVBQVVhLG1CQUFxQixXQUNuQyxJQUFJckIsRUFBT0MsS0FDWEUsRUFBRSxvQkFBb0JxQixHQUFHLFFBQVMsV0FDOUIsSUFFSUMsRUFGYXRCLEVBQUVGLE1BQ0N5QixTQUFTQSxTQUNqQkMsS0FBSyxXQUNqQnhCLEVBQUUsbUJBQW1Cd0IsS0FBSyxhQUFjRixHQUN4Q0csUUFBUUMsSUFBSUosR0FDWnpCLEVBQUtFLGVBQWU0QixPQUNwQkMsUUFBUUMsS0FBSyxDQUNUQyxJQUFPLHFCQUNQQyxLQUFRLENBQ0pULEdBQU1BLEdBRVZVLFFBQVcsU0FBVUMsR0FFakIsR0FEQVIsUUFBUUMsSUFBSU8sR0FDVyxNQUFuQkEsRUFBYSxLQUFXLENBQ3hCQyxRQUFVRCxFQUFhLEtBQ3ZCUixRQUFRQyxJQUFJUSxTQUNa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UUMsSUFBSSxLQUNaRCxRQUFRQyxJQUFJd0MsSUFBS2QsU0FBVTlCLEdBQzNCTSxRQUFRQyxLQUFLLENBQ1RDLElBQU8sa0JBQ1BDLEtBQVEsQ0FDSm1DLElBQU9BLElBQ1BkLFNBQVlBLFNBQ1o5QixHQUFNQSxHQUVWVSxRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsTUFDYjRCLFNBQVNJLGFBQWEsT0FBUSxXQUMxQmxCLE9BQU9DLFNBQVNDLGlCQVF4Q3JELFFBQVFTLFVBQVVjLG9CQUFzQixXQUNwQyxJQUFJdEIsRUFBT0MsS0FDWEUsRUFBRSxvQkFBb0I2QyxNQUFNLFdBQ3hCcEIsUUFBUUMsSUFBSSxVQUNaN0IsRUFBS00sZ0JBQWdCMkMsT0FDckJ1QixXQUFXLFdBQ1B4RSxFQUFLTSxnQkFBZ0J3QixRQUV0QixLQUdITCxHQUFLdEIsRUFBRUYsTUFBTTBCLEtBQUssa0JBbUIxQjVCLFFBQVFTLFVBQVVlLHNCQUF3QixXQUN0QyxJQUFJYyxFQUFVLEdBT2QsT0FOQWxDLEVBQUUscUJBQXFCNkMsTUFBTSxXQUN6QixJQUVJeUIsRUFGYXRFLEVBQUVGLE1BQ0N5QixTQUFTQSxTQUNUQyxLQUFLLFdBQ3pCVSxFQUFRb0IsS0FBS2dCLEtBRVZwQyxHQUdYbEMsRUFBRSxZQUNnQixJQUFJSixTQUNWVSIsImZpbGUiOiJhY2NvdW50Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEFjY291bnQoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmFjY291bnRXcmFwcGVyID0gJCgnLmFkZC1hY2NvdW50LXdyYXBwZXInKTtcclxuICAgIHNlbGYuY3VycnlXcmFwcGVyID0gJCgnLmFjY291bnQtY3Vycnktd3JhcHBlcicpO1xyXG4gICAgc2VsZi50b3RhbFByb3BlcnR5ID0gJCgnLnByb3BlcnR5LXRvdGFsLXdyYXBwZXInKTtcclxuICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5ID0gJCgnLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlcicpO1xyXG4gICAgc2VsZi5jYXJyeVdyYXBwZXIgPSAkKCcuYWNjb3VudC1jYXJyeS1jdXJyeS13cmFwcGVyJyk7XHJcblxyXG59O1xyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyKCk7XHJcbiAgICBzZWxmLmxpc3RQcm9wZXJ0eVRvdGFsU2hvd0hpZGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Qcm9wZXJ0eURldGFpbHNTaG93RXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0dGVuUHJvcGVydHlEZXRhaWxzQ2xvc2VFdmVudCgpO1xyXG4gICAgc2VsZi5kZWxldGVBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuZGVub21pbmF0aW9uRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlbmN1eXllbmN5U2hvdygpO1xyXG4gICAgc2VsZi5zaG93Q29sbGVjdEFzc2V0KCk7XHJcbiAgICBzZWxmLnNob3dEZXRhaWxQcm9wZXJ0eSgpO1xyXG4gICAgc2VsZi5yZWZlcnNoQWNjb3VudEV2ZW50KCk7XHJcbiAgICBzZWxmLmFjY291bnRDdXVycmVuY3lFdmVudCgpXHJcbiAgICAvLyBzZWxmLmxpc3RlbkVkaXRBY2NvdW50KCk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICog6LSm5oi3XHJcbiAqL1xyXG5BY2NvdW50LnByb3RvdHlwZS5zaG93RGV0YWlsUHJvcGVydHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcudXBkYXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAkKCcjYWRkLWFjY291bnQtcGsnKS5hdHRyKCdhY2NvdW50LXBrJywgcGspXHJcbiAgICAgICAgY29uc29sZS5sb2cocGspXHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5zaG93KClcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2FjY291bnRpbmZvLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50R3JvdXAgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm0gPSBhY2NvdW50WydwbGF0Zm9ybSddWydQbGF0Zm9ybV9uYW1lJ11cclxuICAgICAgICAgICAgICAgICAgICBpZCA9IGFjY291bnRbJ3BsYXRmb3JtJ11bJ2lkJ11cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwbGF0Zm9ybSlcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IGFjY291bnRbJ3RpdGxlJ11cclxuICAgICAgICAgICAgICAgICAgICBhY2Nlc3NrZXkgPSBhY2NvdW50WydhY2Nlc3NrZXknXVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldGtleSA9IGFjY291bnRbJ3NlY3JldGtleSddXHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNwbGF0Zm9ybSBvcHRpb25bdmFsdWU9XCIgKyBpZCArIFwiXVwiKS5wcm9wKFwic2VsZWN0ZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG9wdGlvbiA9ICQoXCI8b3B0aW9uPlwiKS52YWwoaWQpLnRleHQocGxhdGZvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAkKFwiI3BsYXRmb3JtXCIpLmFwcGVuZChvcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwodGl0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdhY2Nlc3MnXVwiKS52YWwoYWNjZXNza2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKHNlY3JldGtleSlcclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB0cGwgPSB0ZW1wbGF0ZSgnYWRkLWFjY291bnRJbmZvJyx7XCJhY2NvdW50XCI6YWNjb3VudH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgYWNjb3VudEdyb3VwID0gJCgnLmFjY291bnQtbW9kYWwtaGVhZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAvLyBhY2NvdW50R3JvdXAuYXBwZW5kKHRwbClcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG4vKipcclxuICog6LSm5oi35by55Ye65qGG5pi+56S66ZqQ6JePXHJcbiAqL1xyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUFkZEFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcjYWRkLWFjY291bnQtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuc2hvdygpXHJcbiAgICB9KTtcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzc3Nmc2RmXCIpXHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5oaWRlKClcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLmhpZGUoKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbmRlbm9taW5hdGlvbkV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGFjY291bnRfbGlzdCA9IHNlbGYuYWNjb3VudEN1dXJyZW5jeUV2ZW50KClcclxuICAgIGNvbnNvbGUubG9nKGFjY291bnRfbGlzdClcclxuICAgICQoJyNhY2NvdW50LWN1cnJ5LWNvbmZpZ3VyYXRpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1tYXNrLWFjY291bnQtd3JhcHBlcicpLnNob3coKTtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLWFjY291bnQtd3JhcHBlcicpLnNob3coKTtcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbmN5X2xpc3QgPSBbXVxyXG4gICAgICAgICQoJy5jdXJyZW5jeS1jaGVja2JveCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbmN5ID0gJCh0aGlzKS5wYXJlbnQoKS50ZXh0KClcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVuY3kpXHJcbiAgICAgICAgICAgIGN1cnJlbmN5X2xpc3QucHVzaChjdXJyZW5jeSlcclxuXHJcbiAgICAgICAgICAgICQoJyNjdXJyZW5jeS1hZGQtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9kZWFsL2NvbmZpZ2N1cnJlbmN5LycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjdXJyZW5jeSc6IGN1cnJlbmN5X2xpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdhY2NvdW50X2xpc3QnOiBhY2NvdW50X2xpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfSlcclxuXHJcbiAgICAkKCcuZGVub21pbmF0aW9uLWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG5cclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RQcm9wZXJ0eVRvdGFsU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJyNwcm9wZXJ0eS10b3RhbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuc2hvdygpXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuaGlkZSgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVDdXJyeVdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcuYWRkLXByb3BlcnR5JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmNoYXJnZUFjY291bnRFdmVudChwaylcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5Ub2FsQWNjb3VudENsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJykuaGlkZSgpXHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdHRlblByb3BlcnR5RGV0YWlsc0Nsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKS5oaWRlKClcclxuICAgIH0pXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5Qcm9wZXJ0eURldGFpbHNTaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcuY2hlY2stcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuc2hvdygpXHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgICQoJy5yZWZlcnNoJykuYXR0cigncHJvcGVydHktaWQnLCBwaylcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICB4ZnphamF4LnBvc3QoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvc2hvd2Fzc2VydC8nLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3BrJzogcGtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF0Zm9ybSA9IGRhdGFzWydQbGF0Zm9ybV9uYW1lJ10gIC8v5bmz5Y+w5ZCN56ewXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBhc3NldF9jaGFuZ2UgPSBkYXRhc1snYXNzZXRfY2hhbmdlJ10gIC8v5LuK5pel6LWE5Lqn5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBvcmlnaW5hbF9hc3NldHMgPSBkYXRhc1snb3JpZ2luYWxfYXNzZXRzJ10gLy/liJ3lp4votYTkuqdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGhpc3RvcnlfcHJvZml0ID0gZGF0YXNbJ2hpc3RvcnlfcHJvZml0J10gLy/ljoblj7Lnm4jkuo9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHdpdGhkcmF3X3JlY29yZCA9IGRhdGFzWyd3aXRoZHJhd19yZWNvcmQnXSAvL+aAu+aPkOW4gVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgYXNzZXRzX2RpY3QgPSBkYXRhc1snYXNzZXRzX2RpY3QnXSAgIC8v6LWE5Lqn6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBwcm9maXRfbG9zc19kaWN0ID0gZGF0YXNbJ3Byb2ZpdF9sb3NzX2RpY3QnXSAvL+aNn+ebiuihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvcGVydHktYWNjb3VudC12YWx1ZScpLnRleHQocGxhdGZvcm0pICAvL+aPkuWFpeW5s+WPsOWIsGh0bWzkuK1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRldGFpbHNHcm91cCA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmFzc2V0cy1jaGFuZ2UgLm51bWJlcicpLnRleHQoYXNzZXRfY2hhbmdlWydudW1iZXInXSkgLy/otYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5hc3NldHMtY2hhbmdlIC5wZXJjZW50YWdlJykudGV4dChhc3NldF9jaGFuZ2VbJ3BlcmNlbnQnXSkgLy/otYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5pbml0aWFsLWFzc2V0IC5udW1iZXInKS50ZXh0KG9yaWdpbmFsX2Fzc2V0cykgLy/liJ3lp4vlj5jljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5jdXJyeS1hY2NvdW50LXRvdGFsIC50b3RhbC1udW1iZXInKS50ZXh0KHdpdGhkcmF3X3JlY29yZCkgLy/mgLvorqHmj5DluIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5oaXN0b3J5LXByb2ZpdCAgLm51bWJlcicpLnRleHQoaGlzdG9yeV9wcm9maXRbJ251bWJlciddKSAvL+aAu+iuoeaPkOW4gVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmhpc3RvcnktcHJvZml0IC5wZXJjZW50YWdlJykudGV4dChoaXN0b3J5X3Byb2ZpdFsncGVyY2VudCddKSAvL+aAu+iuoeaPkOW4gVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRwbDEgPSB0ZW1wbGF0ZShcIlwiLHtcImFzc2V0c19kaWN0XCI6YXNzZXRzX2RpY3R9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsMiA9IHRlbXBsYXRlKFwiXCIse1wicHJvZml0X2xvc3NfZGljdFwiOnByb2ZpdF9sb3NzX2RpY3R9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsID0gdGVtcGxhdGUoXCJkZXRhaWxzLWl0ZW1cIix7XCJkYXRhc1wiOmRhdGFzfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRldGFpbHNHcm91cCA9ICQoXCIucHJvcGVydHktZGV0YWlscy13cmFwcGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuYXBwZW5kKHRwbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdwcm9wZXJ0eS1kZXRhaWxzJywgeydwcm9wZXJ0aWVzJzogcHJvcGVydGllc30pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50UHJvcGVydHkgPSAkKCcjcHJvcGVydHktZGV0YWlscy1pZHMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50UHJvcGVydHkuYXBwZW5kKHRwbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRldGFpbHNUYWIgPSAkKCcjcHJvcGVydHktZGV0YWlscycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vIHZhciB0ZCA9IGRldGFpbHNUYWIuZmluZChcInRib2R5IHRyIHRkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQuZWFjaChhc3NldHNfZGljdCwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICQuZWFjaCh2YWx1ZSwgZnVuY3Rpb24gKGosIGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLnNob3dDb2xsZWN0QXNzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWNjb3VudF9saXN0ID0gc2VsZi5hY2NvdW50Q3V1cnJlbmN5RXZlbnQoKVxyXG4gICAgY29uc29sZS5sb2coYWNjb3VudF9saXN0KVxyXG4gICAgJCgnI3Byb3BlcnR5LXRvdGFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvc2hvd2NvbGxlY3Rhc3NldC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdhY2NvdW50X2xpc3QnOiBhY2NvdW50X2xpc3RcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuZGVsZXRlQWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy5kZWxldGUtcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICd0aXRsZSc6ICfmgqjnoa7lrprliKDpmaTov5nkuKrotKbmiLflkJfvvJ8nLFxyXG4gICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9kZWFsL2RlbGV0ZWFjY291bnQvJyxcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5FZGl0QWNjb3VudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY29uZmlybScpO1xyXG4gICAgY29uZmlybUJ0bi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2VkaXRhY2NvdW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KVxyXG5cclxufVxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TdWJtaXRBY2NvdW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jb25maXJtJyk7XHJcblxyXG4gICAgY29uZmlybUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBrID0gJCh0aGlzKS5hdHRyKCdhY2NvdW50LXBrJylcclxuICAgICAgICBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICB2YXIgYWNjb3VudCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICBwbGF0Zm9ybSA9ICQoJyNwbGF0Zm9ybScpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKClcclxuICAgICAgICB0aXRsZSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCgpXHJcbiAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKClcclxuICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciB1cmwgPSAnJ1xyXG4gICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvZWRpdGFjY291bnQvJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvZGVhbC9hZGRhY2NvdW50LydcclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGxhdGZvcm0nOiBwbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc2tleSc6IGFjY2Vzc2tleSxcclxuICAgICAgICAgICAgICAgICdzZWNyZXRrZXknOiBzZWNyZXRrZXksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLnvJbovpHotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIua3u+WKoOi0puaIt+aIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuY2hhcmdlQWNjb3VudEV2ZW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jdXJyeS1jb25maXJtJylcclxuICAgIGNvbmZpcm1CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG51bSA9ICQoJyNjdXJyZW5jeS1udW1iZXInKS52YWwoKVxyXG4gICAgICAgIGN1cnJlbmN5ID0gJCgnI2N1cnJlbmN5JykudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhudW0sIGN1cnJlbmN5LCBwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2NoYXJnZWFjY291bnQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgICAgICdudW0nOiBudW0sXHJcbiAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuWinui1hOaIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5jdXl5ZW5jeVNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcubWVudGlvbi1tb25leScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmNhcnJ5V3JhcHBlci5zaG93KCk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNlbGYubGlzdGVuV2l0aERyYXcocGspXHJcblxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuaGlkZSgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuV2l0aERyYXcgPSBmdW5jdGlvbiAocGspIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBidG4gPSAkKCcuY2FycnktY29uZmlybScpXHJcbiAgICBjb25zb2xlLmxvZyhwaylcclxuICAgIGJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbnVtID0gJCgnI2NhcnJ5LWN1cnJlbmN5LW51bWJlcicpLnZhbCgpXHJcbiAgICAgICAgY3VycmVuY3kgPSAkKCcjY2FycnktY3VycmVuY3knKS52YWwoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiKlwiKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKG51bSwgY3VycmVuY3ksIHBrKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvd2l0aGRyYXcvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnbnVtJzogbnVtLFxyXG4gICAgICAgICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3ksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuaPkOW4geaIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUucmVmZXJzaEFjY291bnRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJyNkZXRhaWxzLXJlZmVyc2gnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzc2RmYXNcIilcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LnNob3coKVxyXG5cclxuICAgICAgICB9LCAxMDApO1xyXG5cclxuXHJcbiAgICAgICAgcGsgPSAkKHRoaXMpLmF0dHIoJ3Byb3BlcnR5LWlkJylcclxuICAgICAgICAvLyB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgIC8vICAgICAndXJsJzogJy9kZWFsL3Nob3dhc3NlcnQvJyxcclxuICAgICAgICAvLyAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgLy8gICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCApe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gcmVzdWx0WydkYXRhJ11cclxuICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9wZXJ0aWVzKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgncHJvcGVydHktZGV0YWlscycseydwcm9wZXJ0aWVzJzpwcm9wZXJ0aWVzfSlcclxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgYWNjb3VudFByb3BlcnR5ID0gJCgnI3Byb3BlcnR5LWRldGFpbHMtaWRzJylcclxuICAgICAgICAvLyAgICAgICAgICAgICBhY2NvdW50UHJvcGVydHkucmVwbGFjZSh0cGwpXHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuYWNjb3VudEN1dXJyZW5jeUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFjY291bnQgPSBbXVxyXG4gICAgJCgnLmFjY291bnQtY2hjZWtib3gnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIGFjY291bnRfaWQgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgYWNjb3VudC5wdXNoKGFjY291bnRfaWQpXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGFjY291bnRcclxufVxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYWNjb3VudCA9IG5ldyBBY2NvdW50KCk7XHJcbiAgICBhY2NvdW50LnJ1bigpO1xyXG59KSJdfQ==
