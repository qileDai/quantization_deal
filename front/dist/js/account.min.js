function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper"),t.carryWrapper=$(".account-carry-curry-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount(),t.listendenominationEvent(),t.listtencuyyencyShow()},Account.prototype.listenShowHideAddAccount=function(){var o=this,t=$(".close-btn");$("#add-account-btn").click(function(){o.accountWrapper.show()}),$(".update-property").on("click",function(){var e=$(this).parent().parent().attr("data-id");console.log(e),o.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:e},success:function(t){if(200===t.code){account=t.data;var c=$(".account-body");platform=account.platform.Platform_name,id=account.platform.id,console.log(platform),title=account.title,accesskey=account.accesskey,secretkey=account.secretkey;var n=$("<option>").val(id).text(platform);$("#platform").append(n),c.find("input[name='account-name']").val(title),c.find("input[name='access']").val(accesskey),c.find("input[name='scrent']").val(secretkey),o.listenSubmitAccount(e)}}})}),t.click(function(){o.accountWrapper.hide(),window.location.reload()}),$(".cancel").click(function(){o.accountWrapper.hide(),window.location.reload()})},Account.prototype.listendenominationEvent=function(){$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show()}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()}),$(".cancel").click(function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,c=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),c.click(function(){t.totalProperty.hide()}),$(".cancel").click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var c=this,t=$(".close-btn");$(".add-property").click(function(){c.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.chargeAccountEvent(t)}),t.click(function(){c.curryWrapper.hide()}),$(".cancel").click(function(){c.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide(),window.location.reload()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var c=this,t=$(".close-btn");$(".check-property").on("click",function(){c.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");$(".refersh").attr("property-id",t),xfzajax.post({url:"/deal/showassert/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){datas=t.data;var c=datas.Platform_name,n=datas.asset_change,e=datas.original_assets,o=datas.history_profit,a=datas.withdraw_record,r=datas.assets_dict;datas.profit_loss_dict;$(".property-account-value").text(c);var i=$(".property-details-wrapper");i.find(".assets-change .number").text(n.number),i.find(".assets-change .percentage").text(n.percent),i.find(".initial-asset .number").text(e),i.find(".curry-account-total .total-number").text(a),i.find(".history-profit  .number").text(o.number),i.find(".history-profit .percentage").text(o.percent);$("#property-details");$.each(r,function(t,c){console.log(t),$.each(c,function(t,c){console.log(c)})})}}})}),t.click(function(){c.detailsProperty.hide()}),$(".cancel").click(function(){c.detailsProperty.hide()})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(c){$(".confirm").on("click",function(){var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val(),xfzajax.post({url:"/deal/editaccount/",data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(n){$(".confirm").click(function(){console.log(n);var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val();var c="";c=n?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:c,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:n},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},Account.prototype.listtencuyyencyShow=function(){var c=this,t=$(".close-btn");$(".mention-money").click(function(){c.carryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.listenWithDraw(t)}),t.click(function(){c.carryWrapper.hide()}),$(".cancel").click(function(){c.carryWrapper.hide()})},Account.prototype.listenWithDraw=function(t){$(".carry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/withdraw/",data:{num:num,currency:currency,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("提币成功",function(){window.location.reload()})}})})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsImNhcnJ5V3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImxpc3R0ZW5jdXl5ZW5jeVNob3ciLCJjbG9zZUJ0biIsImNsaWNrIiwic2hvdyIsIm9uIiwicGsiLCJwYXJlbnQiLCJhdHRyIiwiY29uc29sZSIsImxvZyIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhY2NvdW50IiwiYWNjb3VudEdyb3VwIiwicGxhdGZvcm0iLCJpZCIsInRpdGxlIiwiYWNjZXNza2V5Iiwic2VjcmV0a2V5Iiwib3B0aW9uIiwidmFsIiwidGV4dCIsImFwcGVuZCIsImZpbmQiLCJoaWRlIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJjaGFyZ2VBY2NvdW50RXZlbnQiLCJkYXRhcyIsImFzc2V0X2NoYW5nZSIsIm9yaWdpbmFsX2Fzc2V0cyIsImhpc3RvcnlfcHJvZml0Iiwid2l0aGRyYXdfcmVjb3JkIiwiYXNzZXRzX2RpY3QiLCJkZXRhaWxzR3JvdXAiLCJlYWNoIiwia2V5IiwidmFsdWUiLCJqIiwiayIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwiY29uZmlybUNhbGxiYWNrIiwibGlzdGVuRWRpdEFjY291bnQiLCJhbGVydFN1Y2Nlc3MiLCJudW0iLCJjdXJyZW5jeSIsImxpc3RlbldpdGhEcmF3Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxVQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLGVBQWlCQyxFQUFFLHdCQUN4QkgsRUFBS0ksYUFBZUQsRUFBRSwwQkFDdEJILEVBQUtLLGNBQWdCRixFQUFFLDJCQUN2QkgsRUFBS00sZ0JBQWtCSCxFQUFFLDZCQUN6QkgsRUFBS08sYUFBZUosRUFBRSxnQ0FLMUJKLFFBQVFTLFVBQVVDLElBQU0sV0FDcEIsSUFBSVQsRUFBT0MsS0FDWEQsRUFBS1UsMkJBQ0xWLEVBQUtXLDZCQUNMWCxFQUFLWSxpQ0FDTFosRUFBS2EsaUNBQ0xiLEVBQUtjLCtCQUNMZCxFQUFLZSxtQ0FDTGYsRUFBS2dCLGdCQUNMaEIsRUFBS2lCLHNCQUNMakIsRUFBS2tCLDBCQUNMbEIsRUFBS21CLHVCQU1UcEIsUUFBUVMsVUFBVUUseUJBQTJCLFdBQ3pDLElBQUlWLEVBQU9DLEtBQ1BtQixFQUFXakIsRUFBRSxjQUNqQkEsRUFBRSxvQkFBb0JrQixNQUFNLFdBQ3hCckIsRUFBS0UsZUFBZW9CLFNBRXhCbkIsRUFBRSxvQkFBb0JvQixHQUFHLFFBQVMsV0FDOUIsSUFFSUMsRUFGYXJCLEVBQUVGLE1BQ0N3QixTQUFTQSxTQUNqQkMsS0FBSyxXQUNqQkMsUUFBUUMsSUFBSUosR0FDWnhCLEVBQUtFLGVBQWVvQixPQUNwQk8sUUFBUUMsS0FBSyxDQUNUQyxJQUFPLHFCQUNQQyxLQUFRLENBQ0pSLEdBQU1BLEdBRVZTLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QkMsUUFBVUQsRUFBYSxLQUN2QixJQUFJRSxFQUFlakMsRUFBRSxpQkFDckJrQyxTQUFXRixRQUFrQixTQUFpQixjQUM5Q0csR0FBS0gsUUFBa0IsU0FBTSxHQUM3QlIsUUFBUUMsSUFBSVMsVUFDWkUsTUFBUUosUUFBZSxNQUN2QkssVUFBWUws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QkEsRUFBYSxNQUNiOEIsU0FBU0ksYUFBYSxPQUFRLFdBQzFCcEIsT0FBT0MsU0FBU0MsaUJBUXhDbkQsUUFBUVMsVUFBVVcsb0JBQXNCLFdBQ3BDLElBQUluQixFQUFPQyxLQUNQbUIsRUFBV2pCLEVBQUUsY0FDakJBLEVBQUUsa0JBQWtCa0IsTUFBTSxXQUN0QnJCLEVBQUtPLGFBQWFlLE9BQ2xCLElBRUlFLEVBRmFyQixFQUFFRixNQUNDd0IsU0FBU0EsU0FDakJDLEtBQUssV0FDakIxQixFQUFLdUUsZUFBZS9DLEtBR3hCSixFQUFTQyxNQUFNLFdBQ1hyQixFQUFLTyxhQUFhd0MsU0FFdEI1QyxFQUFFLFdBQVdrQixNQUFNLFdBQ2ZyQixFQUFLTyxhQUFhd0MsVUFNMUJoRCxRQUFRUyxVQUFVK0QsZUFBaUIsU0FBVS9DLEdBRS9CckIsRUFBRSxrQkFDUmtCLE1BQU0sV0FDTmdELElBQU1sRSxFQUFFLG9CQUFvQndDLE1BQzVCMkIsU0FBV25FLEVBQUUsYUFBYXdDLE1BQzFCaEIsUUFBUUMsSUFBSSxLQUNaRCxRQUFRQyxJQUFJeUMsSUFBS0MsU0FBVTlDLEdBQzNCSyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sa0JBQ1BDLEtBQVEsQ0FDSnFDLElBQU9BLElBQ1BDLFNBQVlBLFNBQ1o5QyxHQUFNQSxHQUVWUyxRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsTUFDYjhCLFNBQVNJLGFBQWEsT0FBUSxXQUMxQnBCLE9BQU9DLFNBQVNDLGlCQVF4Qy9DLEVBQUUsWUFDZ0IsSUFBSUosU0FDVlUiLCJmaWxlIjoiYWNjb3VudC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBBY2NvdW50KCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5hY2NvdW50V3JhcHBlciA9ICQoJy5hZGQtYWNjb3VudC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmN1cnJ5V3JhcHBlciA9ICQoJy5hY2NvdW50LWN1cnJ5LXdyYXBwZXInKTtcclxuICAgIHNlbGYudG90YWxQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eSA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKTtcclxuICAgIHNlbGYuY2FycnlXcmFwcGVyID0gJCgnLmFjY291bnQtY2FycnktY3Vycnktd3JhcHBlcicpO1xyXG5cclxufTtcclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlQWRkQWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUN1cnJ5V3JhcHBlcigpO1xyXG4gICAgc2VsZi5saXN0UHJvcGVydHlUb3RhbFNob3dIaWRlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5Ub2FsQWNjb3VudENsb3NlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlblByb3BlcnR5RGV0YWlsc0Nsb3NlRXZlbnQoKTtcclxuICAgIHNlbGYuZGVsZXRlQWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TdWJtaXRBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbmRlbm9taW5hdGlvbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5jdXl5ZW5jeVNob3coKTtcclxuICAgIC8vIHNlbGYubGlzdGVuRWRpdEFjY291bnQoKTtcclxuXHJcbn1cclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUFkZEFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcjYWRkLWFjY291bnQtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuc2hvdygpXHJcbiAgICB9KTtcclxuICAgICQoJy51cGRhdGUtcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBrKVxyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuc2hvdygpXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9hY2NvdW50aW5mby8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRHcm91cCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybSA9IGFjY291bnRbJ3BsYXRmb3JtJ11bJ1BsYXRmb3JtX25hbWUnXVxyXG4gICAgICAgICAgICAgICAgICAgIGlkID0gYWNjb3VudFsncGxhdGZvcm0nXVsnaWQnXVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXRmb3JtKVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gYWNjb3VudFsndGl0bGUnXVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnRbJ2FjY2Vzc2tleSddXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudFsnc2VjcmV0a2V5J11cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJCgnI3BsYXRmb3JtJykudGV4dChwbGF0Zm9ybSlcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gJChcIjxvcHRpb24+XCIpLnZhbChpZCkudGV4dChwbGF0Zm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICQoXCIjcGxhdGZvcm1cIikuYXBwZW5kKG9wdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50R3JvdXAuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCh0aXRsZSlcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50R3JvdXAuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbChhY2Nlc3NrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoc2VjcmV0a2V5KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlblN1Ym1pdEFjY291bnQocGspXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYWNjb3VudClcclxuICAgICAgICAgICAgICAgICAgICAvLyB0cGwgPSB0ZW1wbGF0ZSgnYWRkLWFjY291bnRJbmZvJyx7XCJhY2NvdW50XCI6YWNjb3VudH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHBsKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBhY2NvdW50R3JvdXAgPSAkKCcuYWNjb3VudC1ib2R5JylcclxuICAgICAgICAgICAgICAgICAgICAvLyBhY2NvdW50R3JvdXAuYXBwZW5kKHRwbClcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLmhpZGUoKVxyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuaGlkZSgpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuZGVub21pbmF0aW9uRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgJCgnI2FjY291bnQtY3VycnktY29uZmlndXJhdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuc2hvdygpO1xyXG4gICAgfSlcclxuXHJcbiAgICAkKCcuZGVub21pbmF0aW9uLWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG5cclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RQcm9wZXJ0eVRvdGFsU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJyNwcm9wZXJ0eS10b3RhbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuc2hvdygpXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuaGlkZSgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVDdXJyeVdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcuYWRkLXByb3BlcnR5JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmNoYXJnZUFjY291bnRFdmVudChwaylcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5Ub2FsQWNjb3VudENsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJykuaGlkZSgpXHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdHRlblByb3BlcnR5RGV0YWlsc0Nsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKS5oaWRlKClcclxuICAgIH0pXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5Qcm9wZXJ0eURldGFpbHNTaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcuY2hlY2stcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuc2hvdygpXHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgICQoJy5yZWZlcnNoJykuYXR0cigncHJvcGVydHktaWQnLCBwaylcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3Nob3dhc3NlcnQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YXMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF0Zm9ybSA9IGRhdGFzWydQbGF0Zm9ybV9uYW1lJ10gIC8v5bmz5Y+w5ZCN56ewXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2V0X2NoYW5nZSA9IGRhdGFzWydhc3NldF9jaGFuZ2UnXSAgLy/ku4rml6XotYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxfYXNzZXRzID0gZGF0YXNbJ29yaWdpbmFsX2Fzc2V0cyddIC8v5Yid5aeL6LWE5LqnXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlfcHJvZml0ID0gZGF0YXNbJ2hpc3RvcnlfcHJvZml0J10gLy/ljoblj7Lnm4jkuo9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2l0aGRyYXdfcmVjb3JkID0gZGF0YXNbJ3dpdGhkcmF3X3JlY29yZCddIC8v5oC75o+Q5biBXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2V0c19kaWN0ID0gZGF0YXNbJ2Fzc2V0c19kaWN0J10gICAvL+i1hOS6p+ihqFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9maXRfbG9zc19kaWN0ID0gZGF0YXNbJ3Byb2ZpdF9sb3NzX2RpY3QnXSAvL+aNn+ebiuihqFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvcGVydHktYWNjb3VudC12YWx1ZScpLnRleHQocGxhdGZvcm0pICAvL+aPkuWFpeW5s+WPsOWIsGh0bWzkuK1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlsc0dyb3VwID0gJCgnLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0dyb3VwLmZpbmQoJy5hc3NldHMtY2hhbmdlIC5udW1iZXInKS50ZXh0KGFzc2V0X2NoYW5nZVsnbnVtYmVyJ10pIC8v6LWE5Lqn5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0dyb3VwLmZpbmQoJy5hc3NldHMtY2hhbmdlIC5wZXJjZW50YWdlJykudGV4dChhc3NldF9jaGFuZ2VbJ3BlcmNlbnQnXSkgLy/otYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzR3JvdXAuZmluZCgnLmluaXRpYWwtYXNzZXQgLm51bWJlcicpLnRleHQob3JpZ2luYWxfYXNzZXRzKSAvL+WIneWni+WPmOWMllxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzR3JvdXAuZmluZCgnLmN1cnJ5LWFjY291bnQtdG90YWwgLnRvdGFsLW51bWJlcicpLnRleHQod2l0aGRyYXdfcmVjb3JkKSAvL+aAu+iuoeaPkOW4gVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzR3JvdXAuZmluZCgnLmhpc3RvcnktcHJvZml0ICAubnVtYmVyJykudGV4dChoaXN0b3J5X3Byb2ZpdFsnbnVtYmVyJ10pIC8v5oC76K6h5o+Q5biBXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0dyb3VwLmZpbmQoJy5oaXN0b3J5LXByb2ZpdCAucGVyY2VudGFnZScpLnRleHQoaGlzdG9yeV9wcm9maXRbJ3BlcmNlbnQnXSkgLy/mgLvorqHmj5DluIFcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRwbDEgPSB0ZW1wbGF0ZShcIlwiLHtcImFzc2V0c19kaWN0XCI6YXNzZXRzX2RpY3R9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciB0cGwyID0gdGVtcGxhdGUoXCJcIix7XCJwcm9maXRfbG9zc19kaWN0XCI6cHJvZml0X2xvc3NfZGljdH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRwbCA9IHRlbXBsYXRlKFwiZGV0YWlscy1pdGVtXCIse1wiZGF0YXNcIjpkYXRhc30pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRldGFpbHNHcm91cCA9ICQoXCIucHJvcGVydHktZGV0YWlscy13cmFwcGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRldGFpbHNHcm91cC5hcHBlbmQodHBsKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxzVGFiID0gJCgnI3Byb3BlcnR5LWRldGFpbHMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciB0ZCA9IGRldGFpbHNUYWIuZmluZChcInRib2R5IHRyIHRkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGFzc2V0c19kaWN0LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCh2YWx1ZSwgZnVuY3Rpb24gKGosIGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuZGVsZXRlQWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy5kZWxldGUtcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICd0aXRsZSc6ICfmgqjnoa7lrprliKDpmaTov5nkuKrotKbmiLflkJfvvJ8nLFxyXG4gICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9kZWFsL2RlbGV0ZWFjY291bnQvJyxcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5FZGl0QWNjb3VudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY29uZmlybScpO1xyXG4gICAgY29uZmlybUJ0bi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2VkaXRhY2NvdW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KVxyXG5cclxufVxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TdWJtaXRBY2NvdW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jb25maXJtJyk7XHJcblxyXG4gICAgY29uZmlybUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGspXHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB2YXIgdXJsID0gJydcclxuICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgdXJsID0gJy9kZWFsL2VkaXRhY2NvdW50LydcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvYWRkYWNjb3VudC8nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmNoYXJnZUFjY291bnRFdmVudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY3VycnktY29uZmlybScpXHJcbiAgICBjb25maXJtQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBudW0gPSAkKCcjY3VycmVuY3ktbnVtYmVyJykudmFsKClcclxuICAgICAgICBjdXJyZW5jeSA9ICQoJyNjdXJyZW5jeScpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCIqXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2cobnVtLCBjdXJyZW5jeSwgcGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9jaGFyZ2VhY2NvdW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAnbnVtJzogbnVtLFxyXG4gICAgICAgICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3ksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLlop7otYTmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuY3V5eWVuY3lTaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLm1lbnRpb24tbW9uZXknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmxpc3RlbldpdGhEcmF3KHBrKVxyXG5cclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbldpdGhEcmF3ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYnRuID0gJCgnLmNhcnJ5LWNvbmZpcm0nKVxyXG4gICAgYnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBudW0gPSAkKCcjY3VycmVuY3ktbnVtYmVyJykudmFsKClcclxuICAgICAgICBjdXJyZW5jeSA9ICQoJyNjdXJyZW5jeScpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCIqXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2cobnVtLCBjdXJyZW5jeSwgcGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC93aXRoZHJhdy8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdudW0nOiBudW0sXHJcbiAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeSxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5o+Q5biB5oiQ5YqfXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY2NvdW50ID0gbmV3IEFjY291bnQoKTtcclxuICAgIGFjY291bnQucnVuKCk7XHJcbn0pIl19
