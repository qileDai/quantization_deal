function Account(){var t=this;t.accountWrapper=$(".add-account-wrapper"),t.curryWrapper=$(".account-curry-wrapper"),t.totalProperty=$(".property-total-wrapper"),t.detailsProperty=$(".property-details-wrapper"),t.carryWrapper=$(".account-carry-curry-wrapper")}Account.prototype.run=function(){var t=this;t.listenShowHideAddAccount(),t.listenShowHideCurryWrapper(),t.listPropertyTotalShowHideEvent(),t.listenPropertyDetailsShowEvent(),t.listtenToalAccountCloseEvent(),t.listtenPropertyDetailsCloseEvent(),t.deleteAccount(),t.listenSubmitAccount(),t.listendenominationEvent(),t.listtencuyyencyShow()},Account.prototype.listenShowHideAddAccount=function(){var c=this,t=$(".close-btn");$("#add-account-btn").click(function(){c.accountWrapper.show()}),$(".update-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");console.log(t),c.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:t},success:function(t){if(200===t.code){account=t.data;$(".account-body");platform=account.platform.Platform_name,id=account.platform.id,console.log(platform),title=account.title,accesskey=account.accesskey,secretkey=account.secretkey,tpl=template("add-accountInfo",{account:account}),console.log(tpl),$("#account-body").append(tpl)}}})}),t.click(function(){c.accountWrapper.hide(),window.location.reload()}),$(".cancel").click(function(){c.accountWrapper.hide(),window.location.reload()})},Account.prototype.listendenominationEvent=function(){$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show()}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()}),$(".cancel").click(function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var t=this,c=$(".close-btn");$("#property-total").click(function(){t.totalProperty.show()}),c.click(function(){t.totalProperty.hide()}),$(".cancel").click(function(){t.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var c=this,t=$(".close-btn");$(".add-property").click(function(){c.curryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.chargeAccountEvent(t)}),t.click(function(){c.curryWrapper.hide()}),$(".cancel").click(function(){c.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide(),window.location.reload()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var c=this,t=$(".close-btn");$(".check-property").on("click",function(){c.detailsProperty.show();var t=$(this).parent().parent().attr("data-id");$(".refersh").attr("property-id",t),xfzajax.post({url:"/deal/showassert/",data:{pk:t},success:function(t){if(console.log(t),200===t.code){datas=t.data;var c=datas.Platform_name,n=datas.asset_change,e=datas.original_assets,o=datas.history_profit,a=datas.withdraw_record,r=datas.assets_dict;datas.profit_loss_dict;$(".property-account-value").text(c);var i=$(".property-details-wrapper");i.find(".assets-change .number").text(n.number),i.find(".assets-change .percentage").text(n.percent),i.find(".initial-asset .number").text(e),i.find(".curry-account-total .total-number").text(a),i.find(".history-profit  .number").text(o.number),i.find(".history-profit .percentage").text(o.percent);$("#property-details");$.each(r,function(t,c){console.log(t),$.each(c,function(t,c){console.log(c)})})}}})}),t.click(function(){c.detailsProperty.hide()}),$(".cancel").click(function(){c.detailsProperty.hide()})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var t=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:t},success:function(t){200===t.code&&(console.log(t),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(c){$(".confirm").on("click",function(){var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val(),xfzajax.post({url:"/deal/editaccount/",data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:c},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(n){$(".confirm").click(function(){console.log(n);var t=$(".account-body");platform=$("#platform").find("option:selected").val(),title=t.find("input[name='account-name']").val(),accesskey=t.find("input[name='access']").val(),secretkey=t.find("input[name='scrent']").val();var c="";c=n?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:c,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:n},success:function(t){200===t.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.chargeAccountEvent=function(t){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:t,num:num,currency:currency},success:function(t){200===t.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},Account.prototype.listtencuyyencyShow=function(){var c=this,t=$(".close-btn");$(".mention-money").click(function(){c.carryWrapper.show();var t=$(this).parent().parent().attr("data-id");c.listenWithDraw(t)}),t.click(function(){c.carryWrapper.hide()}),$(".cancel").click(function(){c.carryWrapper.hide()})},Account.prototype.listenWithDraw=function(t){$(".carry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,t),xfzajax.post({url:"/deal/withdraw/",data:{num:num,currency:currency,pk:t},success:function(t){200===t.code&&xfzalert.alertSuccess("提币成功",function(){window.location.reload()})}})})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsImNhcnJ5V3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImxpc3R0ZW5jdXl5ZW5jeVNob3ciLCJjbG9zZUJ0biIsImNsaWNrIiwic2hvdyIsIm9uIiwicGsiLCJwYXJlbnQiLCJhdHRyIiwiY29uc29sZSIsImxvZyIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhY2NvdW50IiwicGxhdGZvcm0iLCJpZCIsInRpdGxlIiwiYWNjZXNza2V5Iiwic2VjcmV0a2V5IiwidHBsIiwidGVtcGxhdGUiLCJhcHBlbmQiLCJoaWRlIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJjaGFyZ2VBY2NvdW50RXZlbnQiLCJkYXRhcyIsImFzc2V0X2NoYW5nZSIsIm9yaWdpbmFsX2Fzc2V0cyIsImhpc3RvcnlfcHJvZml0Iiwid2l0aGRyYXdfcmVjb3JkIiwiYXNzZXRzX2RpY3QiLCJ0ZXh0IiwiZGV0YWlsc0dyb3VwIiwiZmluZCIsImVhY2giLCJrZXkiLCJ2YWx1ZSIsImoiLCJrIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJjb25maXJtQ2FsbGJhY2siLCJsaXN0ZW5FZGl0QWNjb3VudCIsInZhbCIsImFsZXJ0U3VjY2VzcyIsIm51bSIsImN1cnJlbmN5IiwibGlzdGVuV2l0aERyYXciXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFVBQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsZUFBaUJDLEVBQUUsd0JBQ3hCSCxFQUFLSSxhQUFlRCxFQUFFLDBCQUN0QkgsRUFBS0ssY0FBZ0JGLEVBQUUsMkJBQ3ZCSCxFQUFLTSxnQkFBa0JILEVBQUUsNkJBQ3pCSCxFQUFLTyxhQUFlSixFQUFFLGdDQUsxQkosUUFBUVMsVUFBVUMsSUFBTSxXQUNwQixJQUFJVCxFQUFPQyxLQUNYRCxFQUFLVSwyQkFDTFYsRUFBS1csNkJBQ0xYLEVBQUtZLGlDQUNMWixFQUFLYSxpQ0FDTGIsRUFBS2MsK0JBQ0xkLEVBQUtlLG1DQUNMZixFQUFLZ0IsZ0JBQ0xoQixFQUFLaUIsc0JBQ0xqQixFQUFLa0IsMEJBQ0xsQixFQUFLbUIsdUJBTVRwQixRQUFRUyxVQUFVRSx5QkFBMkIsV0FDekMsSUFBSVYsRUFBT0MsS0FDUG1CLEVBQVdqQixFQUFFLGNBQ2pCQSxFQUFFLG9CQUFvQmtCLE1BQU0sV0FDeEJyQixFQUFLRSxlQUFlb0IsU0FFeEJuQixFQUFFLG9CQUFvQm9CLEdBQUcsUUFBUyxXQUM5QixJQUVJQyxFQUZhckIsRUFBRUYsTUFDQ3dCLFNBQVNBLFNBQ2pCQyxLQUFLLFdBQ2pCQyxRQUFRQyxJQUFJSixHQUNaeEIsRUFBS0UsZUFBZW9CLE9BQ3BCTyxRQUFRQyxLQUFLLENBQ1RDLElBQU8scUJBQ1BDLEtBQVEsQ0FDSlIsR0FBTUEsR0FFVlMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCQyxRQUFVRCxFQUFhLEtBQ0ovQixFQUFFLGlCQUNyQmlDLFNBQVdELFFBQWtCLFNBQWlCLGNBQzlDRSxHQUFLRixRQUFrQixTQUFNLEdBQzdCUixRQUFRQyxJQUFJUSxVQUNaRSxNQUFRSCxRQUFlLE1BQ3ZCSSxVQUFZSixRQUFtQixVQUMvQkssVUFBWUws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QUNqQkEsRUFBRSxrQkFBa0JrQixNQUFNLFdBQ3RCckIsRUFBS08sYUFBYWUsT0FDbEIsSUFFSUUsRUFGYXJCLEVBQUVGLE1BQ0N3QixTQUFTQSxTQUNqQkMsS0FBSyxXQUNqQjFCLEVBQUt1RSxlQUFlL0MsS0FHeEJKLEVBQVNDLE1BQU0sV0FDWHJCLEVBQUtPLGFBQWFxQyxTQUV0QnpDLEVBQUUsV0FBV2tCLE1BQU0sV0FDZnJCLEVBQUtPLGFBQWFxQyxVQU0xQjdDLFFBQVFTLFVBQVUrRCxlQUFpQixTQUFVL0MsR0FFL0JyQixFQUFFLGtCQUNSa0IsTUFBTSxXQUNOZ0QsSUFBTWxFLEVBQUUsb0JBQW9CZ0UsTUFDNUJHLFNBQVduRSxFQUFFLGFBQWFnRSxNQUMxQnhDLFFBQVFDLElBQUksS0FDWkQsUUFBUUMsSUFBSXlDLElBQUtDLFNBQVU5QyxHQUMzQkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLGtCQUNQQyxLQUFRLENBQ0pxQyxJQUFPQSxJQUNQQyxTQUFZQSxTQUNaOUMsR0FBTUEsR0FFVlMsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE1BQ2I2QixTQUFTSyxhQUFhLE9BQVEsV0FDMUJ2QixPQUFPQyxTQUFTQyxpQkFReEM1QyxFQUFFLFlBQ2dCLElBQUlKLFNBQ1ZVIiwiZmlsZSI6ImFjY291bnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQWNjb3VudCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYWNjb3VudFdyYXBwZXIgPSAkKCcuYWRkLWFjY291bnQtd3JhcHBlcicpO1xyXG4gICAgc2VsZi5jdXJyeVdyYXBwZXIgPSAkKCcuYWNjb3VudC1jdXJyeS13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnRvdGFsUHJvcGVydHkgPSAkKCcucHJvcGVydHktdG90YWwtd3JhcHBlcicpO1xyXG4gICAgc2VsZi5kZXRhaWxzUHJvcGVydHkgPSAkKCcucHJvcGVydHktZGV0YWlscy13cmFwcGVyJyk7XHJcbiAgICBzZWxmLmNhcnJ5V3JhcHBlciA9ICQoJy5hY2NvdW50LWNhcnJ5LWN1cnJ5LXdyYXBwZXInKTtcclxuXHJcbn07XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUFkZEFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVDdXJyeVdyYXBwZXIoKTtcclxuICAgIHNlbGYubGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblByb3BlcnR5RGV0YWlsc1Nob3dFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0dGVuVG9hbEFjY291bnRDbG9zZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50KCk7XHJcbiAgICBzZWxmLmRlbGV0ZUFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0QWNjb3VudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5kZW5vbWluYXRpb25FdmVudCgpO1xyXG4gICAgc2VsZi5saXN0dGVuY3V5eWVuY3lTaG93KCk7XHJcbiAgICAvLyBzZWxmLmxpc3RlbkVkaXRBY2NvdW50KCk7XHJcblxyXG59XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnI2FkZC1hY2NvdW50LWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgfSk7XHJcbiAgICAkKCcudXBkYXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvYWNjb3VudGluZm8vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50R3JvdXAgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm0gPSBhY2NvdW50WydwbGF0Zm9ybSddWydQbGF0Zm9ybV9uYW1lJ11cclxuICAgICAgICAgICAgICAgICAgICBpZCA9IGFjY291bnRbJ3BsYXRmb3JtJ11bJ2lkJ11cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwbGF0Zm9ybSlcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IGFjY291bnRbJ3RpdGxlJ11cclxuICAgICAgICAgICAgICAgICAgICBhY2Nlc3NrZXkgPSBhY2NvdW50WydhY2Nlc3NrZXknXVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldGtleSA9IGFjY291bnRbJ3NlY3JldGtleSddXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICQoJyNwbGF0Zm9ybScpLnRleHQocGxhdGZvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG9wdGlvbiA9ICQoXCI8b3B0aW9uPlwiKS52YWwoaWQpLnRleHQocGxhdGZvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAkKFwiI3BsYXRmb3JtXCIpLmFwcGVuZChvcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3VudEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwodGl0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3VudEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdhY2Nlc3MnXVwiKS52YWwoYWNjZXNza2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY291bnRHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKHNlY3JldGtleSlcclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlbGYubGlzdGVuU3VibWl0QWNjb3VudChwaylcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHRwbCA9IHRlbXBsYXRlKCdhZGQtYWNjb3VudEluZm8nLHtcImFjY291bnRcIjphY2NvdW50fSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cGwpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRHcm91cCA9ICQoJyNhY2NvdW50LWJvZHknKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRHcm91cC5hcHBlbmQodHBsKVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuaGlkZSgpXHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5oaWRlKCk7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5kZW5vbWluYXRpb25FdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAkKCcjYWNjb3VudC1jdXJyeS1jb25maWd1cmF0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tbWFzay1hY2NvdW50LXdyYXBwZXInKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1hY2NvdW50LXdyYXBwZXInKS5zaG93KCk7XHJcbiAgICB9KVxyXG5cclxuICAgICQoJy5kZW5vbWluYXRpb24tY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tbWFzay1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcblxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tbWFzay1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmRlbm9taW5hdGlvbi1hY2NvdW50LXdyYXBwZXInKS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnI3Byb3BlcnR5LXRvdGFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudG90YWxQcm9wZXJ0eS5zaG93KClcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudG90YWxQcm9wZXJ0eS5oaWRlKClcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUN1cnJ5V3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJy5hZGQtcHJvcGVydHknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuc2hvdygpXHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNlbGYuY2hhcmdlQWNjb3VudEV2ZW50KHBrKVxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5wcm9wZXJ0eS1jbG9zZS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnByb3BlcnR5LXRvdGFsLXdyYXBwZXInKS5oaWRlKClcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgIH0pXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuUHJvcGVydHlEZXRhaWxzQ2xvc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5wcm9wZXJ0eS1jbG9zZS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlcicpLmhpZGUoKVxyXG4gICAgfSlcclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblByb3BlcnR5RGV0YWlsc1Nob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJy5jaGVjay1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5zaG93KClcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgJCgnLnJlZmVyc2gnKS5hdHRyKCdwcm9wZXJ0eS1pZCcsIHBrKVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBrKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvc2hvd2Fzc2VydC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwayc6IHBrXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXRmb3JtID0gZGF0YXNbJ1BsYXRmb3JtX25hbWUnXSAgLy/lubPlj7DlkI3np7BcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzZXRfY2hhbmdlID0gZGF0YXNbJ2Fzc2V0X2NoYW5nZSddICAvL+S7iuaXpei1hOS6p+WPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbF9hc3NldHMgPSBkYXRhc1snb3JpZ2luYWxfYXNzZXRzJ10gLy/liJ3lp4votYTkuqdcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaGlzdG9yeV9wcm9maXQgPSBkYXRhc1snaGlzdG9yeV9wcm9maXQnXSAvL+WOhuWPsuebiOS6j1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aXRoZHJhd19yZWNvcmQgPSBkYXRhc1snd2l0aGRyYXdfcmVjb3JkJ10gLy/mgLvmj5DluIFcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzZXRzX2RpY3QgPSBkYXRhc1snYXNzZXRzX2RpY3QnXSAgIC8v6LWE5Lqn6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2ZpdF9sb3NzX2RpY3QgPSBkYXRhc1sncHJvZml0X2xvc3NfZGljdCddIC8v5o2f55uK6KGoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9wZXJ0eS1hY2NvdW50LXZhbHVlJykudGV4dChwbGF0Zm9ybSkgIC8v5o+S5YWl5bmz5Y+w5YiwaHRtbOS4rVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxzR3JvdXAgPSAkKCcucHJvcGVydHktZGV0YWlscy13cmFwcGVyJylcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzR3JvdXAuZmluZCgnLmFzc2V0cy1jaGFuZ2UgLm51bWJlcicpLnRleHQoYXNzZXRfY2hhbmdlWydudW1iZXInXSkgLy/otYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzR3JvdXAuZmluZCgnLmFzc2V0cy1jaGFuZ2UgLnBlcmNlbnRhZ2UnKS50ZXh0KGFzc2V0X2NoYW5nZVsncGVyY2VudCddKSAvL+i1hOS6p+WPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNHcm91cC5maW5kKCcuaW5pdGlhbC1hc3NldCAubnVtYmVyJykudGV4dChvcmlnaW5hbF9hc3NldHMpIC8v5Yid5aeL5Y+Y5YyWXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNHcm91cC5maW5kKCcuY3VycnktYWNjb3VudC10b3RhbCAudG90YWwtbnVtYmVyJykudGV4dCh3aXRoZHJhd19yZWNvcmQpIC8v5oC76K6h5o+Q5biBXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHNHcm91cC5maW5kKCcuaGlzdG9yeS1wcm9maXQgIC5udW1iZXInKS50ZXh0KGhpc3RvcnlfcHJvZml0WydudW1iZXInXSkgLy/mgLvorqHmj5DluIFcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzR3JvdXAuZmluZCgnLmhpc3RvcnktcHJvZml0IC5wZXJjZW50YWdlJykudGV4dChoaXN0b3J5X3Byb2ZpdFsncGVyY2VudCddKSAvL+aAu+iuoeaPkOW4gVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsMSA9IHRlbXBsYXRlKFwiXCIse1wiYXNzZXRzX2RpY3RcIjphc3NldHNfZGljdH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRwbDIgPSB0ZW1wbGF0ZShcIlwiLHtcInByb2ZpdF9sb3NzX2RpY3RcIjpwcm9maXRfbG9zc19kaWN0fSlcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsID0gdGVtcGxhdGUoXCJkZXRhaWxzLWl0ZW1cIix7XCJkYXRhc1wiOmRhdGFzfSlcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgZGV0YWlsc0dyb3VwID0gJChcIi5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmFwcGVuZCh0cGwpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbHNUYWIgPSAkKCcjcHJvcGVydHktZGV0YWlscycpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRkID0gZGV0YWlsc1RhYi5maW5kKFwidGJvZHkgdHIgdGRcIilcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goYXNzZXRzX2RpY3QsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHZhbHVlLCBmdW5jdGlvbiAoaiwgaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5kZWxldGVBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgJCgnLmRlbGV0ZS1wcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICB2YXIgcGsgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcclxuICAgICAgICAgICAgJ3RpdGxlJzogJ+aCqOehruWumuWIoOmZpOi/meS4qui0puaIt+WQl++8nycsXHJcbiAgICAgICAgICAgICdjb25maXJtQ2FsbGJhY2snOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvZGVsZXRlYWNjb3VudC8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbkVkaXRBY2NvdW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jb25maXJtJyk7XHJcbiAgICBjb25maXJtQnRuLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYWNjb3VudCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICBwbGF0Zm9ybSA9ICQoJyNwbGF0Zm9ybScpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKClcclxuICAgICAgICB0aXRsZSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCgpXHJcbiAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKClcclxuICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvZWRpdGFjY291bnQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGxhdGZvcm0nOiBwbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc2tleSc6IGFjY2Vzc2tleSxcclxuICAgICAgICAgICAgICAgICdzZWNyZXRrZXknOiBzZWNyZXRrZXksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIua3u+WKoOi0puaIt+aIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pXHJcblxyXG59XHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblN1Ym1pdEFjY291bnQgPSBmdW5jdGlvbiAocGspIHtcclxuICAgIHZhciBjb25maXJtQnRuID0gJCgnLmNvbmZpcm0nKTtcclxuXHJcbiAgICBjb25maXJtQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICB2YXIgYWNjb3VudCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICBwbGF0Zm9ybSA9ICQoJyNwbGF0Zm9ybScpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudmFsKClcclxuICAgICAgICB0aXRsZSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCgpXHJcbiAgICAgICAgYWNjZXNza2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjZXNzJ11cIikudmFsKClcclxuICAgICAgICBzZWNyZXRrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoKVxyXG4gICAgICAgIHZhciB1cmwgPSAnJ1xyXG4gICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvZWRpdGFjY291bnQvJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvZGVhbC9hZGRhY2NvdW50LydcclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGxhdGZvcm0nOiBwbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc2tleSc6IGFjY2Vzc2tleSxcclxuICAgICAgICAgICAgICAgICdzZWNyZXRrZXknOiBzZWNyZXRrZXksXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIua3u+WKoOi0puaIt+aIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUuY2hhcmdlQWNjb3VudEV2ZW50ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgY29uZmlybUJ0biA9ICQoJy5jdXJyeS1jb25maXJtJylcclxuICAgIGNvbmZpcm1CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG51bSA9ICQoJyNjdXJyZW5jeS1udW1iZXInKS52YWwoKVxyXG4gICAgICAgIGN1cnJlbmN5ID0gJCgnI2N1cnJlbmN5JykudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhudW0sIGN1cnJlbmN5LCBwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL2NoYXJnZWFjY291bnQvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgICAgICdudW0nOiBudW0sXHJcbiAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBjdXJyZW5jeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuWinui1hOaIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5jdXl5ZW5jeVNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcubWVudGlvbi1tb25leScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmNhcnJ5V3JhcHBlci5zaG93KCk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNlbGYubGlzdGVuV2l0aERyYXcocGspXHJcblxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuaGlkZSgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuaGlkZSgpO1xyXG4gICAgfSlcclxuXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuV2l0aERyYXcgPSBmdW5jdGlvbiAocGspIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBidG4gPSAkKCcuY2FycnktY29uZmlybScpXHJcbiAgICBidG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG51bSA9ICQoJyNjdXJyZW5jeS1udW1iZXInKS52YWwoKVxyXG4gICAgICAgIGN1cnJlbmN5ID0gJCgnI2N1cnJlbmN5JykudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhudW0sIGN1cnJlbmN5LCBwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3dpdGhkcmF3LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ251bSc6IG51bSxcclxuICAgICAgICAgICAgICAgICdjdXJyZW5jeSc6IGN1cnJlbmN5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmj5DluIHmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFjY291bnQgPSBuZXcgQWNjb3VudCgpO1xyXG4gICAgYWNjb3VudC5ydW4oKTtcclxufSkiXX0=
