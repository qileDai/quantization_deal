function Account(){var c=this;c.accountWrapper=$(".add-account-wrapper"),c.curryWrapper=$(".account-curry-wrapper"),c.totalProperty=$(".property-total-wrapper"),c.detailsProperty=$(".property-details-wrapper"),c.carryWrapper=$(".account-carry-curry-wrapper")}Account.prototype.run=function(){var c=this;c.listenShowHideAddAccount(),c.listenShowHideCurryWrapper(),c.listPropertyTotalShowHideEvent(),c.listenPropertyDetailsShowEvent(),c.listtenToalAccountCloseEvent(),c.listtenPropertyDetailsCloseEvent(),c.deleteAccount(),c.listenSubmitAccount(),c.listendenominationEvent(),c.listtencuyyencyShow(),c.showCollectAsset(),c.showDetailProperty(),c.refershAccountEvent(),c.addAccountCurrencyEvent(),c.checkAllEvent()},Account.prototype.showDetailProperty=function(){var t=this;$(".update-property").on("click",function(){var c=$(this).parent().parent().attr("data-id");$("#add-account-pk").attr("account-pk",c),console.log(c),t.accountWrapper.show(),xfzajax.post({url:"/deal/accountinfo/",data:{pk:c},success:function(c){if(console.log(c),200===c.code){account=c.data,console.log(account);var t=$(".account-body");platform=account.platform.Platform_name,id=account.platform.id,console.log(platform),title=account.title,accesskey=account.accesskey,secretkey=account.secretkey,$("#platform option[value="+id+"]").prop("selected",!0),t.find("input[name='account-name']").val(title),t.find("input[name='access']").val(accesskey),t.find("input[name='scrent']").val(secretkey)}}})})},Account.prototype.listenShowHideAddAccount=function(){var c=this,t=$(".close-btn");$("#add-account-btn").click(function(){c.accountWrapper.show()}),t.click(function(){console.log("sssfsdf"),c.accountWrapper.hide(),window.location.reload()}),$(".cancel").click(function(){c.accountWrapper.hide(),window.location.reload()})},Account.prototype.listendenominationEvent=function(){$("#account-curry-configuration").on("click",function(){$(".denomination-mask-account-wrapper").show(),$(".denomination-account-wrapper").show();var c=[];$("#currency-add-btn").click(function(){$("input[class='currency-checkbox']:checkbox").each(function(){1==$(this).prop("checked")&&(console.log($(this).val()),c.push($(this).val()))}),console.log(c),xfzajax.post({url:"/deal/configcurrency/",data:{currency:c},success:function(c){200===c.code&&xfzalert.alertSuccess("新增币种成功",function(){window.location.reload()})}})})}),$(".denomination-close-btn").on("click",function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide(),window.location.reload()}),$(".cancel").click(function(){$(".denomination-mask-account-wrapper").hide(),$(".denomination-account-wrapper").hide(),window.location.reload()})},Account.prototype.listPropertyTotalShowHideEvent=function(){var c=this,t=$(".close-btn");$("#property-total").click(function(){c.totalProperty.show()}),t.click(function(){c.totalProperty.hide()}),$(".cancel").click(function(){c.totalProperty.hide()})},Account.prototype.listenShowHideCurryWrapper=function(){var t=this,c=$(".close-btn");$(".add-property").click(function(){t.curryWrapper.show();var c=$(this).parent().parent().attr("data-id");t.chargeAccountEvent(c)}),c.click(function(){t.curryWrapper.hide()}),$(".cancel").click(function(){t.curryWrapper.hide()})},Account.prototype.listtenToalAccountCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-total-wrapper").hide(),window.location.reload()})},Account.prototype.listtenPropertyDetailsCloseEvent=function(){$(".property-close-btn").on("click",function(){$(".property-details-wrapper").hide()})},Account.prototype.listenPropertyDetailsShowEvent=function(){var t=this,c=$(".close-btn");$(".check-property").on("click",function(){t.detailsProperty.show();var c=$(this).parent().parent().attr("data-id");$(".refersh").attr("property-id",c),xfzajax.post({url:"/deal/showassert/",data:{pk:c},success:function(c){if(console.log(c),200===c.code){datas=c.data;var t=c.data;console.log(t);var o=datas.Platform_name;$(".property-account-value").text(o);var e=template("property-details",{properties:t});$("#property-details-ids").append(e)}}})}),c.click(function(){t.detailsProperty.hide()}),$(".cancel").click(function(){t.detailsProperty.hide()})},Account.prototype.showCollectAsset=function(){$("#property-total").click(function(){var n=[];$("input[class='account-chcekbox']:checkbox").each(function(){if(1==$(this).prop("checked")){var c=$(this).parent().parent().attr("data-id");n.push(c)}}),xfzajax.post({url:"/deal/showcollectasset/",data:{account_list:n},success:function(c){if(console.log(c),200===c.code){var t=n.length;console.log(t),$("#total-account").text("所有"+t+"个账户");var o=c.data,e=template("total-properties",{properties:o});$("#property-total-details").append(e)}}})})},Account.prototype.deleteAccount=function(){$(".delete-property").on("click",function(){var c=$(this).parent().parent().attr("data-id");xfzalert.alertConfirm({title:"您确定删除这个账户吗？",confirmCallback:function(){xfzajax.post({url:"/deal/deleteaccount/",data:{pk:c},success:function(c){200===c.code&&(console.log(c),window.location.reload())}})}})})},Account.prototype.listenEditAccount=function(t){$(".confirm").on("click",function(){var c=$(".account-body");platform=$("#platform").find("option:selected").val(),title=c.find("input[name='account-name']").val(),accesskey=c.find("input[name='access']").val(),secretkey=c.find("input[name='scrent']").val(),xfzajax.post({url:"/deal/editaccount/",data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(c){200===c.code&&xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()})}})})},Account.prototype.listenSubmitAccount=function(c){$(".confirm").click(function(){var t=$(this).attr("account-pk");console.log(t);var c=$(".account-body");platform=$("#platform").find("option:selected").val(),title=c.find("input[name='account-name']").val(),accesskey=c.find("input[name='access']").val(),secretkey=c.find("input[name='scrent']").val();var o="";o=t?"/deal/editaccount/":"/deal/addaccount/",xfzajax.post({url:o,data:{platform:platform,title:title,accesskey:accesskey,secretkey:secretkey,pk:t},success:function(c){200===c.code&&(t?xfzalert.alertSuccess("编辑账户成功！",function(){window.location.reload()}):xfzalert.alertSuccess("添加账户成功！",function(){window.location.reload()}))}})})},Account.prototype.chargeAccountEvent=function(c){$(".curry-confirm").click(function(){num=$("#currency-number").val(),currency=$("#currency").val(),console.log("*"),console.log(num,currency,c),xfzajax.post({url:"/deal/chargeaccount/",data:{pk:c,num:num,currency:currency},success:function(c){200===c.code&&xfzalert.alertSuccess("增资成功",function(){window.location.reload()})}})})},Account.prototype.listtencuyyencyShow=function(){var t=this,c=$(".close-btn");$(".mention-money").click(function(){t.carryWrapper.show();var c=$(this).parent().parent().attr("data-id");t.listenWithDraw(c)}),c.click(function(){t.carryWrapper.hide()}),$(".cancel").click(function(){t.carryWrapper.hide()})},Account.prototype.listenWithDraw=function(c){var t=$(".carry-confirm");console.log(c),t.click(function(){num=$("#carry-currency-number").val(),currency=$("#carry-currency").val(),console.log("*"),console.log(num,currency,c),xfzajax.post({url:"/deal/withdraw/",data:{num:num,currency:currency,pk:c},success:function(c){200===c.code&&xfzalert.alertSuccess("提币成功",function(){window.location.reload()})}})})},Account.prototype.refershAccountEvent=function(){var c=this;$("#details-refersh").click(function(){console.log("ssdfas"),c.detailsProperty.hide(),setTimeout(function(){c.detailsProperty.show()},100),pk=$(this).attr("property-id")})},Account.prototype.accountCuurrencyEvent=function(){var t=[];return $("input[class='account-chcekbox']:checkbox").each(function(){if(1==$(this).prop("checked")){var c=$(this).parent().parent().attr("data-id");t.push(c)}}),t},Account.prototype.addAccountCurrencyEvent=function(){$("#add-currency-btn").click(function(){var c=$("#add-new-currency").val();$(".currency-check-content").append(' <div class="checkbox">\n                        <label class=\'sdfasd\'><input type="checkbox" class="currency-checkbox" value='+c+">"+c+"</label>\n                    </div>")})},Account.prototype.checkAllEvent=function(){$("#checkAll").click(function(){1==$(this).prop("checked")?(console.log("checkall"),$("input[class='account-chcekbox']").prop("checked",!0)):$("input[class='account-chcekbox']").prop("checked",!1)})},$(function(){(new Account).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQuanMiXSwibmFtZXMiOlsiQWNjb3VudCIsInNlbGYiLCJ0aGlzIiwiYWNjb3VudFdyYXBwZXIiLCIkIiwiY3VycnlXcmFwcGVyIiwidG90YWxQcm9wZXJ0eSIsImRldGFpbHNQcm9wZXJ0eSIsImNhcnJ5V3JhcHBlciIsInByb3RvdHlwZSIsInJ1biIsImxpc3RlblNob3dIaWRlQWRkQWNjb3VudCIsImxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyIiwibGlzdFByb3BlcnR5VG90YWxTaG93SGlkZUV2ZW50IiwibGlzdGVuUHJvcGVydHlEZXRhaWxzU2hvd0V2ZW50IiwibGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCIsImxpc3R0ZW5Qcm9wZXJ0eURldGFpbHNDbG9zZUV2ZW50IiwiZGVsZXRlQWNjb3VudCIsImxpc3RlblN1Ym1pdEFjY291bnQiLCJsaXN0ZW5kZW5vbWluYXRpb25FdmVudCIsImxpc3R0ZW5jdXl5ZW5jeVNob3ciLCJzaG93Q29sbGVjdEFzc2V0Iiwic2hvd0RldGFpbFByb3BlcnR5IiwicmVmZXJzaEFjY291bnRFdmVudCIsImFkZEFjY291bnRDdXJyZW5jeUV2ZW50IiwiY2hlY2tBbGxFdmVudCIsIm9uIiwicGsiLCJwYXJlbnQiLCJhdHRyIiwiY29uc29sZSIsImxvZyIsInNob3ciLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwiYWNjb3VudCIsImFjY291bnRHcm91cCIsInBsYXRmb3JtIiwiaWQiLCJ0aXRsZSIsImFjY2Vzc2tleSIsInNlY3JldGtleSIsInByb3AiLCJmaW5kIiwidmFsIiwiY2xvc2VCdG4iLCJjbGljayIsImhpZGUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImN1cnJlbmN5X2xpc3QiLCJlYWNoIiwicHVzaCIsImN1cnJlbmN5IiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJjaGFyZ2VBY2NvdW50RXZlbnQiLCJkYXRhcyIsInByb3BlcnRpZXMiLCJ0ZXh0IiwidHBsIiwidGVtcGxhdGUiLCJhcHBlbmQiLCJhY2NvdW50X2lkIiwiYWNjb3VudF9saXN0IiwiYWNjb3VudF9udW0iLCJsZW5ndGgiLCJhbGVydENvbmZpcm0iLCJjb25maXJtQ2FsbGJhY2siLCJsaXN0ZW5FZGl0QWNjb3VudCIsIm51bSIsImxpc3RlbldpdGhEcmF3IiwiYnRuIiwic2V0VGltZW91dCIsImFjY291bnRDdXVycmVuY3lFdmVudCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsVUFDTCxJQUFJQyxFQUFPQyxLQUNYRCxFQUFLRSxlQUFpQkMsRUFBRSx3QkFDeEJILEVBQUtJLGFBQWVELEVBQUUsMEJBQ3RCSCxFQUFLSyxjQUFnQkYsRUFBRSwyQkFDdkJILEVBQUtNLGdCQUFrQkgsRUFBRSw2QkFDekJILEVBQUtPLGFBQWVKLEVBQUUsZ0NBSzFCSixRQUFRUyxVQUFVQyxJQUFNLFdBQ3BCLElBQUlULEVBQU9DLEtBQ1hELEVBQUtVLDJCQUNMVixFQUFLVyw2QkFDTFgsRUFBS1ksaUNBQ0xaLEVBQUthLGlDQUNMYixFQUFLYywrQkFDTGQsRUFBS2UsbUNBQ0xmLEVBQUtnQixnQkFDTGhCLEVBQUtpQixzQkFDTGpCLEVBQUtrQiwwQkFDTGxCLEVBQUttQixzQkFDTG5CLEVBQUtvQixtQkFDTHBCLEVBQUtxQixxQkFDTHJCLEVBQUtzQixzQkFDTHRCLEVBQUt1QiwwQkFDTHZCLEVBQUt3QixpQkFRVHpCLFFBQVFTLFVBQVVhLG1CQUFxQixXQUNuQyxJQUFJckIsRUFBT0MsS0FDWEUsRUFBRSxvQkFBb0JzQixHQUFHLFFBQVMsV0FDOUIsSUFFSUMsRUFGYXZCLEVBQUVGLE1BQ0MwQixTQUFTQSxTQUNqQkMsS0FBSyxXQUNqQnpCLEVBQUUsbUJBQW1CeUIsS0FBSyxhQUFjRixHQUN4Q0csUUFBUUMsSUFBSUosR0FDWjFCLEVBQUtFLGVBQWU2QixPQUNwQkMsUUFBUUMsS0FBSyxDQUNUQyxJQUFPLHFCQUNQQyxLQUFRLENBQ0pULEdBQU1BLEdBRVZVLFFBQVcsU0FBVUMs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RSw0Q0FBNENvRCxLQUFLLFdBQy9DLEdBQStCLEdBQTNCcEQsRUFBRUYsTUFBTTRDLEtBQUssV0FBb0IsQ0FDakMsSUFFSXNCLEVBRmFoRSxFQUFFRixNQUNDMEIsU0FBU0EsU0FDVEMsS0FBSyxXQUN6QlUsRUFBUWtCLEtBQUtXLE1BS2Q3QixHQUlYdkMsUUFBUVMsVUFBVWUsd0JBQTBCLFdBQ3hDcEIsRUFBRSxxQkFBcUI4QyxNQUFNLFdBQ3pCLElBQUlRLEVBQVd0RCxFQUFFLHFCQUFxQjRDLE1BQ3RDNUMsRUFBRSwyQkFBMkIrRCxPQUFPLG1JQUM4RVQsRUFBVyxJQUFNQSxFQUFXLDJDQVF0SjFELFFBQVFTLFVBQVVnQixjQUFnQixXQUM5QnJCLEVBQUUsYUFBYThDLE1BQU0sV0FDYyxHQUEzQjlDLEVBQUVGLE1BQU00QyxLQUFLLFlBQ2JoQixRQUFRQyxJQUFJLFlBQ1ozQixFQUFFLG1DQUFtQzBDLEtBQUssV0FBVyxJQUVyRDFDLEVBQUUsbUNBQW1DMEMsS0FBSyxXQUFXLE1BT2pFMUMsRUFBRSxZQUNnQixJQUFJSixTQUNWVSIsImZpbGUiOiJhY2NvdW50Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEFjY291bnQoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmFjY291bnRXcmFwcGVyID0gJCgnLmFkZC1hY2NvdW50LXdyYXBwZXInKTtcclxuICAgIHNlbGYuY3VycnlXcmFwcGVyID0gJCgnLmFjY291bnQtY3Vycnktd3JhcHBlcicpO1xyXG4gICAgc2VsZi50b3RhbFByb3BlcnR5ID0gJCgnLnByb3BlcnR5LXRvdGFsLXdyYXBwZXInKTtcclxuICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5ID0gJCgnLnByb3BlcnR5LWRldGFpbHMtd3JhcHBlcicpO1xyXG4gICAgc2VsZi5jYXJyeVdyYXBwZXIgPSAkKCcuYWNjb3VudC1jYXJyeS1jdXJyeS13cmFwcGVyJyk7XHJcblxyXG59O1xyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVBZGRBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlQ3VycnlXcmFwcGVyKCk7XHJcbiAgICBzZWxmLmxpc3RQcm9wZXJ0eVRvdGFsU2hvd0hpZGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Qcm9wZXJ0eURldGFpbHNTaG93RXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlblRvYWxBY2NvdW50Q2xvc2VFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0dGVuUHJvcGVydHlEZXRhaWxzQ2xvc2VFdmVudCgpO1xyXG4gICAgc2VsZi5kZWxldGVBY2NvdW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEFjY291bnQoKTtcclxuICAgIHNlbGYubGlzdGVuZGVub21pbmF0aW9uRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdHRlbmN1eXllbmN5U2hvdygpO1xyXG4gICAgc2VsZi5zaG93Q29sbGVjdEFzc2V0KCk7XHJcbiAgICBzZWxmLnNob3dEZXRhaWxQcm9wZXJ0eSgpO1xyXG4gICAgc2VsZi5yZWZlcnNoQWNjb3VudEV2ZW50KCk7XHJcbiAgICBzZWxmLmFkZEFjY291bnRDdXJyZW5jeUV2ZW50KCk7XHJcbiAgICBzZWxmLmNoZWNrQWxsRXZlbnQoKTtcclxuICAgIC8vIHNlbGYubGlzdGVuRWRpdEFjY291bnQoKTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDotKbmiLdcclxuICovXHJcbkFjY291bnQucHJvdG90eXBlLnNob3dEZXRhaWxQcm9wZXJ0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoJy51cGRhdGUtcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgICQoJyNhZGQtYWNjb3VudC1waycpLmF0dHIoJ2FjY291bnQtcGsnLCBwaylcclxuICAgICAgICBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvYWNjb3VudGluZm8vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncGsnOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFjY291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRHcm91cCA9ICQoJy5hY2NvdW50LWJvZHknKTtcclxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybSA9IGFjY291bnRbJ3BsYXRmb3JtJ11bJ1BsYXRmb3JtX25hbWUnXVxyXG4gICAgICAgICAgICAgICAgICAgIGlkID0gYWNjb3VudFsncGxhdGZvcm0nXVsnaWQnXVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXRmb3JtKVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gYWNjb3VudFsndGl0bGUnXVxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnRbJ2FjY2Vzc2tleSddXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudFsnc2VjcmV0a2V5J11cclxuICAgICAgICAgICAgICAgICAgICAkKFwiI3BsYXRmb3JtIG9wdGlvblt2YWx1ZT1cIiArIGlkICsgXCJdXCIpLnByb3AoXCJzZWxlY3RlZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgb3B0aW9uID0gJChcIjxvcHRpb24+XCIpLnZhbChpZCkudGV4dChwbGF0Zm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICQoXCIjcGxhdGZvcm1cIikuYXBwZW5kKG9wdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50R3JvdXAuZmluZChcImlucHV0W25hbWU9J2FjY291bnQtbmFtZSddXCIpLnZhbCh0aXRsZSlcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50R3JvdXAuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbChhY2Nlc3NrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzY3JlbnQnXVwiKS52YWwoc2VjcmV0a2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRwbCA9IHRlbXBsYXRlKCdhZGQtYWNjb3VudEluZm8nLHtcImFjY291bnRcIjphY2NvdW50fSlcclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBhY2NvdW50R3JvdXAgPSAkKCcuYWNjb3VudC1tb2RhbC1oZWFkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY291bnRHcm91cC5hcHBlbmQodHBsKVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcbi8qKlxyXG4gKiDotKbmiLflvLnlh7rmoYbmmL7npLrpmpDol49cclxuICovXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlblNob3dIaWRlQWRkQWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJyNhZGQtYWNjb3VudC1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5hY2NvdW50V3JhcHBlci5zaG93KClcclxuICAgIH0pO1xyXG5cclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNzc2ZzZGZcIilcclxuICAgICAgICBzZWxmLmFjY291bnRXcmFwcGVyLmhpZGUoKVxyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuYWNjb3VudFdyYXBwZXIuaGlkZSgpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuZGVub21pbmF0aW9uRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyB2YXIgYWNjb3VudF9saXN0ID0gc2VsZi5hY2NvdW50Q3V1cnJlbmN5RXZlbnQoKVxyXG4gICAgLy8gY29uc29sZS5sb2coYWNjb3VudF9saXN0KVxyXG4gICAgJCgnI2FjY291bnQtY3VycnktY29uZmlndXJhdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuc2hvdygpO1xyXG5cclxuICAgICAgICB2YXIgY3VycmVuY3lfbGlzdCA9IFtdXHJcbiAgICAgICAgJCgnI2N1cnJlbmN5LWFkZC1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAkKFwiaW5wdXRbY2xhc3M9J2N1cnJlbmN5LWNoZWNrYm94J106Y2hlY2tib3hcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQodGhpcykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lfbGlzdC5wdXNoKCQodGhpcykudmFsKCkpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW5jeV9saXN0KVxyXG4gICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9jb25maWdjdXJyZW5jeS8nLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3lfbGlzdCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoJ+aWsOWinuW4geenjeaIkOWKnycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfSlcclxuXHJcbiAgICAkKCcuZGVub21pbmF0aW9uLWNsb3NlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG5cclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZGVub21pbmF0aW9uLW1hc2stYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kZW5vbWluYXRpb24tYWNjb3VudC13cmFwcGVyJykuaGlkZSgpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RQcm9wZXJ0eVRvdGFsU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgICQoJyNwcm9wZXJ0eS10b3RhbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuc2hvdygpXHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnRvdGFsUHJvcGVydHkuaGlkZSgpXHJcbiAgICB9KTtcclxuICAgICQoJy5jYW5jZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi50b3RhbFByb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVDdXJyeVdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcuYWRkLXByb3BlcnR5JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLnNob3coKVxyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmNoYXJnZUFjY291bnRFdmVudChwaylcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJ5V3JhcHBlci5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3R0ZW5Ub2FsQWNjb3VudENsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS10b3RhbC13cmFwcGVyJykuaGlkZSgpXHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdHRlblByb3BlcnR5RGV0YWlsc0Nsb3NlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcucHJvcGVydHktY2xvc2UtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKS5oaWRlKClcclxuICAgIH0pXHJcbn07XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0ZW5Qcm9wZXJ0eURldGFpbHNTaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICAkKCcuY2hlY2stcHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuc2hvdygpXHJcbiAgICAgICAgdmFyIGN1cnJlbnRidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHBrID0gdHIuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgICQoJy5yZWZlcnNoJykuYXR0cigncHJvcGVydHktaWQnLCBwaylcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwaylcclxuICAgICAgICB4ZnphamF4LnBvc3QoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICd1cmwnOiAnL2RlYWwvc2hvd2Fzc2VydC8nLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3BrJzogcGtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF0Zm9ybSA9IGRhdGFzWydQbGF0Zm9ybV9uYW1lJ10gIC8v5bmz5Y+w5ZCN56ewXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBhc3NldF9jaGFuZ2UgPSBkYXRhc1snYXNzZXRfY2hhbmdlJ10gIC8v5LuK5pel6LWE5Lqn5Y+Y5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBvcmlnaW5hbF9hc3NldHMgPSBkYXRhc1snb3JpZ2luYWxfYXNzZXRzJ10gLy/liJ3lp4votYTkuqdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGhpc3RvcnlfcHJvZml0ID0gZGF0YXNbJ2hpc3RvcnlfcHJvZml0J10gLy/ljoblj7Lnm4jkuo9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHdpdGhkcmF3X3JlY29yZCA9IGRhdGFzWyd3aXRoZHJhd19yZWNvcmQnXSAvL+aAu+aPkOW4gVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgYXNzZXRzX2RpY3QgPSBkYXRhc1snYXNzZXRzX2RpY3QnXSAgIC8v6LWE5Lqn6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBwcm9maXRfbG9zc19kaWN0ID0gZGF0YXNbJ3Byb2ZpdF9sb3NzX2RpY3QnXSAvL+aNn+ebiuihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvcGVydHktYWNjb3VudC12YWx1ZScpLnRleHQocGxhdGZvcm0pICAvL+aPkuWFpeW5s+WPsOWIsGh0bWzkuK1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRldGFpbHNHcm91cCA9ICQoJy5wcm9wZXJ0eS1kZXRhaWxzLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmFzc2V0cy1jaGFuZ2UgLm51bWJlcicpLnRleHQoYXNzZXRfY2hhbmdlWydudW1iZXInXSkgLy/otYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5hc3NldHMtY2hhbmdlIC5wZXJjZW50YWdlJykudGV4dChhc3NldF9jaGFuZ2VbJ3BlcmNlbnQnXSkgLy/otYTkuqflj5jljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5pbml0aWFsLWFzc2V0IC5udW1iZXInKS50ZXh0KG9yaWdpbmFsX2Fzc2V0cykgLy/liJ3lp4vlj5jljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5jdXJyeS1hY2NvdW50LXRvdGFsIC50b3RhbC1udW1iZXInKS50ZXh0KHdpdGhkcmF3X3JlY29yZCkgLy/mgLvorqHmj5DluIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWlsc0dyb3VwLmZpbmQoJy5oaXN0b3J5LXByb2ZpdCAgLm51bWJlcicpLnRleHQoaGlzdG9yeV9wcm9maXRbJ251bWJlciddKSAvL+aAu+iuoeaPkOW4gVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuZmluZCgnLmhpc3RvcnktcHJvZml0IC5wZXJjZW50YWdlJykudGV4dChoaXN0b3J5X3Byb2ZpdFsncGVyY2VudCddKSAvL+aAu+iuoeaPkOW4gVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRwbDEgPSB0ZW1wbGF0ZShcIlwiLHtcImFzc2V0c19kaWN0XCI6YXNzZXRzX2RpY3R9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsMiA9IHRlbXBsYXRlKFwiXCIse1wicHJvZml0X2xvc3NfZGljdFwiOnByb2ZpdF9sb3NzX2RpY3R9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdHBsID0gdGVtcGxhdGUoXCJkZXRhaWxzLWl0ZW1cIix7XCJkYXRhc1wiOmRhdGFzfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRldGFpbHNHcm91cCA9ICQoXCIucHJvcGVydHktZGV0YWlscy13cmFwcGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhaWxzR3JvdXAuYXBwZW5kKHRwbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdwcm9wZXJ0eS1kZXRhaWxzJywgeydwcm9wZXJ0aWVzJzogcHJvcGVydGllc30pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50UHJvcGVydHkgPSAkKCcjcHJvcGVydHktZGV0YWlscy1pZHMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50UHJvcGVydHkuYXBwZW5kKHRwbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRldGFpbHNUYWIgPSAkKCcjcHJvcGVydHktZGV0YWlscycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vIHZhciB0ZCA9IGRldGFpbHNUYWIuZmluZChcInRib2R5IHRyIHRkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQuZWFjaChhc3NldHNfZGljdCwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICQuZWFjaCh2YWx1ZSwgZnVuY3Rpb24gKGosIGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGV0YWlsc1Byb3BlcnR5LmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5oaWRlKCk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuXHJcbkFjY291bnQucHJvdG90eXBlLnNob3dDb2xsZWN0QXNzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyB2YXIgYWNjb3VudF9saXN0ID0gc2VsZi5hY2NvdW50Q3V1cnJlbmN5RXZlbnQoKVxyXG4gICAgLy8gY29uc29sZS5sb2coYWNjb3VudF9saXN0KVxyXG4gICAgJCgnI3Byb3BlcnR5LXRvdGFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhY2NvdW50ID0gW11cclxuICAgICAgICAkKFwiaW5wdXRbY2xhc3M9J2FjY291bnQtY2hjZWtib3gnXTpjaGVja2JveFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykucHJvcCgnY2hlY2tlZCcpID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ciA9IGN1cnJlbnRidG4ucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWNjb3VudF9pZCA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgICAgIGFjY291bnQucHVzaChhY2NvdW50X2lkKVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9zaG93Y29sbGVjdGFzc2V0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2FjY291bnRfbGlzdCc6IGFjY291bnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50X251bSA9IGFjY291bnQubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWNjb3VudF9udW0pXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RvdGFsLWFjY291bnQnKS50ZXh0KFwi5omA5pyJXCIgKyBhY2NvdW50X251bSArIFwi5Liq6LSm5oi3XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgndG90YWwtcHJvcGVydGllcycsIHsncHJvcGVydGllcyc6IHByb3BlcnRpZXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50UHJvcGVydHkgPSAkKCcjcHJvcGVydHktdG90YWwtZGV0YWlscycpXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFByb3BlcnR5LmFwcGVuZCh0cGwpXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmRlbGV0ZUFjY291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcuZGVsZXRlLXByb3BlcnR5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAndGl0bGUnOiAn5oKo56Gu5a6a5Yig6Zmk6L+Z5Liq6LSm5oi35ZCX77yfJyxcclxuICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9kZWxldGVhY2NvdW50LycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuRWRpdEFjY291bnQgPSBmdW5jdGlvbiAocGspIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjb25maXJtQnRuID0gJCgnLmNvbmZpcm0nKTtcclxuICAgIGNvbmZpcm1CdG4ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhY2NvdW50ID0gJCgnLmFjY291bnQtYm9keScpO1xyXG4gICAgICAgIHBsYXRmb3JtID0gJCgnI3BsYXRmb3JtJykuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKVxyXG4gICAgICAgIHRpdGxlID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nYWNjb3VudC1uYW1lJ11cIikudmFsKClcclxuICAgICAgICBhY2Nlc3NrZXkgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2Nlc3MnXVwiKS52YWwoKVxyXG4gICAgICAgIHNlY3JldGtleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J3NjcmVudCddXCIpLnZhbCgpXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9lZGl0YWNjb3VudC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwbGF0Zm9ybSc6IHBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnYWNjZXNza2V5JzogYWNjZXNza2V5LFxyXG4gICAgICAgICAgICAgICAgJ3NlY3JldGtleSc6IHNlY3JldGtleSxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5re75Yqg6LSm5oi35oiQ5Yqf77yBXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSlcclxuXHJcbn1cclxuQWNjb3VudC5wcm90b3R5cGUubGlzdGVuU3VibWl0QWNjb3VudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY29uZmlybScpO1xyXG5cclxuICAgIGNvbmZpcm1CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwayA9ICQodGhpcykuYXR0cignYWNjb3VudC1waycpXHJcbiAgICAgICAgY29uc29sZS5sb2cocGspXHJcbiAgICAgICAgdmFyIGFjY291bnQgPSAkKCcuYWNjb3VudC1ib2R5Jyk7XHJcbiAgICAgICAgcGxhdGZvcm0gPSAkKCcjcGxhdGZvcm0nKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpXHJcbiAgICAgICAgdGl0bGUgPSBhY2NvdW50LmZpbmQoXCJpbnB1dFtuYW1lPSdhY2NvdW50LW5hbWUnXVwiKS52YWwoKVxyXG4gICAgICAgIGFjY2Vzc2tleSA9IGFjY291bnQuZmluZChcImlucHV0W25hbWU9J2FjY2VzcyddXCIpLnZhbCgpXHJcbiAgICAgICAgc2VjcmV0a2V5ID0gYWNjb3VudC5maW5kKFwiaW5wdXRbbmFtZT0nc2NyZW50J11cIikudmFsKClcclxuICAgICAgICB2YXIgdXJsID0gJydcclxuICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgdXJsID0gJy9kZWFsL2VkaXRhY2NvdW50LydcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2RlYWwvYWRkYWNjb3VudC8nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BsYXRmb3JtJzogcGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdhY2Nlc3NrZXknOiBhY2Nlc3NrZXksXHJcbiAgICAgICAgICAgICAgICAnc2VjcmV0a2V5Jzogc2VjcmV0a2V5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi57yW6L6R6LSm5oi35oiQ5Yqf77yBXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmt7vliqDotKbmiLfmiJDlip/vvIFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmNoYXJnZUFjY291bnRFdmVudCA9IGZ1bmN0aW9uIChwaykge1xyXG4gICAgdmFyIGNvbmZpcm1CdG4gPSAkKCcuY3VycnktY29uZmlybScpXHJcbiAgICBjb25maXJtQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBudW0gPSAkKCcjY3VycmVuY3ktbnVtYmVyJykudmFsKClcclxuICAgICAgICBjdXJyZW5jeSA9ICQoJyNjdXJyZW5jeScpLnZhbCgpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCIqXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2cobnVtLCBjdXJyZW5jeSwgcGspXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvZGVhbC9jaGFyZ2VhY2NvdW50LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgICAgICAnbnVtJzogbnVtLFxyXG4gICAgICAgICAgICAgICAgJ2N1cnJlbmN5JzogY3VycmVuY3ksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLlop7otYTmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5saXN0dGVuY3V5eWVuY3lTaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgJCgnLm1lbnRpb24tbW9uZXknKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jYXJyeVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgdHIgPSBjdXJyZW50YnRuLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgIHZhciBwayA9IHRyLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICBzZWxmLmxpc3RlbldpdGhEcmF3KHBrKVxyXG5cclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKVxyXG4gICAgfSk7XHJcbiAgICAkKCcuY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY2FycnlXcmFwcGVyLmhpZGUoKTtcclxuICAgIH0pXHJcblxyXG5cclxufTtcclxuXHJcbkFjY291bnQucHJvdG90eXBlLmxpc3RlbldpdGhEcmF3ID0gZnVuY3Rpb24gKHBrKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYnRuID0gJCgnLmNhcnJ5LWNvbmZpcm0nKVxyXG4gICAgY29uc29sZS5sb2cocGspXHJcbiAgICBidG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG51bSA9ICQoJyNjYXJyeS1jdXJyZW5jeS1udW1iZXInKS52YWwoKVxyXG4gICAgICAgIGN1cnJlbmN5ID0gJCgnI2NhcnJ5LWN1cnJlbmN5JykudmFsKClcclxuICAgICAgICBjb25zb2xlLmxvZyhcIipcIilcclxuICAgICAgICBjb25zb2xlLmxvZyhudW0sIGN1cnJlbmN5LCBwaylcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9kZWFsL3dpdGhkcmF3LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ251bSc6IG51bSxcclxuICAgICAgICAgICAgICAgICdjdXJyZW5jeSc6IGN1cnJlbmN5LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogcGssXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmj5DluIHmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLnJlZmVyc2hBY2NvdW50RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAkKCcjZGV0YWlscy1yZWZlcnNoJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3NkZmFzXCIpXHJcbiAgICAgICAgc2VsZi5kZXRhaWxzUHJvcGVydHkuaGlkZSgpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmRldGFpbHNQcm9wZXJ0eS5zaG93KClcclxuXHJcbiAgICAgICAgfSwgMTAwKTtcclxuXHJcblxyXG4gICAgICAgIHBrID0gJCh0aGlzKS5hdHRyKCdwcm9wZXJ0eS1pZCcpXHJcbiAgICAgICAgLy8geGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAvLyAgICAgJ3VybCc6ICcvZGVhbC9zaG93YXNzZXJ0LycsXHJcbiAgICAgICAgLy8gICAgICdkYXRhJzoge1xyXG4gICAgICAgIC8vICAgICAgICAgJ3BrJzogcGtcclxuICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAvLyAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDAgKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2cocHJvcGVydGllcylcclxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ3Byb3BlcnR5LWRldGFpbHMnLHsncHJvcGVydGllcyc6cHJvcGVydGllc30pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGFjY291bnRQcm9wZXJ0eSA9ICQoJyNwcm9wZXJ0eS1kZXRhaWxzLWlkcycpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYWNjb3VudFByb3BlcnR5LnJlcGxhY2UodHBsKVxyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkFjY291bnQucHJvdG90eXBlLmFjY291bnRDdXVycmVuY3lFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY2NvdW50ID0gW11cclxuICAgICQoXCJpbnB1dFtjbGFzcz0nYWNjb3VudC1jaGNla2JveCddOmNoZWNrYm94XCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50YnRuID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIHRyID0gY3VycmVudGJ0bi5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICAgICAgdmFyIGFjY291bnRfaWQgPSB0ci5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgIGFjY291bnQucHVzaChhY2NvdW50X2lkKVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBhY2NvdW50XHJcblxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5hZGRBY2NvdW50Q3VycmVuY3lFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJyNhZGQtY3VycmVuY3ktYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW5jeSA9ICQoJyNhZGQtbmV3LWN1cnJlbmN5JykudmFsKClcclxuICAgICAgICAkKCcuY3VycmVuY3ktY2hlY2stY29udGVudCcpLmFwcGVuZChcIiA8ZGl2IGNsYXNzPVxcXCJjaGVja2JveFxcXCI+XFxuXCIgK1xyXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0nc2RmYXNkJz48aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIGNsYXNzPVxcXCJjdXJyZW5jeS1jaGVja2JveFxcXCIgdmFsdWU9XCIgKyBjdXJyZW5jeSArIFwiPlwiICsgY3VycmVuY3kgKyBcIjwvbGFiZWw+XFxuXCIgK1xyXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XCIpXHJcblxyXG4gICAgfSlcclxuXHJcblxyXG59XHJcblxyXG5BY2NvdW50LnByb3RvdHlwZS5jaGVja0FsbEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnI2NoZWNrQWxsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2hlY2thbGxcIilcclxuICAgICAgICAgICAgJChcImlucHV0W2NsYXNzPSdhY2NvdW50LWNoY2VrYm94J11cIikucHJvcChcImNoZWNrZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAkKFwiaW5wdXRbY2xhc3M9J2FjY291bnQtY2hjZWtib3gnXVwiKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY2NvdW50ID0gbmV3IEFjY291bnQoKTtcclxuICAgIGFjY291bnQucnVuKCk7XHJcbn0pIl19
